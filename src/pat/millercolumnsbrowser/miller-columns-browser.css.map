{
  "version": 3,
  "file": "miller-columns-browser.css",
  "sources": [
    "MillerColumnsBrowser.svelte"
  ],
  "sourcesContent": [
    "<!-- <svelte:options tag=\"miller-columns-browser\" /> -->\n\n<script>\n  import { onMount } from \"svelte\";\n  import { onDestroy } from 'svelte';\n  // import RelatedItem from \"./relateditem/RelatedItem.svelte\";\n  import { currentPath, config } from \"./stores.js\";\n  import millerColumnsStore from \"./millerColumnsStore\";\n  import { config_unsubscribe } from \"./millerColumnsStore\";\n  import { fade, fly } from \"svelte/transition\";\n  import { flip } from \"svelte/animate\";\n\n  export let max_depth = 2;\n  export let attr_string =\n    \"UID, Title, portal_type, path, getURL, getIcon, is_folderish, review_state\";\n  export let attributes = [];\n  export let vocabulary_url = \"http://localhost:8081/Plone/@@getVocabulary\";\n  //url = 'http://localhost:8081/Plone13/@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems&query={\"criteria\":[{\"i\":\"path\",\"o\":\"plone.app.querystring.operation.string.path\",\"v\":\"/Plone::1\"}],\"sort_on\":\"getObjPositionInParent\",\"sort_order\":\"ascending\"}&attributes=[\"UID\",\"Title\",\"portal_type\",\"path\",\"getURL\",\"getIcon\",\"is_folderish\",\"review_state\"]&batch={\"page\":1,\"size\":10}';\n  // console.log(url);\n  //       http://localhost:8080/Plone13/@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems&query={\"criteria\":[{\"i\":\"path\",\"o\":\"plone.app.querystring.operation.string.path\",\"v\":\"/Plone13/::1\"}],\"sort_on\":\"getObjPositionInParent\",\"sort_order\":\"ascending\"}&attributes=[\"UID\",\"Title\",\"portal_type\",\"path\",\"getURL\",\"getIcon\",\"is_folderish\",\"review_state\"]&batch={\"page\":1,\"size\":10}\n  const relatedItems = millerColumnsStore();\n\n  onMount(async () => {\n    console.log(\"mounted...\");\n    console.log(\"max_depth \", max_depth);\n    console.log(\"vocabulary_url \", vocabulary_url);\n    $config.max_depth = max_depth;\n    $config.vocabulary_url = vocabulary_url;\n    $config.attr_string = attr_string;\n    $config.attributes = attributes;\n    relatedItems.get($currentPath);\n  });\n\n  function changePath(p) {\n    console.log(\"change path to: \", p);\n    currentPath.set(p);\n  }\n\n  $: {\n    // vocabQuery = `{\"criteria\":[{\"i\":\"path\",\"o\":\"plone.app.querystring.operation.string.path\",\"v\":\"${$currentPath}::1\"}],\"sort_on\":\"getObjPositionInParent\",\"sort_order\":\"ascending\"}`;\n    // url = vocabularyUrl + vocabQuery + attributesParam; // + batchParam;\n    if($config.vocabulary_url) {\n      console.log(\"currentPath changed: \", $currentPath);\n      relatedItems.get($currentPath);\n    }\n  }\n\n  onDestroy(config_unsubscribe);\n</script>\n{max_depth}\n<h2>Related Items Prototype</h2>\n<div class=\"toolBar\">\n  <svg\n    class=\"homeAction bi bi-house\"\n    on:click={() => changePath(\"/\")}\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"16\"\n    height=\"16\"\n    fill=\"currentColor\"\n    viewBox=\"0 0 16 16\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      d=\"M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z\"\n    />\n    <path\n      fill-rule=\"evenodd\"\n      d=\"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z\"\n    />\n  </svg> <span class=\"path\">{$currentPath}</span>\n</div>\n{#await $relatedItems}\n  <p>...waiting</p>\n{:then levels}\n  <div class=\"levelColumns\">\n    {#each levels as level, i (level.path)}\n      <div\n        class=\"levelColumn{i % 2 == 0 ? ' odd' : ' even'}\"\n        in:fly|local={{ duration: 1000 }}\n      >\n        <div class=\"levelPath\">{level.path}</div>\n        {#each level.results as item, n}\n          <div class=\"relatedItem{n % 2 == 0 ? ' odd' : ' even'}\">\n            <div title={item.portal_type}>{item.Title}</div>\n            {#if item.portal_type === \"Image\"}\n                <img\n                  src=\"{item.getURL}/@@images/image/tile\"\n                  alt={item.Title}\n                />\n            {/if}\n            {#if item.is_folderish}\n              <svg on:click={() => changePath(item.path)}\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"16\"\n                  height=\"16\"\n                  fill=\"currentColor\"\n                  class=\"bi bi-arrow-right-circle-fill\"\n                  viewBox=\"0 0 16 16\"\n                >\n                  <path\n                    d=\"M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z\"\n                  />\n                </svg>\n            {/if}\n          </div>\n          <!-- <RelatedItem\n            title={item.Title}\n            path={item.path}\n            url={item.getURL}\n            is_folderish={item.is_folderish}\n            portal_type={item.portal_type}\n            uid={item.UID}\n          /> -->\n        {/each}\n      </div>\n    {/each}\n    <div class=\"preview\">\n\n    </div>\n  </div>\n{:catch error}\n  <p style=\"color: red\">{error.message}</p>\n{/await}\n\n<style>\n  /* h2 {\n    color: #ff3e00;\n    text-transform: uppercase;\n    font-size: 2em;\n    font-weight: 100;\n  } */\n\n  .toolBar {\n    background-color: lightskyblue;\n    padding: 0.5rem 1rem;\n    color: #333;\n    font-size: 1.8rem;\n  }\n  .toolBar > .path {\n    padding: 0 1.5rem;\n    line-height: 1em;\n  }\n  .homeAction {\n    width: 1em;\n    height: 1em;\n    vertical-align: -0.125em;\n  }\n\n  .levelColumns {\n    display: flex;\n  }\n\n  .levelColumn {\n    min-width: 200px;\n    border-top: 5px solid transparent;\n  }\n  .levelColumn.even {\n    border-top: 5px solid skyblue;\n  }\n\n  .levelPath {\n    background: #eee;\n    padding: 0.5rem 1rem;\n  }\n  .relatedItem {\n    /* padding: 1rem 1rem; */\n    display: flex;\n    align-items: baseline;\n    justify-content: space-between;\n    border-right: 1px solid #ddd;\n    /* border-left: 1px solid #ddd; */\n  }\n\n  .relatedItem.even {\n    background-color: aliceblue;\n  }\n  .relatedItem > * {\n    padding: 1rem;\n  }\n  .relatedItem > svg,\n  .relatedItem > img {\n    padding: 0 1rem;\n    margin: auto 0;\n  }\n\n  .relatedItem > img{\n    object-fit: cover;\n    width: 32px;\n    height: 32px;\n  }\n\n  .preview{\n    border: 1px solid lightskyblue;\n    min-width: 200px;\n    min-height: 400px;\n  }\n  /* #selected_items > * {\n    margin-bottom: 1rem;\n    display: block;\n  } */\n</style>\n"
  ],
  "names": [],
  "mappings": "AAoIE,QAAQ,8BAAC,CAAC,AACR,gBAAgB,CAAE,YAAY,CAC9B,OAAO,CAAE,MAAM,CAAC,IAAI,CACpB,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,MAAM,AACnB,CAAC,AACD,uBAAQ,CAAG,KAAK,eAAC,CAAC,AAChB,OAAO,CAAE,CAAC,CAAC,MAAM,CACjB,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,WAAW,8BAAC,CAAC,AACX,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,GAAG,CACX,cAAc,CAAE,QAAQ,AAC1B,CAAC,AAED,aAAa,8BAAC,CAAC,AACb,OAAO,CAAE,IAAI,AACf,CAAC,AAED,YAAY,8BAAC,CAAC,AACZ,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,WAAW,AACnC,CAAC,AACD,YAAY,KAAK,8BAAC,CAAC,AACjB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AAC/B,CAAC,AAED,UAAU,8BAAC,CAAC,AACV,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,MAAM,CAAC,IAAI,AACtB,CAAC,AACD,YAAY,8BAAC,CAAC,AAEZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,QAAQ,CACrB,eAAe,CAAE,aAAa,CAC9B,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAE9B,CAAC,AAED,YAAY,KAAK,8BAAC,CAAC,AACjB,gBAAgB,CAAE,SAAS,AAC7B,CAAC,AACD,2BAAY,CAAG,eAAE,CAAC,AAChB,OAAO,CAAE,IAAI,AACf,CAAC,AACD,2BAAY,CAAG,kBAAG,CAClB,2BAAY,CAAG,GAAG,eAAC,CAAC,AAClB,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,MAAM,CAAE,IAAI,CAAC,CAAC,AAChB,CAAC,AAED,2BAAY,CAAG,kBAAG,CAAC,AACjB,UAAU,CAAE,KAAK,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,AACd,CAAC,AAED,sCAAQ,CAAC,AACP,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,YAAY,CAC9B,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,AACnB,CAAC"
}