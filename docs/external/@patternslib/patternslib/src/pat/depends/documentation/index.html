<h2>Description</h2>
<p>The <em>depends</em> pattern makes it possible to make visibility of content conditional on form data.</p>
<h2>Documentation</h2>
<p>The <em>depends</em> pattern makes it possible to make visibility of content
conditional on form data. A common use case is to only show parts of a
form when relevant. Here is an example from a hypothetical pizza order
form:</p>
<p></p><form>
<label><input type="checkbox" name="custom"> Add extra toppings</label><p></p>
<p></p><fieldset class="pat-depends" data-pat-depends="custom">
<legend>Extra toppings</legend>
<label><input type="checkbox" name="pineapple"> Pineapple</label>
<label><input type="checkbox" name="gorgonzola"> Gorgonzola</label>
<label><input type="checkbox" name="peanuts"> Peanuts</label>
<label><input type="checkbox" name="redonion"> Red onions</label>
</fieldset>
</form><p></p>
<p>In this example the fieldset with options for extra toppings is only
shown when the user indicates he wants to add extra toppings.</p>
<p>Another common use case is filtering a list based on some options:</p>
<p><label><input type="checkbox" name="paid"> Show paid invoices</label>
<label><input type="checkbox" name="draft"> Show draft invoices</label>
<label><input type="checkbox" name="overdue" checked="checked"> Show overdue invoices</label></p>
<p></p><ul>
<li class="pat-depends" data-pat-depends="paid">A paid invoice</li>
<li class="pat-depends" data-pat-depends="paid">Another paid invoice</li>
<li class="pat-depends" data-pat-depends="overdue">An overdue invoice</li>
<li class="pat-depends" data-pat-depends="draft">A draft invoice</li>
â€¦
</ul><p></p>
<h3>Dependency expressions</h3>
<p>Dependencies are specified via <em>dependency expression</em>. These are
expressions that specify when an item should be visible or not.</p>
<p>The simplest form of a dependency expression is <code>&lt;input name&gt;</code> which
indicates that an input element with the given name (or id) must have a
value (if it is a checkbox must be checked). You can also test for a
specific value:</p>
<ul>
<li><code>&lt;input name&gt; = &lt;value&gt;</code>: indicates that an input element must have a
specific value. This is most useful when used to check which radio
button is checked.</li>
<li><code>&lt;input name&gt; != &lt;value&gt;</code>: indicates that an input element must not
have a specific value. This is most useful when used to check if a
specific radio button is not checked.</li>
<li><code>&lt;input name&gt; &lt;= &lt;value&gt;</code>: indicates that an input element must have
a value less than or equal than the given value. This is most useful
for number and range inputs.</li>
<li><code>&lt;input name&gt; &lt; &lt;value&gt;</code>: indicates that an input element must have
a value less than the given value. This is most useful for number
and range inputs. inputs.</li>
<li><code>&lt;input name&gt; &gt; &lt;value&gt;</code>: indicates that an input element must have
a value greater than the given value. This is most useful for number
and range inputs. inputs.</li>
<li><code>&lt;input name&gt; &gt;= &lt;value&gt;</code>: indicates that an input element must have
a value greater than or equal than the given value. This is most
useful for number and range inputs.</li>
<li><code>&lt;input name&gt; ~= &lt;value&gt;</code>: check if the value is a substring of the
current value of the input.</li>
</ul>
<p>You can also revert a test by putting the <code>not</code> keyword in front of it.
Here are some examples:</p>
<p><input type="checkbox" name="hidden"></p>
<p></p><p class="pat-depends" data-pat-depends="condition: hidden">
Hidden items will be included.
</p><p></p>
<p></p><p class="pat-depends" data-pat-depends="condition: not hidden">
Not showing hidden items.
</p><p></p>
<p><input type="range" name="price" value="50"></p>
<p></p><p class="pat-depends" data-pat-depends="price<100">
Showing cheap options.
</p><p></p>
<p>You can also combine multiple tests using <code>and</code> and <code>or</code>, optionally
using parenthesis to specify the desired grouping. Here is a more
complex example which demonstrates the use of <code>and</code>:</p>
<p></p><fieldset>
<legend>Select your flavour</legend>
<label><input type="radio" name="flavour" value="hawaii"> Hawaii</label>
<label><input type="radio" name="flavour" value="meat"> Meat fest </label>
<label><input type="radio" name="flavour" value="veg"> Vegeration </label>
<label><input type="checkbox" name="custom"> Add extra ingredients</label>
</fieldset><p></p>
<p></p><fieldset class="pat-depends" data-pat-depends="custom">
<legend>Select custom ingredients</legend>
<label><input type="checkbox" name="cheese"> Extra cheese</label>
<label><input type="checkbox" name="bacon"> Bacon</label>
</fieldset><p></p>
<p><em class="warning pat-depends" data-pat-depends="condition:flavour=veg and custom and bacon">
Adding bacon means your pizza is no longer vegetarian!</em></p>
<p>This pizza menu will show a warning if the user selects a vegetarian
pizza but then also adds extra bacon to it.</p>
<h3>Actions</h3>
<p>Two types of actions can be taken by the pattern: changing visibility
and disabling elements. The action can be specified using the <code>action</code>
property.</p>
<p><button data-pat-depends="title enable">Submit</button></p>
<p>This example shows a submit button which is disabled if the title input
has no value.</p>
<p>The available actions are:</p>
<ul>
<li><code>show</code>: make an item's visibility conditional, based on the
dependencies. If the dependencies are not met the item will
be made invisible. In addition a CSS class of <code>hidden</code> or
<code>visible</code> will be set.</li>
<li><code>enable</code>: disables items and adds a <code>disabled</code> class if the
dependencies are not met. Input elements are disabled by setting
their disabled property. Links are disabled by registered a
temporary event handler that blocks their default behaviour.</li>
<li><code>both</code>: both the <code>enable</code> and <code>show</code> actions will be applied. Conversely, an
element will be both hidden and disabled when the condition is not met.</li>
</ul>
<h3>Transitions</h3>
<p>When hiding or showing items you can specify a transition effect to be
used. The default behaviour is to not use any transition and immediately
hide or show the element by toggling its <code>display</code> style. If you prefer
to control the effect completely with CSS you can use the <code>css</code>
transition.</p>
<p><style>
.pat-depends {
transition-property: opacity;
transition-duration: 1s;
}
.visible {
opacity: 1;
}</p>
<p>.hidden {
opacity: 0;
}
</style></p>
<p></p><fieldset class="pat-depends" data-pat-depends="condition:custom; transition: css">
<legend>Select custom ingredients</legend>
<label><input type="checkbox" name="cheese"> Extra cheese</label>
<label><input type="checkbox" name="bacon"> Bacon</label>
</fieldset><p></p>
<p>This allow full control in CSS, including the use of animation for
browsers supporting CSS animation. Two non-CSS based animation options
are also included: <code>fade</code> will fade the element in and out, and <code>slide</code>
uses a vertical sliding effect. During a transition an <code>in-progress</code>
class will be set on the element.</p>
<h3>Option reference</h3>
<p>The depends can be configured through a <code>data-pat-depends</code> attribute.
The available options are:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>condition</code></td>
<td></td>
<td>The dependency condition.</td>
</tr>
<tr>
<td><code>action</code></td>
<td><code>show</code></td>
<td>Action to perform. One of <code>show</code>, <code>enable</code> or <code>both</code>.</td>
</tr>
<tr>
<td><code>transition</code></td>
<td><code>show</code></td>
<td>Transition effect to use if the action is <code>show</code>. Must be one of <code>none</code>, <code>css</code>, <code>fade</code> or <code>slide</code>.</td>
</tr>
<tr>
<td><code>effect-duration</code></td>
<td><code>fast</code></td>
<td>Duration of transition. This is ignored if the transition is <code>none</code> or <code>css</code>.</td>
</tr>
<tr>
<td><code>effect-easing</code></td>
<td><code>swing</code></td>
<td>Easing to use for the transition. This must be a known jQuery easing method. jQuery includes <code>swing</code> and <code>linear</code>, but more can be included via jQuery UI.</td>
</tr>
</tbody>
</table>
