"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[28469],{24433:function(e,t,n){var l=n(71354),r=n.n(l),s=n(76314),i=n.n(s)()(r());i.push([e.id,".content-browser-position-wrapper.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:space-between}.toolBar.svelte-gknbzr>.upload.svelte-gknbzr.svelte-gknbzr{margin:0 1rem 0 auto}.toolBar.svelte-gknbzr svg{vertical-align:-0.125em}.levelColumns.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-gknbzr>.levelActions.svelte-gknbzr.svelte-gknbzr{margin-left:auto}.levelItems.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{overflow-x:auto}.contentItem.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr:focus-visible{outline:none}.contentItem.even.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{background-color:var(--bs-secondary-bg)}.contentItem.inPath.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr,.contentItem.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-gknbzr>.svelte-gknbzr.svelte-gknbzr{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-gknbzr>.browseSub.svelte-gknbzr.svelte-gknbzr{flex-shrink:0}.contentItem.svelte-gknbzr .grid-preview.svelte-gknbzr>img.svelte-gknbzr{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-gknbzr .info.svelte-gknbzr.svelte-gknbzr{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-gknbzr .info .previewIcon.svelte-gknbzr.svelte-gknbzr{margin:0 auto 1rem auto}.preview.svelte-gknbzr .info .previewIcon svg.svelte-gknbzr.svelte-gknbzr{width:50px !important;height:50px !important}.preview.svelte-gknbzr h4.svelte-gknbzr.svelte-gknbzr{font-size:1.2 rem}.preview.svelte-gknbzr img.svelte-gknbzr.svelte-gknbzr{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-gknbzr.svelte-gknbzr.svelte-gknbzr{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,4EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,kDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,2DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,mDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,2DAAA,oBAAA,CAAA,2BAAA,uBAAA,CAAA,wDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,uDAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,wDAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,sEAAA,gBAAA,CAAA,sDAAA,eAAA,CAAA,uDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,qEAAA,YAAA,CAAA,4DAAA,uCAAA,CAAA,2HAAA,kDAAA,CAAA,oEAAA,kCAAA,CAAA,uBAAA,CAAA,wDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,kEAAA,aAAA,CAAA,yEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,mDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,yDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,sEAAA,uBAAA,CAAA,0EAAA,qBAAA,CAAA,sBAAA,CAAA,sDAAA,iBAAA,CAAA,uDAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,0DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,oDAAA,iBAAA,CAAA,gBAAA",sourceRoot:""}]),t.A=i},4156:function(e,t,n){var l=n(71354),r=n.n(l),s=n(76314),i=n.n(s)()(r());i.push([e.id,".content-browser-selected-items-wrapper.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf.svelte-bljrxf{border-radius:var(--bs-border-radius);background-color:var(--bs-tertiary-bg);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);padding:.5rem;margin-bottom:.5rem;display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>.svelte-bljrxf{margin-right:.5rem;display:block}.content-browser-selected-items.svelte-bljrxf .selected-item button.svelte-bljrxf.svelte-bljrxf{cursor:pointer;padding:0 .375rem .374rem 0}.content-browser-selected-items.svelte-bljrxf .selected-item .item-info.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>img.svelte-bljrxf{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,kFAAA,YAAA,CAAA,iBAAA,CAAA,0EAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA,CAAA,yFAAA,qCAAA,CAAA,sCAAA,CAAA,2EAAA,CAAA,aAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,0FAAA,kBAAA,CAAA,aAAA,CAAA,gGAAA,cAAA,CAAA,2BAAA,CAAA,oGAAA,YAAA,CAAA,iBAAA,CAAA,6FAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourceRoot:""}]),t.A=i},50850:function(e,t,n){n.r(t),n.d(t,{default:function(){return De}});var l=n(43467),r=(n(2531),n(23505)),s=n(41949),i=n(8633),o=n(78836),A=n(95669),a=n(61751),c=n(8936),u=n(54603),d=n(49264);async function p(e){let{method:t="GET",vocabularyUrl:n=null,attributes:l=[],path:r=null,uids:s=null,searchTerm:i=null,searchPath:o=null,levelInfoPath:A=null,selectableTypes:a=[],pageSize:c=100,page:u=1}=e,d={criteria:[]};if(r&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${r}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),A&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${A}::0`}]}),o&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:o}]},a&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:a})),s&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:s}]}),i&&d.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${i}`}),!d.criteria.length)return{results:[],total:0};let p=`${n}&query=${JSON.stringify(d)}&attributes=${JSON.stringify(l)}&batch=${JSON.stringify({page:u,size:c})}`,m=new Headers;m.set("Accept","application/json");const b=await fetch(p,{method:t,headers:m}),g=await b.json();if(b.ok){if(!o&&!A&&a.length){const e={results:[],total:g.total};for(const t of g.results)(-1!=a.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return g}return{results:[],total:0,errors:g.errors}}async function m(e,t){if(!e)return[];const n=await p({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let l=await(n?.results)||[];return l.sort(((t,n)=>e.indexOf(t.UID)-e.indexOf(n.UID))),l}async function b(e,t){let{iconName:n}=t;const l=await async function(e){return await d.A.resolveIcon(e)}(n);return e.outerHTML=l,{destroy(){}}}function g(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function v(e,t){const n=(0,u.T5)([]),l=async t=>(t={...{vocabularyUrl:e.vocabularyUrl,attributes:e.attributes,pageSize:e.pageSize},...t},e.selectableTypes.length&&(t.selectableTypes=e.selectableTypes),await p(t));return n.get=async r=>{let{path:s="",searchTerm:i="",updateCache:o=!1,loadMorePath:A="",page:a=1}=r;const c=new URL(e.base_url).pathname;if("search"===e.mode)await(async(t,r,s)=>{let i={searchPath:t,page:s};r&&(i.searchTerm="*"+r+"*");let o=await l(i);o.page=s,o.searchTerm=r,n.update((t=>{const n=s*e.pageSize<o.total;return 0==t.length||t[0].searchTerm!=r?(o.more=n,o.selectable=!1,o.gridView=!1,[o]):(t[0].more=n,t[0].page=o.page,t[0].results=[...t[0].results,...o.results],t)}))})(c,i,a);else if(A){const r=(0,u.Jt)(t);if(!(A in r))return;let s=r[A];a>s.page&&await(async(t,r,s)=>{let i={path:t,page:r};s&&(i.searchTerm="*"+s+"*");let o=await l(i);o.more=r*e.pageSize<o.total,o.page=r,n.update((e=>(e.forEach((e=>{if(e.path!=t)return e;e.page=o.page,e.more=o.more,e.results=[...e.results,...o.results]})),e)))})(A,a,s.searchTerm)}else s&&(s=s.replace(new RegExp(`^${c}`),""),await(async(r,s,i,o)=>{let A=[],a=s.split("/")||[];const c=a.length>=e.maxDepth?e.maxDepth:a.length;let d=a.slice(a.length-c,a.length);const p=r+a.slice(0,a.length-c).join("/"),m=(0,u.Jt)(t);for(;d.length>0;){let e=d.join("/").replace(/^\//,"");e=p+(""!=d.pop()?`/${e}`:""),-1===A.indexOf(e)&&A.push(e)}let b=[],g=0;for(var v of A){g++;const n=1==g;let s={};if(!(v in m)||n&&i||o){let o={path:v};if(n&&i&&(o.searchTerm="*"+i+"*"),s=await l(o),s.more=e.pageSize<s.total,s.searchTerm=i,s.page=1,s.path=v,s.absPath=v.replace(r,""),!i){const n=await l({levelInfoPath:v});n.total&&(s.UID=n.results[0].UID,s.Title=n.results[0].Title,s.selectable=!e.selectableTypes.length||-1!=e.selectableTypes.indexOf(n.results[0].portal_type)),s.gridView=!1,t.update((e=>(e[v]=s,e)))}}else s=m[v];b=[s,...b]}n.set(b)})(c,s,i,o))},n}var C=n(85072),h=n.n(C),f=n(97825),w=n.n(f),y=n(57722),k=n.n(y),x=n(55056),D=n.n(x),z=n(10540),B=n.n(z),F=n(41113),T=n.n(F),N=n(24433),I={};I.styleTagTransform=T(),I.setAttributes=D(),I.insert=k(),I.domAPI=w(),I.insertStyleElement=B();h()(N.A,I),N.A&&N.A.locals&&N.A.locals;function Y(e,t,n){const l=e.slice();return l[46]=t[n],l[47]=t,l[48]=n,l}function S(e,t,n){const l=e.slice();return l[49]=t[n],l[51]=n,l}function U(e){let t,n,r,s,i,o,a,c,u,d,p,m,v,C,h,f,w,y,k,x,D,z=e[6].uploadEnabled&&_(e),B={ctx:e,current:null,token:null,hasCatch:!0,pending:ne,then:j,catch:$,value:45,error:52};return(0,l.vBd)(f=e[1],B),{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("nav"),r=(0,l.ND4)("div"),s=(0,l.ND4)("div"),i=(0,l.ND4)("input"),o=(0,l.xem)(),a=(0,l.ND4)("label"),c=(0,l.QQy)("svg"),d=(0,l.xem)(),z&&z.c(),p=(0,l.xem)(),m=(0,l.ND4)("button"),v=(0,l.QQy)("svg"),h=(0,l.xem)(),B.block.c(),(0,l.CFu)(i,"type","text"),(0,l.CFu)(i,"name","filter"),(0,l.CFu)(a,"for","filter"),(0,l.CFu)(s,"class","filter"),(0,l.CFu)(m,"class","btn btn-link text-white"),(0,l.CFu)(m,"tabindex","0"),(0,l.CFu)(r,"class","toolBar navbar svelte-gknbzr"),(0,l.CFu)(n,"class","content-browser svelte-gknbzr"),(0,l.CFu)(t,"class","content-browser-position-wrapper svelte-gknbzr")},m(A,f){(0,l.Yry)(A,t,f),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(r,s),(0,l.BCw)(s,i),(0,l.BCw)(s,o),(0,l.BCw)(s,a),(0,l.BCw)(a,c),(0,l.BCw)(r,d),z&&z.m(r,null),(0,l.BCw)(r,p),(0,l.BCw)(r,m),(0,l.BCw)(m,v),(0,l.BCw)(n,h),B.block.m(n,B.anchor=null),B.mount=()=>n,B.anchor=null,k=!0,x||(D=[(0,l.KTR)(i,"input",e[26]),(0,l.hGc)(u=b.call(null,c,{iconName:"search"})),(0,l.hGc)(C=b.call(null,v,{iconName:"x-circle"})),(0,l.KTR)(m,"click",(0,l.xZN)(e[28])),(0,l.KTR)(n,"introend",e[37]),(0,l.hGc)(w=g.call(null,n)),(0,l.KTR)(n,"click_outside",e[22])],x=!0)},p(t,n){(e=t)[6].uploadEnabled?z?z.p(e,n):(z=_(e),z.c(),z.m(r,p)):z&&(z.d(1),z=null),B.ctx=e,2&n[0]&&f!==(f=e[1])&&(0,l.vBd)(f,B)||(0,l._6B)(B,e,n)},i(t){k||(t&&(0,l.Dti)((()=>{k&&(y||(y=(0,l.h86)(n,A._J,{x:e[14]/100*94,opacity:1},!0)),y.run(1))})),k=!0)},o(t){t&&(y||(y=(0,l.h86)(n,A._J,{x:e[14]/100*94,opacity:1},!1)),y.run(0)),k=!1},d(e){e&&(0,l.YoD)(t),z&&z.d(),B.block.d(),B.token=null,B=null,e&&y&&y.end(),x=!1,(0,l.oOW)(D)}}}function _(e){let t,n,r,s,i,o,A,c=(0,a.Ay)("upload to ${current_path}",{current_path:e[2]})+"";return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(c),(0,l.CFu)(t,"type","button"),(0,l.CFu)(t,"class","upload btn btn-secondary btn-sm svelte-gknbzr"),(0,l.CFu)(t,"tabindex","0")},m(a,c){(0,l.Yry)(a,t,c),(0,l.BCw)(t,n),(0,l.BCw)(t,s),(0,l.BCw)(t,i),o||(A=[(0,l.hGc)(r=b.call(null,n,{iconName:"upload"})),(0,l.KTR)(t,"keydown",e[15]),(0,l.KTR)(t,"click",e[15])],o=!0)},p(e,t){4&t[0]&&c!==(c=(0,a.Ay)("upload to ${current_path}",{current_path:e[2]})+"")&&(0,l.iQh)(i,c)},d(e){e&&(0,l.YoD)(t),o=!1,(0,l.oOW)(A)}}}function $(e){let t,n,r=e[52].message+"";return{c(){t=(0,l.ND4)("p"),n=(0,l.Qq7)(r),(0,l.hgi)(t,"color","red")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},p(e,t){2&t[0]&&r!==(r=e[52].message+"")&&(0,l.iQh)(n,r)},d(e){e&&(0,l.YoD)(t)}}}function j(e){let t,n,r,s,i=[],o=new Map,A=(0,l.rv_)(e[45]);const a=e=>e[46].path;for(let t=0;t<A.length;t+=1){let n=Y(e,A,t),l=a(n);o.set(l,i[t]=M(l,n))}let c=e[5]?.UID&&1==e[0].length&&Z(e),u=e[0].length>1&&ee(e),d=e[4]&&te(e);return{c(){t=(0,l.ND4)("div");for(let e=0;e<i.length;e+=1)i[e].c();n=(0,l.xem)(),c&&c.c(),r=(0,l.xem)(),u&&u.c(),s=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class","levelColumns svelte-gknbzr")},m(e,o){(0,l.Yry)(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);(0,l.BCw)(t,n),c&&c.m(t,null),(0,l.BCw)(t,r),u&&u.m(t,null),(0,l.BCw)(t,s),d&&d.m(t,null)},p(e,p){43712579&p[0]&&(A=(0,l.rv_)(e[45]),i=(0,l.l7s)(i,p,a,1,e,A,o,t,l.n_k,M,n,Y)),e[5]?.UID&&1==e[0].length?c?c.p(e,p):(c=Z(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),e[0].length>1?u?u.p(e,p):(u=ee(e),u.c(),u.m(t,s)):u&&(u.d(1),u=null),e[4]?d||(d=te(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&(0,l.YoD)(t);for(let e=0;e<i.length;e+=1)i[e].d();c&&c.d(),u&&u.d(),d&&d.d()}}}function Q(e){let t,n,r,s,i;return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"type","button"),(0,l.CFu)(t,"class","btn btn-link btn-xs ps-0 svelte-gknbzr"),(0,l.CFu)(t,"tabindex","0")},m(o,A){(0,l.Yry)(o,t,A),(0,l.BCw)(t,n),s||(i=[(0,l.hGc)(r=b.call(null,n,{iconName:"house"})),(0,l.KTR)(t,"keydown",e[29]),(0,l.KTR)(t,"click",e[30])],s=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),s=!1,(0,l.oOW)(i)}}}function q(e){let t,n,r,s,i,o=(0,a.Ay)("select ${level_path}",{level_path:e[46].absPath||"/"})+"";function A(){return e[31](e[46])}return{c(){t=(0,l.ND4)("button"),n=(0,l.Qq7)(o),(0,l.CFu)(t,"class","btn btn-primary btn-xs svelte-gknbzr"),t.disabled=r=!e[23](e[46])},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n),s||(i=(0,l.KTR)(t,"click",(0,l.xZN)(A)),s=!0)},p(s,i){e=s,2&i[0]&&o!==(o=(0,a.Ay)("select ${level_path}",{level_path:e[46].absPath||"/"})+"")&&(0,l.iQh)(n,o),2&i[0]&&r!==(r=!e[23](e[46]))&&(t.disabled=r)},d(e){e&&(0,l.YoD)(t),s=!1,i()}}}function E(e){let t,n,r,s,i;function o(){return e[33](e[46],e[47],e[48])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-gknbzr")},m(e,A){(0,l.Yry)(e,t,A),(0,l.BCw)(t,n),s||(i=[(0,l.hGc)(r=b.call(null,n,{iconName:"list"})),(0,l.KTR)(t,"click",o)],s=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),s=!1,(0,l.oOW)(i)}}}function P(e){let t,n,r,s,i;function o(){return e[32](e[46],e[47],e[48])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-gknbzr")},m(e,A){(0,l.Yry)(e,t,A),(0,l.BCw)(t,n),s||(i=[(0,l.hGc)(r=b.call(null,n,{iconName:"grid"})),(0,l.KTR)(t,"click",o)],s=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),s=!1,(0,l.oOW)(i)}}}function R(e){let t,n,r,s,i,o,A,a,c=e[49].Title+"";return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(c),(0,l.CFu)(t,"class","item-title svelte-gknbzr"),(0,l.CFu)(t,"title",o=e[49].portal_type+": "+e[49].Title)},m(o,c){(0,l.Yry)(o,t,c),(0,l.BCw)(t,n),(0,l.BCw)(t,s),(0,l.BCw)(t,i),A||(a=(0,l.hGc)(r=b.call(null,n,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),A=!0)},p(n,s){e=n,r&&(0,l.Qk1)(r.update)&&2&s[0]&&r.update.call(null,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&s[0]&&c!==(c=e[49].Title+"")&&(0,l.iQh)(i,c),2&s[0]&&o!==(o=e[49].portal_type+": "+e[49].Title)&&(0,l.CFu)(t,"title",o)},d(e){e&&(0,l.YoD)(t),A=!1,a()}}}function O(e){let t,n,r,s=e[49].Title+"";function i(e,t){return e[49].getIcon?L:K}let o=i(e),A=o(e);return{c(){t=(0,l.ND4)("div"),A.c(),n=(0,l.xem)(),r=(0,l.Qq7)(s),(0,l.CFu)(t,"class","grid-preview svelte-gknbzr")},m(e,s){(0,l.Yry)(e,t,s),A.m(t,null),(0,l.BCw)(t,n),(0,l.BCw)(t,r)},p(e,a){o===(o=i(e))&&A?A.p(e,a):(A.d(1),A=o(e),A&&(A.c(),A.m(t,n))),2&a[0]&&s!==(s=e[49].Title+"")&&(0,l.iQh)(r,s)},d(e){e&&(0,l.YoD)(t),A.d()}}}function K(e){let t,n,r,s;return{c(){t=(0,l.QQy)("svg")},m(i,o){(0,l.Yry)(i,t,o),r||(s=(0,l.hGc)(n=b.call(null,t,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),r=!0)},p(t,r){e=t,n&&(0,l.Qk1)(n.update)&&2&r[0]&&n.update.call(null,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),r=!1,s()}}}function L(e){let t,n,r;return{c(){t=(0,l.ND4)("img"),(0,l.mq_)(t.src,n=`${e[49].getURL}/@@images/image/thumb`)||(0,l.CFu)(t,"src",n),(0,l.CFu)(t,"alt",r=e[49].Title),(0,l.CFu)(t,"class","svelte-gknbzr")},m(e,n){(0,l.Yry)(e,t,n)},p(e,s){2&s[0]&&!(0,l.mq_)(t.src,n=`${e[49].getURL}/@@images/image/thumb`)&&(0,l.CFu)(t,"src",n),2&s[0]&&r!==(r=e[49].Title)&&(0,l.CFu)(t,"alt",r)},d(e){e&&(0,l.YoD)(t)}}}function G(e){let t,n,r,s,i;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","browseSub svelte-gknbzr")},m(e,o){(0,l.Yry)(e,t,o),(0,l.BCw)(t,n),s||(i=(0,l.hGc)(r=b.call(null,n,{iconName:"arrow-right-circle"})),s=!0)},d(e){e&&(0,l.YoD)(t),s=!1,i()}}}function W(e){let t,n,r,s,i,o,A;function a(e,t){return e[46].gridView?O:R}let c=a(e),u=c(e),d=e[49].is_folderish&&"browse"==e[6].mode&&G();function p(...t){return e[34](e[49],...t)}function m(...t){return e[35](e[49],...t)}return{c(){t=(0,l.ND4)("div"),u.c(),n=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class",r="contentItem"+(e[51]%2==0?" odd":" even")+(e[25](e[49])?" inPath":"")+(-1!=e[0].indexOf(e[49].UID)?" selectedItem":"")+(e[23](e[49])?"":" text-muted")+" svelte-gknbzr"),(0,l.CFu)(t,"role","button"),(0,l.CFu)(t,"tabindex",s=e[51]),(0,l.CFu)(t,"data-uuid",i=e[49].UID)},m(e,r){(0,l.Yry)(e,t,r),u.m(t,null),(0,l.BCw)(t,n),d&&d.m(t,null),o||(A=[(0,l.KTR)(t,"keydown",(0,l.xZN)(p)),(0,l.KTR)(t,"click",m)],o=!0)},p(s,o){c===(c=a(e=s))&&u?u.p(e,o):(u.d(1),u=c(e),u&&(u.c(),u.m(t,n))),e[49].is_folderish&&"browse"==e[6].mode?d||(d=G(),d.c(),d.m(t,null)):d&&(d.d(1),d=null),3&o[0]&&r!==(r="contentItem"+(e[51]%2==0?" odd":" even")+(e[25](e[49])?" inPath":"")+(-1!=e[0].indexOf(e[49].UID)?" selectedItem":"")+(e[23](e[49])?"":" text-muted")+" svelte-gknbzr")&&(0,l.CFu)(t,"class",r),2&o[0]&&i!==(i=e[49].UID)&&(0,l.CFu)(t,"data-uuid",i)},d(e){e&&(0,l.YoD)(t),u.d(),d&&d.d(),o=!1,(0,l.oOW)(A)}}}function J(e){let t,n,r,s,i,o,A;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),(0,l.CFu)(n,"class","spinner-border"),(0,l.CFu)(n,"role","status"),(0,l.CFu)(t,"class","loadmore svelte-gknbzr"),(0,l.CFu)(t,"data-level-path",r=e[46].path),(0,l.CFu)(t,"data-level-next-page",s=parseInt(e[46].page)+1)},m(r,s){(0,l.Yry)(r,t,s),(0,l.BCw)(t,n),o||(A=(0,l.hGc)(i=e[27].call(null,t)),o=!0)},p(e,n){2&n[0]&&r!==(r=e[46].path)&&(0,l.CFu)(t,"data-level-path",r),2&n[0]&&s!==(s=parseInt(e[46].page)+1)&&(0,l.CFu)(t,"data-level-next-page",s)},d(e){e&&(0,l.YoD)(t),o=!1,A()}}}function V(e){let t,n;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("p"),n.textContent=`${(0,a.Ay)("no results found")}`,(0,l.CFu)(n,"class","svelte-gknbzr"),(0,l.CFu)(t,"class","contentItem svelte-gknbzr")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},d(e){e&&(0,l.YoD)(t)}}}function M(e,t){let n,r,s,i,o,a,c,u,d,p,m,b=0==t[48]&&Q(t),g=t[46].selectable&&q(t);function v(e,t){return e[46].gridView?E:P}let C=v(t),h=C(t),f=(0,l.rv_)(t[46].results||[]),w=[];for(let e=0;e<f.length;e+=1)w[e]=W(S(t,f,e));let y=t[46].more&&J(t),k=0==t[46].total&&V();return{key:e,first:null,c(){n=(0,l.ND4)("div"),r=(0,l.ND4)("div"),b&&b.c(),s=(0,l.xem)(),g&&g.c(),i=(0,l.xem)(),o=(0,l.ND4)("div"),h.c(),a=(0,l.xem)(),c=(0,l.ND4)("div");for(let e=0;e<w.length;e+=1)w[e].c();u=(0,l.xem)(),y&&y.c(),d=(0,l.xem)(),k&&k.c(),(0,l.CFu)(o,"class","levelActions svelte-gknbzr"),(0,l.CFu)(r,"class","levelToolbar svelte-gknbzr"),(0,l.CFu)(c,"class","levelItems svelte-gknbzr"),(0,l.CFu)(n,"class",p="levelColumn"+(t[48]%2==0?" odd":" even")+" svelte-gknbzr"),this.first=n},m(e,t){(0,l.Yry)(e,n,t),(0,l.BCw)(n,r),b&&b.m(r,null),(0,l.BCw)(r,s),g&&g.m(r,null),(0,l.BCw)(r,i),(0,l.BCw)(r,o),h.m(o,null),(0,l.BCw)(n,a),(0,l.BCw)(n,c);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(c,null);(0,l.BCw)(c,u),y&&y.m(c,null),(0,l.BCw)(c,d),k&&k.m(c,null)},p(e,A){if(0==(t=e)[48]?b?b.p(t,A):(b=Q(t),b.c(),b.m(r,s)):b&&(b.d(1),b=null),t[46].selectable?g?g.p(t,A):(g=q(t),g.c(),g.m(r,i)):g&&(g.d(1),g=null),C===(C=v(t))&&h?h.p(t,A):(h.d(1),h=C(t),h&&(h.c(),h.m(o,null))),42598467&A[0]){let e;for(f=(0,l.rv_)(t[46].results||[]),e=0;e<f.length;e+=1){const n=S(t,f,e);w[e]?w[e].p(n,A):(w[e]=W(n),w[e].c(),w[e].m(c,u))}for(;e<w.length;e+=1)w[e].d(1);w.length=f.length}t[46].more?y?y.p(t,A):(y=J(t),y.c(),y.m(c,d)):y&&(y.d(1),y=null),0==t[46].total?k||(k=V(),k.c(),k.m(c,null)):k&&(k.d(1),k=null),2&A[0]&&p!==(p="levelColumn"+(t[48]%2==0?" odd":" even")+" svelte-gknbzr")&&(0,l.CFu)(n,"class",p)},i(e){e&&(m||(0,l.Dti)((()=>{m=(0,l.b7f)(n,A._J,{duration:300}),m.start()})))},o:l.lQ1,d(e){e&&(0,l.YoD)(n),b&&b.d(),g&&g.d(),h.d(),(0,l.ppq)(w,e),y&&y.d(),k&&k.d()}}}function Z(e){let t,n,r,s,i,o,A,c,u,d,p,m,b,g,v,C=(0,a.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"",h=e[5].Title+"",f=e[5].Description+"";function w(e,t){return e[5].getIcon?X:H}let y=w(e),k=y(e);return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),r=(0,l.ND4)("button"),s=(0,l.Qq7)(C),o=(0,l.xem)(),A=(0,l.ND4)("div"),k.c(),c=(0,l.xem)(),u=(0,l.ND4)("h4"),d=(0,l.Qq7)(h),p=(0,l.xem)(),m=(0,l.ND4)("p"),b=(0,l.Qq7)(f),(0,l.CFu)(r,"class","btn btn-primary btn-xs svelte-gknbzr"),r.disabled=i=!e[23](e[5]),(0,l.CFu)(n,"class","levelToolbar svelte-gknbzr"),(0,l.CFu)(u,"class","svelte-gknbzr"),(0,l.CFu)(A,"class","info svelte-gknbzr"),(0,l.CFu)(t,"class","preview svelte-gknbzr")},m(i,a){(0,l.Yry)(i,t,a),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(r,s),(0,l.BCw)(t,o),(0,l.BCw)(t,A),k.m(A,null),(0,l.BCw)(A,c),(0,l.BCw)(A,u),(0,l.BCw)(u,d),(0,l.BCw)(A,p),(0,l.BCw)(A,m),(0,l.BCw)(m,b),g||(v=(0,l.KTR)(r,"click",(0,l.xZN)(e[36])),g=!0)},p(e,t){32&t[0]&&C!==(C=(0,a.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"")&&(0,l.iQh)(s,C),32&t[0]&&i!==(i=!e[23](e[5]))&&(r.disabled=i),y===(y=w(e))&&k?k.p(e,t):(k.d(1),k=y(e),k&&(k.c(),k.m(A,c))),32&t[0]&&h!==(h=e[5].Title+"")&&(0,l.iQh)(d,h),32&t[0]&&f!==(f=e[5].Description+"")&&(0,l.iQh)(b,f)},d(e){e&&(0,l.YoD)(t),k.d(),g=!1,v()}}}function H(e){let t,n,r,s,i;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(n,"class","svelte-gknbzr"),(0,l.CFu)(t,"class","previewIcon svelte-gknbzr")},m(o,A){(0,l.Yry)(o,t,A),(0,l.BCw)(t,n),s||(i=(0,l.hGc)(r=b.call(null,n,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),s=!0)},p(e,t){r&&(0,l.Qk1)(r.update)&&32&t[0]&&r.update.call(null,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),s=!1,i()}}}function X(e){let t,n,r,s;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("img"),(0,l.mq_)(n.src,r=e[5].getURL+"/@@images/image/preview")||(0,l.CFu)(n,"src",r),(0,l.CFu)(n,"alt",s=e[5].Title),(0,l.CFu)(n,"class","svelte-gknbzr"),(0,l.CFu)(t,"class","previewImage")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},p(e,t){32&t[0]&&!(0,l.mq_)(n.src,r=e[5].getURL+"/@@images/image/preview")&&(0,l.CFu)(n,"src",r),32&t[0]&&s!==(s=e[5].Title)&&(0,l.CFu)(n,"alt",s)},d(e){e&&(0,l.YoD)(t)}}}function ee(e){let t,n,r,s,i,o,A,c,u;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),r=(0,l.ND4)("button"),r.textContent=`${(0,a.Ay)("add selected items")}`,s=(0,l.xem)(),i=(0,l.ND4)("div"),o=(0,l.QQy)("svg"),(0,l.CFu)(r,"class","btn btn-primary btn-xs svelte-gknbzr"),(0,l.CFu)(n,"class","levelToolbar svelte-gknbzr"),(0,l.CFu)(o,"class","svelte-gknbzr"),(0,l.CFu)(i,"class","info svelte-gknbzr"),(0,l.CFu)(t,"class","preview svelte-gknbzr")},m(a,d){(0,l.Yry)(a,t,d),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(t,s),(0,l.BCw)(t,i),(0,l.BCw)(i,o),c||(u=[(0,l.KTR)(r,"click",(0,l.xZN)(e[21])),(0,l.hGc)(A=b.call(null,o,{iconName:"files"}))],c=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),c=!1,(0,l.oOW)(u)}}}function te(e){let t;return{c(){t=(0,l.ND4)("div"),(0,l.CFu)(t,"class","upload-wrapper svelte-gknbzr")},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function ne(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,a.Ay)("loading content items")}`},m(e,n){(0,l.Yry)(e,t,n)},p:l.lQ1,d(e){e&&(0,l.YoD)(t)}}}function le(e){let t,n=e[3]&&U(e);return{c(){n&&n.c(),t=(0,l.Iex)()},m(e,r){n&&n.m(e,r),(0,l.Yry)(e,t,r)},p(e,r){e[3]?n?(n.p(e,r),8&r[0]&&(0,l.c7F)(n,1)):(n=U(e),n.c(),(0,l.c7F)(n,1),n.m(t.parentNode,t)):n&&((0,l.V44)(),(0,l.Tn8)(n,1,1,(()=>{n=null})),(0,l.GYV)())},i(e){(0,l.c7F)(n)},o(e){(0,l.Tn8)(n)},d(e){e&&(0,l.YoD)(t),n&&n.d(e)}}}function re(e,t,n){let r,A,a,u,d,p,b;o.ih({scrollX:!0,container:".levelColumns",duration:500});const g=(0,s.SD)("currentPath");(0,l.j0C)(e,g,(e=>n(2,a=e)));const C=(0,s.SD)("config");(0,l.j0C)(e,C,(e=>n(6,b=e)));const h=(0,s.SD)("pathCache"),f=(0,s.SD)("showContentBrowser");(0,l.j0C)(e,f,(e=>n(3,u=e)));const w=(0,s.SD)("selectedItems");(0,l.j0C)(e,w,(e=>n(41,p=e)));const y=(0,s.SD)("selectedUids");(0,l.j0C)(e,y,(e=>n(40,d=e)));const k=(0,s.SD)("previewUids");(0,l.j0C)(e,k,(e=>n(0,r=e)));const x=v(b,h);(0,l.j0C)(e,x,(e=>n(1,A=e)));let D=!1,z={},B=!1,F=!1,T=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function N({data:e=null,uuid:t=null,action:s="show"}){if(e&&"show"==s)n(5,z=e),(0,l.vu6)(k,r=[e.UID],r);else if(t&&"add"==s&&-1===r.indexOf(t)){if(b.maximumSelectionSize>0&&r.length>=b.maximumSelectionSize)return;(0,l.vu6)(k,r=[...r,t],r)}else t&&"remove"==s&&-1!==r.indexOf(t)?k.update((e=>(e.splice(e.indexOf(t),1),e))):"clear"==s&&(n(5,z={}),(0,l.vu6)(k,r=[],r))}function I(e,t){n(4,D=!1),N({action:"clear"}),"/"!==e?function(e){if("search"==b.mode)N({data:e});else if(e.is_folderish)g.set(e.path);else{const t=e.path.split("/"),n=t.slice(0,t.length-1).join("/");g.set(n||"/"),N({data:e})}q()}(e):g.set(e)}function Y(e,t){B||(B=!0);const n=t.currentTarget.closest(".levelItems"),l=n.querySelectorAll(".selectedItem");if(l.length&&1!=b.maximumSelectionSize)if(F||t?.shiftKey){let t=!1;for(const l of n.children){if(-1!==[e.UID,z.UID].indexOf(l.dataset.uuid)){if(t){N({uuid:l.dataset.uuid,action:"add"}),t=!1;continue}t=!0}N({uuid:l.dataset.uuid,action:t?"add":"remove"})}}else t?.metaKey||t?.ctrlKey?N({uuid:e.UID,action:-1==r.indexOf(e.UID)?"add":"remove"}):([...l].map((e=>e.classList.remove("selectedItem"))),I(e));else I(e);t.currentTarget.focus(),t.currentTarget.classList.add("selectedItem")}function S(){if(B)return;const e=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem"),document.querySelector(".levelColumn .contentItem")];e.length&&(B=!0,e[0].focus())}function U(e,t){const n=t.currentTarget;if(F=t.shiftKey,"Escape"==t.key&&j(),"ArrowDown"==t.key&&n?.nextElementSibling?.classList.contains("contentItem")&&n.nextElementSibling.click(),"ArrowUp"==t.key&&n?.previousElementSibling?.classList.contains("contentItem")&&n.previousElementSibling.click(),"ArrowRight"==t.key){const e=t.target.closest(".levelColumn"),n=e?.nextElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".contentItem")?.click()}if("ArrowLeft"==t.key){const e=t.target.closest(".levelColumn"),n=e?.previousElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".inPath").click()}"Space"==t.key&&Y(e,t),"Enter"==t.key&&Q(e)&&(1==b.maximumSelectionSize?_(e):$())}async function _(e){1==b.maximumSelectionSize?(w.set([e]),y.set([e.UID])):(w.update((t=>[...t,e])),y.update((()=>p.map((e=>e.UID))))),N({action:"clear"}),(0,l.vu6)(f,u=!1,u),B=!1}async function $(){const e=await m(r,b);w.update((t=>{for(const n of e)-1==d.indexOf(n.UID)&&t.push(n);return t})),y.update((()=>p.map((e=>e.UID)))),N({action:"clear"}),(0,l.vu6)(f,u=!1,u),B=!1}function j(){(0,l.vu6)(f,u=!1,u),B=!1,N({action:"clear"})}function Q(e){return-1===d.indexOf(e.UID)}function q(){const e=document.querySelector(".levelColumns");e&&o.VG({x:e.scrollWidth+100})}return e.$$.update=()=>{12&e.$$.dirty[0]&&u&&x.get({path:a}),2&e.$$.dirty[0]&&q(),e.$$.dirty[0]},[r,A,a,u,D,z,b,g,C,f,w,y,k,x,T,async function(){N({action:"clear"}),n(4,D=!0),await i.A.timeout(1);const e=document.querySelector(".upload-wrapper");e.classList.add("pat-upload"),new c.default(e,{baseUrl:b.base_url,currentPath:a,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(e,t)=>{x.get({path:a,updateCache:!0})}})},I,Y,S,U,_,$,j,Q,q,function(e){return-1!=a.indexOf(e.path)},function(){let e;e&&clearTimeout(e),e=setTimeout((()=>{x.get({path:a,searchTerm:this.value})}),300)},function(e){const t=new IntersectionObserver((t=>{for(const n of t)if(n.isIntersecting){const t=e.dataset.levelPath,n=parseInt(e.dataset.levelNextPage);x.get({loadMorePath:t,page:n})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{t.observe(e)}),500)},()=>j(),()=>I("/"),()=>I("/"),e=>_(e),(e,t,n)=>(0,l.vu6)(x,t[n].gridView=!0,A),(e,t,n)=>(0,l.vu6)(x,t[n].gridView=!1,A),(e,t)=>U(e,t),(e,t)=>Y(e,t),()=>_(z),()=>{q(),S()}]}class se extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,re,le,l.jXN,{},null,[-1,-1])}}var ie=se,oe=n(81557),Ae=n(44423),ae=n.n(Ae),ce=n(44563),ue=n(4156),de={};de.styleTagTransform=T(),de.setAttributes=D(),de.insert=k(),de.domAPI=w(),de.insertStyleElement=B();h()(ue.A,de),ue.A&&ue.A.locals&&ue.A.locals;function pe(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function me(e){let t,n=[],r=new Map,s=(0,l.rv_)(e[0]);const i=e=>e[19].UID;for(let t=0;t<s.length;t+=1){let l=pe(e,s,t),o=i(l);r.set(o,n[t]=ge(o,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=(0,l.Iex)()},m(e,r){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,r);(0,l.Yry)(e,t,r)},p(e,o){if(129&o){s=(0,l.rv_)(e[0]);for(let e=0;e<n.length;e+=1)n[e].r();n=(0,l.l7s)(n,o,i,1,e,s,r,t.parentNode,l.F8r,ge,t,pe);for(let e=0;e<n.length;e+=1)n[e].a()}},d(e){e&&(0,l.YoD)(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function be(e){let t,n,r;return{c(){t=(0,l.ND4)("img"),(0,l.mq_)(t.src,n=e[19].getURL+"/@@images/image/mini")||(0,l.CFu)(t,"src",n),(0,l.CFu)(t,"alt",r=e[19].Title),(0,l.CFu)(t,"class","svelte-bljrxf")},m(e,n){(0,l.Yry)(e,t,n)},p(e,s){1&s&&!(0,l.mq_)(t.src,n=e[19].getURL+"/@@images/image/mini")&&(0,l.CFu)(t,"src",n),1&s&&r!==(r=e[19].Title)&&(0,l.CFu)(t,"alt",r)},d(e){e&&(0,l.YoD)(t)}}}function ge(e,t){let n,r,s,i,o,A,a,c,u,d,p,m,g,v,C,h,f,w,y,k=t[19].Title+"",x=t[19].path+"",D=l.lQ1;function z(){return t[9](t[21])}let B=t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)&&be(t);return{key:e,first:null,c(){n=(0,l.ND4)("div"),r=(0,l.ND4)("div"),s=(0,l.ND4)("button"),i=(0,l.QQy)("svg"),A=(0,l.xem)(),a=(0,l.ND4)("div"),c=(0,l.ND4)("span"),u=(0,l.Qq7)(k),d=(0,l.ND4)("br"),p=(0,l.xem)(),m=(0,l.ND4)("span"),g=(0,l.Qq7)(x),v=(0,l.xem)(),B&&B.c(),C=(0,l.xem)(),(0,l.CFu)(s,"class","btn btn-link btn-sm link-secondary svelte-bljrxf"),(0,l.CFu)(c,"class","item-title"),(0,l.CFu)(m,"class","small"),(0,l.CFu)(r,"class","item-info svelte-bljrxf"),(0,l.CFu)(n,"class","selected-item svelte-bljrxf"),(0,l.CFu)(n,"data-uuid",h=t[19].UID),this.first=n},m(e,t){(0,l.Yry)(e,n,t),(0,l.BCw)(n,r),(0,l.BCw)(r,s),(0,l.BCw)(s,i),(0,l.BCw)(r,A),(0,l.BCw)(r,a),(0,l.BCw)(a,c),(0,l.BCw)(c,u),(0,l.BCw)(a,d),(0,l.BCw)(a,p),(0,l.BCw)(a,m),(0,l.BCw)(m,g),(0,l.BCw)(n,v),B&&B.m(n,null),(0,l.BCw)(n,C),w||(y=[(0,l.hGc)(o=b.call(null,i,{iconName:"x-circle"})),(0,l.KTR)(s,"click",z)],w=!0)},p(e,r){t=e,1&r&&k!==(k=t[19].Title+"")&&(0,l.iQh)(u,k),1&r&&x!==(x=t[19].path+"")&&(0,l.iQh)(g,x),t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)?B?B.p(t,r):(B=be(t),B.c(),B.m(n,C)):B&&(B.d(1),B=null),1&r&&h!==(h=t[19].UID)&&(0,l.CFu)(n,"data-uuid",h)},r(){f=n.getBoundingClientRect()},f(){(0,l.K$G)(n),D()},a(){D(),D=(0,l.qYc)(n,f,oe.U,{duration:500})},d(e){e&&(0,l.YoD)(n),B&&B.d(),w=!1,(0,l.oOW)(y)}}}function ve(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,a.Ay)("loading selected items")}`},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function Ce(e){let t,n,r,s,i,o,A,c=e[0]&&me(e),u=!e[0]&&ve();return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),c&&c.c(),r=(0,l.xem)(),u&&u.c(),s=(0,l.xem)(),i=(0,l.ND4)("button"),i.textContent=`${(0,a.Ay)("Select")}`,(0,l.CFu)(n,"class","content-browser-selected-items svelte-bljrxf"),(0,l.CFu)(i,"class","btn btn-primary"),(0,l.hgi)(i,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,l.CFu)(t,"class","content-browser-selected-items-wrapper svelte-bljrxf"),(0,l.hgi)(t,"width",e[2].width||"auto")},m(a,d){(0,l.Yry)(a,t,d),(0,l.BCw)(t,n),c&&c.m(n,null),(0,l.BCw)(n,r),u&&u.m(n,null),(0,l.BCw)(t,s),(0,l.BCw)(t,i),e[11](t),o||(A=(0,l.KTR)(i,"click",(0,l.xZN)(e[10])),o=!0)},p(e,[s]){e[0]?c?c.p(e,s):(c=me(e),c.c(),c.m(n,r)):c&&(c.d(1),c=null),e[0]?u&&(u.d(1),u=null):u||(u=ve(),u.c(),u.m(n,null)),4&s&&(0,l.hgi)(t,"width",e[2].width||"auto")},i:l.lQ1,o:l.lQ1,d(n){n&&(0,l.YoD)(t),c&&c.d(),u&&u.d(),e[11](null),o=!1,A()}}}function he(e,t,n){let r,i,o,A,a=!0;const c=(0,s.SD)("config");(0,l.j0C)(e,c,(e=>n(2,i=e)));const u=i.fieldId,d=document.getElementById(u),p=(0,s.SD)("selectedItems");(0,l.j0C)(e,p,(e=>n(0,r=e)));const b=(0,s.SD)("selectedUids"),g=(0,s.SD)("showContentBrowser");function v(e){p.update((t=>(t.splice(e,1),t))),b.update((()=>r.map((e=>e.UID))))}function C(){1!==i.maximumSelectionSize&&r.length>1&&ae().create(d.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:e=>{let t=[];for(const n of e.target.children)t.push(n.dataset.uuid);h(t)}})}function h(e){const t=e.join(i.separator);d.value=t,d.dispatchEvent(ce.A.change_event())}(0,l.j0C)(e,g,(e=>n(3,o=e))),(0,s.Rc)((async()=>{await async function(){const e=i.selection.length?i.selection:d?.value?d.value.split(i.separator):[];if(!e.length)return;const t=await m(e,i);(0,l.vu6)(p,r=t,r),b.update((()=>t.map((e=>e.UID))))}(),C(),n(8,a=!1)}));return e.$$.update=()=>{257&e.$$.dirty&&(!r.length&&a||(h(function(){let e=[];return r.forEach((t=>{e.push(t.UID)})),e}()),C()))},[r,A,i,o,c,p,g,v,a,e=>v(e),()=>(0,l.vu6)(g,o=!0,o),function(e){l.Dnk[e?"unshift":"push"]((()=>{A=e,n(1,A)}))}]}class fe extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,he,Ce,l.jXN,{})}}var we=fe;(0,u.T5)(!1);function ye(e){let t,n,r,s;return t=new ie({}),r=new we({}),{c(){(0,l.N0i)(t.$$.fragment),n=(0,l.xem)(),(0,l.N0i)(r.$$.fragment)},m(e,i){(0,l.wSR)(t,e,i),(0,l.Yry)(e,n,i),(0,l.wSR)(r,e,i),s=!0},p:l.lQ1,i(e){s||((0,l.c7F)(t.$$.fragment,e),(0,l.c7F)(r.$$.fragment,e),s=!0)},o(e){(0,l.Tn8)(t.$$.fragment,e),(0,l.Tn8)(r.$$.fragment,e),s=!1},d(e){e&&(0,l.YoD)(n),(0,l.Hbl)(t,e),(0,l.Hbl)(r,e)}}}function ke(e,t,n){let i,o,{maxDepth:A}=t,{width:a}=t,{attributes:c}=t,{contextPath:d}=t,{vocabularyUrl:p}=t,{mode:m="browse"}=t,{basePath:b=""}=t,{selectableTypes:g=[]}=t,{maximumSelectionSize:v=-1}=t,{separator:C}=t,{selection:h=[]}=t,{query:f={}}=t,{fieldId:w}=t,{upload:y}=t,{favorites:k}=t,{recentlyUsed:x}=t,{recentlyUsedKey:D}=t,{bSize:z=20}=t;const B=r.A.getLogger("pat-contentbrowser");!function(){let e=(0,u.T5)("");(0,s.o)("currentPath",e)}(),function(){let e=(0,u.T5)({});(0,s.o)("config",e)}(),function(){let e=(0,u.T5)({});(0,s.o)("pathCache",e)}(),function(){let e=(0,u.T5)([]);(0,s.o)("selectedItems",e)}(),function(){let e=(0,u.T5)(!1);(0,s.o)("showContentBrowser",e)}(),function(){let e=(0,u.T5)([]);(0,s.o)("selectedUids",e)}(),function(){let e=(0,u.T5)([]);(0,s.o)("previewUids",e)}();const F=(0,s.SD)("currentPath");(0,l.j0C)(e,F,(e=>n(21,o=e))),o||(0,l.vu6)(F,o=b||"/",o);const T=document.body.getAttribute("data-portal-url");let N=(0,s.SD)("config");return(0,l.j0C)(e,N,(e=>n(20,i=e))),(0,l.vu6)(N,i={mode:m,attributes:c,contextPath:d,vocabularyUrl:p,width:a,maxDepth:A,basePath:b,selectableTypes:g,maximumSelectionSize:v,separator:C,selection:h,query:f,fieldId:w,uploadEnabled:y,favorites:k,recentlyUsed:x,recentlyUsedKey:D,base_url:T,pageSize:z},i),B.debug(`Initialized App<${w}> with config ${JSON.stringify(i)}`),e.$$set=e=>{"maxDepth"in e&&n(2,A=e.maxDepth),"width"in e&&n(3,a=e.width),"attributes"in e&&n(4,c=e.attributes),"contextPath"in e&&n(5,d=e.contextPath),"vocabularyUrl"in e&&n(6,p=e.vocabularyUrl),"mode"in e&&n(7,m=e.mode),"basePath"in e&&n(8,b=e.basePath),"selectableTypes"in e&&n(9,g=e.selectableTypes),"maximumSelectionSize"in e&&n(10,v=e.maximumSelectionSize),"separator"in e&&n(11,C=e.separator),"selection"in e&&n(12,h=e.selection),"query"in e&&n(13,f=e.query),"fieldId"in e&&n(14,w=e.fieldId),"upload"in e&&n(15,y=e.upload),"favorites"in e&&n(16,k=e.favorites),"recentlyUsed"in e&&n(17,x=e.recentlyUsed),"recentlyUsedKey"in e&&n(18,D=e.recentlyUsedKey),"bSize"in e&&n(19,z=e.bSize)},[F,N,A,a,c,d,p,m,b,g,v,C,h,f,w,y,k,x,D,z]}class xe extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,ke,ye,l.jXN,{maxDepth:2,width:3,attributes:4,contextPath:5,vocabularyUrl:6,mode:7,basePath:8,selectableTypes:9,maximumSelectionSize:10,separator:11,selection:12,query:13,fieldId:14,upload:15,favorites:16,recentlyUsed:17,recentlyUsedKey:18,bSize:19})}}var De=xe}}]);
//# sourceMappingURL=28469.2fa227eb08f0432235b9.min.js.map