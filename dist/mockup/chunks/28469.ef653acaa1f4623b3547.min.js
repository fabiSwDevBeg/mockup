"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[28469],{24433:function(e,t,n){var l=n(71354),s=n.n(l),r=n(76314),i=n.n(r)()(s());i.push([e.id,".content-browser-position-wrapper.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:space-between}.toolBar.svelte-1nidsbj>.upload.svelte-1nidsbj.svelte-1nidsbj{margin:0 1rem 0 auto}.toolBar.svelte-1nidsbj svg{vertical-align:-0.125em}.levelColumns.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-1nidsbj>.levelActions.svelte-1nidsbj.svelte-1nidsbj{margin-left:auto}.levelItems.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{overflow-x:auto}.contentItem.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj:focus-visible{outline:none}.contentItem.even.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{background-color:var(--bs-secondary-bg)}.contentItem.inPath.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj,.contentItem.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-1nidsbj>.svelte-1nidsbj.svelte-1nidsbj{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-1nidsbj>.browseSub.svelte-1nidsbj.svelte-1nidsbj{flex-shrink:0}.contentItem.svelte-1nidsbj .grid-preview.svelte-1nidsbj>img.svelte-1nidsbj{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-1nidsbj .info.svelte-1nidsbj.svelte-1nidsbj{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-1nidsbj .info .previewIcon.svelte-1nidsbj.svelte-1nidsbj{margin:0 auto 1rem auto}.preview.svelte-1nidsbj .info .previewIcon svg.svelte-1nidsbj.svelte-1nidsbj{width:50px !important;height:50px !important}.preview.svelte-1nidsbj h4.svelte-1nidsbj.svelte-1nidsbj{font-size:1.2 rem}.preview.svelte-1nidsbj img.svelte-1nidsbj.svelte-1nidsbj{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-1nidsbj.svelte-1nidsbj.svelte-1nidsbj{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,+EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,qDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,8DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,sDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,8DAAA,oBAAA,CAAA,4BAAA,uBAAA,CAAA,2DAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,0DAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,2DAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,yEAAA,gBAAA,CAAA,yDAAA,eAAA,CAAA,0DAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,wEAAA,YAAA,CAAA,+DAAA,uCAAA,CAAA,iIAAA,kDAAA,CAAA,uEAAA,kCAAA,CAAA,uBAAA,CAAA,2DAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,qEAAA,aAAA,CAAA,4EAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,sDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,4DAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,yEAAA,uBAAA,CAAA,6EAAA,qBAAA,CAAA,sBAAA,CAAA,yDAAA,iBAAA,CAAA,0DAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,6DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,uDAAA,iBAAA,CAAA,gBAAA",sourceRoot:""}]),t.A=i},4156:function(e,t,n){var l=n(71354),s=n.n(l),r=n(76314),i=n.n(r)()(s());i.push([e.id,".content-browser-selected-items-wrapper.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf.svelte-bljrxf{border-radius:var(--bs-border-radius);background-color:var(--bs-tertiary-bg);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);padding:.5rem;margin-bottom:.5rem;display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>.svelte-bljrxf{margin-right:.5rem;display:block}.content-browser-selected-items.svelte-bljrxf .selected-item button.svelte-bljrxf.svelte-bljrxf{cursor:pointer;padding:0 .375rem .374rem 0}.content-browser-selected-items.svelte-bljrxf .selected-item .item-info.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>img.svelte-bljrxf{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,kFAAA,YAAA,CAAA,iBAAA,CAAA,0EAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA,CAAA,yFAAA,qCAAA,CAAA,sCAAA,CAAA,2EAAA,CAAA,aAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,0FAAA,kBAAA,CAAA,aAAA,CAAA,gGAAA,cAAA,CAAA,2BAAA,CAAA,oGAAA,YAAA,CAAA,iBAAA,CAAA,6FAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourceRoot:""}]),t.A=i},50850:function(e,t,n){n.r(t),n.d(t,{default:function(){return je}});var l=n(43467),s=(n(2531),n(23505)),r=n(41949),i=n(8633),o=n(78836),a=n(95669),A=n(61751),c=n(8936),u=n(54603),d=n(49264);async function p(e){let{method:t="GET",vocabularyUrl:n=null,attributes:l=[],path:s=null,uids:r=null,searchTerm:i=null,searchPath:o=null,levelInfoPath:a=null,selectableTypes:A=[],pageSize:c=100,page:u=1}=e,d={criteria:[]};if(s&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${s}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),a&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${a}::0`}]}),o&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:o}]},A&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:A})),r&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:r}]}),i&&d.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${i}`}),!d.criteria.length)return{results:[],total:0};console.log(d);let p=`${n}&query=${JSON.stringify(d)}&attributes=${JSON.stringify(l)}&batch=${JSON.stringify({page:u,size:c})}`,m=new Headers;m.set("Accept","application/json");const b=await fetch(p,{method:t,headers:m}),v=await b.json();if(b.ok){if(!o&&!a&&A.length){const e={results:[],total:v.total};for(const t of v.results)(-1!=A.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return v}return{results:[],total:0,errors:v.errors}}async function m(e,t){if(!e)return[];const n=await p({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let l=await(n?.results)||[];return l.sort(((t,n)=>e.indexOf(t.UID)-e.indexOf(n.UID))),l}async function b(e,t){let{iconName:n}=t;const l=await async function(e){return await d.A.resolveIcon(e)}(n);return e.outerHTML=l,{destroy(){}}}function v(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function C(e,t){const n=(0,u.T5)([]),l=async t=>(t={...{vocabularyUrl:e.vocabularyUrl,attributes:e.attributes,pageSize:e.pageSize},...t},e.selectableTypes.length&&(t.selectableTypes=e.selectableTypes),await p(t));return n.get=async s=>{let{path:r="",searchTerm:i="",updateCache:o=!1,loadMorePath:a="",page:A=1}=s;const c=new URL(e.base_url).pathname;if("search"===e.mode)await(async(t,s,r)=>{let i={searchPath:t,page:r};s&&(i.searchTerm="*"+s+"*");let o=await l(i);o.page=r,o.searchTerm=s,n.update((t=>{const n=r*e.pageSize<o.total;return 0==t.length||t[0].searchTerm!=s?(o.more=n,o.selectable=!1,o.gridView=!1,[o]):(t[0].more=n,t[0].page=o.page,t[0].results=[...t[0].results,...o.results],t)}))})(c,i,A);else if(a){const s=(0,u.Jt)(t);if(!(a in s))return;let r=s[a];A>r.page&&await(async(t,s,r)=>{let i={path:t,page:s};r&&(i.searchTerm="*"+r+"*");let o=await l(i);o.more=s*e.pageSize<o.total,o.page=s,n.update((e=>(e.forEach((e=>{if(e.path!=t)return e;e.page=o.page,e.more=o.more,e.results=[...e.results,...o.results]})),e)))})(a,A,r.searchTerm)}else r&&(r=r.replace(new RegExp(`^${c}`),""),await(async(s,r,i,o)=>{let a=[],A=r.split("/")||[];const c=A.length>=e.maxDepth?e.maxDepth:A.length;let d=A.slice(A.length-c,A.length);const p=s+A.slice(0,A.length-c).join("/"),m=(0,u.Jt)(t);for(;d.length>0;){let e=d.join("/").replace(/^\//,"");e=p+(""!=d.pop()?`/${e}`:""),-1===a.indexOf(e)&&a.push(e)}let b=[],v=0;for(var C of a){v++;const n=1==v;let r={};if(!(C in m)||n&&i||o){let o={path:C};if(n&&i&&(o.searchTerm="*"+i+"*"),r=await l(o),r.more=e.pageSize<r.total,r.searchTerm=i,r.page=1,r.path=C,r.absPath=C.replace(s,""),!i){const n=await l({levelInfoPath:C});n.total&&(r.UID=n.results[0].UID,r.Title=n.results[0].Title,r.selectable=!e.selectableTypes.length||-1!=e.selectableTypes.indexOf(n.results[0].portal_type)),r.gridView=!1,t.update((e=>(e[C]=r,e)))}}else r=m[C];b=[r,...b]}n.set(b)})(c,r,i,o))},n}var f=n(85072),h=n.n(f),g=n(97825),w=n.n(g),y=n(57722),x=n.n(y),j=n(55056),D=n.n(j),B=n(10540),F=n.n(B),T=n(41113),N=n.n(T),I=n(24433),S={};S.styleTagTransform=N(),S.setAttributes=D(),S.insert=x(),S.domAPI=w(),S.insertStyleElement=F();h()(I.A,S),I.A&&I.A.locals&&I.A.locals;function Y(e,t,n){const l=e.slice();return l[46]=t[n],l[47]=t,l[48]=n,l}function k(e,t,n){const l=e.slice();return l[49]=t[n],l[51]=n,l}function U(e){let t,n,s,r,i,o,A,c,u,d,p,m,C,f,h,g,w,y,x,j,D,B=e[6].uploadEnabled&&_(e),F={ctx:e,current:null,token:null,hasCatch:!0,pending:ne,then:$,catch:Q,value:45,error:52};return(0,l.vBd)(g=e[1],F),{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("nav"),s=(0,l.ND4)("div"),r=(0,l.ND4)("div"),i=(0,l.ND4)("input"),o=(0,l.xem)(),A=(0,l.ND4)("label"),c=(0,l.QQy)("svg"),d=(0,l.xem)(),B&&B.c(),p=(0,l.xem)(),m=(0,l.ND4)("button"),C=(0,l.QQy)("svg"),h=(0,l.xem)(),F.block.c(),(0,l.CFu)(i,"type","text"),(0,l.CFu)(i,"name","filter"),(0,l.CFu)(A,"for","filter"),(0,l.CFu)(r,"class","filter"),(0,l.CFu)(m,"class","btn btn-link text-white"),(0,l.CFu)(m,"tabindex","0"),(0,l.CFu)(s,"class","toolBar navbar svelte-1nidsbj"),(0,l.CFu)(n,"class","content-browser svelte-1nidsbj"),(0,l.CFu)(t,"class","content-browser-position-wrapper svelte-1nidsbj")},m(a,g){(0,l.Yry)(a,t,g),(0,l.BCw)(t,n),(0,l.BCw)(n,s),(0,l.BCw)(s,r),(0,l.BCw)(r,i),(0,l.BCw)(r,o),(0,l.BCw)(r,A),(0,l.BCw)(A,c),(0,l.BCw)(s,d),B&&B.m(s,null),(0,l.BCw)(s,p),(0,l.BCw)(s,m),(0,l.BCw)(m,C),(0,l.BCw)(n,h),F.block.m(n,F.anchor=null),F.mount=()=>n,F.anchor=null,x=!0,j||(D=[(0,l.KTR)(i,"input",e[26]),(0,l.hGc)(u=b.call(null,c,{iconName:"search"})),(0,l.hGc)(f=b.call(null,C,{iconName:"x-circle"})),(0,l.KTR)(m,"click",(0,l.xZN)(e[28])),(0,l.KTR)(n,"introend",e[37]),(0,l.hGc)(w=v.call(null,n)),(0,l.KTR)(n,"click_outside",e[22])],j=!0)},p(t,n){(e=t)[6].uploadEnabled?B?B.p(e,n):(B=_(e),B.c(),B.m(s,p)):B&&(B.d(1),B=null),F.ctx=e,2&n[0]&&g!==(g=e[1])&&(0,l.vBd)(g,F)||(0,l._6B)(F,e,n)},i(t){x||(t&&(0,l.Dti)((()=>{x&&(y||(y=(0,l.h86)(n,a._J,{x:e[14]/100*94,opacity:1},!0)),y.run(1))})),x=!0)},o(t){t&&(y||(y=(0,l.h86)(n,a._J,{x:e[14]/100*94,opacity:1},!1)),y.run(0)),x=!1},d(e){e&&(0,l.YoD)(t),B&&B.d(),F.block.d(),F.token=null,F=null,e&&y&&y.end(),j=!1,(0,l.oOW)(D)}}}function _(e){let t,n,s,r,i,o,a,c=(0,A.Ay)("upload to ${current_path}",{current_path:e[2]})+"";return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),r=(0,l.xem)(),i=(0,l.Qq7)(c),(0,l.CFu)(t,"type","button"),(0,l.CFu)(t,"class","upload btn btn-secondary btn-sm svelte-1nidsbj"),(0,l.CFu)(t,"tabindex","0")},m(A,c){(0,l.Yry)(A,t,c),(0,l.BCw)(t,n),(0,l.BCw)(t,r),(0,l.BCw)(t,i),o||(a=[(0,l.hGc)(s=b.call(null,n,{iconName:"upload"})),(0,l.KTR)(t,"keydown",e[15]),(0,l.KTR)(t,"click",e[15])],o=!0)},p(e,t){4&t[0]&&c!==(c=(0,A.Ay)("upload to ${current_path}",{current_path:e[2]})+"")&&(0,l.iQh)(i,c)},d(e){e&&(0,l.YoD)(t),o=!1,(0,l.oOW)(a)}}}function Q(e){let t,n,s=e[52].message+"";return{c(){t=(0,l.ND4)("p"),n=(0,l.Qq7)(s),(0,l.hgi)(t,"color","red")},m(e,s){(0,l.Yry)(e,t,s),(0,l.BCw)(t,n)},p(e,t){2&t[0]&&s!==(s=e[52].message+"")&&(0,l.iQh)(n,s)},d(e){e&&(0,l.YoD)(t)}}}function $(e){let t,n,s,r,i=[],o=new Map,a=(0,l.rv_)(e[45]);const A=e=>e[46].path;for(let t=0;t<a.length;t+=1){let n=Y(e,a,t),l=A(n);o.set(l,i[t]=M(l,n))}let c=e[5]?.UID&&1==e[0].length&&Z(e),u=e[0].length>1&&ee(e),d=e[4]&&te(e);return{c(){t=(0,l.ND4)("div");for(let e=0;e<i.length;e+=1)i[e].c();n=(0,l.xem)(),c&&c.c(),s=(0,l.xem)(),u&&u.c(),r=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class","levelColumns svelte-1nidsbj")},m(e,o){(0,l.Yry)(e,t,o);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null);(0,l.BCw)(t,n),c&&c.m(t,null),(0,l.BCw)(t,s),u&&u.m(t,null),(0,l.BCw)(t,r),d&&d.m(t,null)},p(e,p){43712579&p[0]&&(a=(0,l.rv_)(e[45]),i=(0,l.l7s)(i,p,A,1,e,a,o,t,l.n_k,M,n,Y)),e[5]?.UID&&1==e[0].length?c?c.p(e,p):(c=Z(e),c.c(),c.m(t,s)):c&&(c.d(1),c=null),e[0].length>1?u?u.p(e,p):(u=ee(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[4]?d||(d=te(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&(0,l.YoD)(t);for(let e=0;e<i.length;e+=1)i[e].d();c&&c.d(),u&&u.d(),d&&d.d()}}}function q(e){let t,n,s,r,i;return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"type","button"),(0,l.CFu)(t,"class","btn btn-link btn-xs ps-0 svelte-1nidsbj"),(0,l.CFu)(t,"tabindex","0")},m(o,a){(0,l.Yry)(o,t,a),(0,l.BCw)(t,n),r||(i=[(0,l.hGc)(s=b.call(null,n,{iconName:"house"})),(0,l.KTR)(t,"keydown",e[29]),(0,l.KTR)(t,"click",e[30])],r=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),r=!1,(0,l.oOW)(i)}}}function E(e){let t,n,s,r,i,o=(0,A.Ay)("select ${level_path}",{level_path:e[46].absPath||"/"})+"";function a(){return e[31](e[46])}return{c(){t=(0,l.ND4)("button"),n=(0,l.Qq7)(o),(0,l.CFu)(t,"class","btn btn-primary btn-xs svelte-1nidsbj"),t.disabled=s=!e[23](e[46])},m(e,s){(0,l.Yry)(e,t,s),(0,l.BCw)(t,n),r||(i=(0,l.KTR)(t,"click",(0,l.xZN)(a)),r=!0)},p(r,i){e=r,2&i[0]&&o!==(o=(0,A.Ay)("select ${level_path}",{level_path:e[46].absPath||"/"})+"")&&(0,l.iQh)(n,o),2&i[0]&&s!==(s=!e[23](e[46]))&&(t.disabled=s)},d(e){e&&(0,l.YoD)(t),r=!1,i()}}}function P(e){let t,n,s,r,i;function o(){return e[33](e[46],e[47],e[48])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1nidsbj")},m(e,a){(0,l.Yry)(e,t,a),(0,l.BCw)(t,n),r||(i=[(0,l.hGc)(s=b.call(null,n,{iconName:"list"})),(0,l.KTR)(t,"click",o)],r=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),r=!1,(0,l.oOW)(i)}}}function R(e){let t,n,s,r,i;function o(){return e[32](e[46],e[47],e[48])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1nidsbj")},m(e,a){(0,l.Yry)(e,t,a),(0,l.BCw)(t,n),r||(i=[(0,l.hGc)(s=b.call(null,n,{iconName:"grid"})),(0,l.KTR)(t,"click",o)],r=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),r=!1,(0,l.oOW)(i)}}}function z(e){let t,n,s,r,i,o,a,A,c=e[49].Title+"";return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),r=(0,l.xem)(),i=(0,l.Qq7)(c),(0,l.CFu)(t,"class","item-title svelte-1nidsbj"),(0,l.CFu)(t,"title",o=e[49].portal_type+": "+e[49].Title)},m(o,c){(0,l.Yry)(o,t,c),(0,l.BCw)(t,n),(0,l.BCw)(t,r),(0,l.BCw)(t,i),a||(A=(0,l.hGc)(s=b.call(null,n,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),a=!0)},p(n,r){e=n,s&&(0,l.Qk1)(s.update)&&2&r[0]&&s.update.call(null,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&r[0]&&c!==(c=e[49].Title+"")&&(0,l.iQh)(i,c),2&r[0]&&o!==(o=e[49].portal_type+": "+e[49].Title)&&(0,l.CFu)(t,"title",o)},d(e){e&&(0,l.YoD)(t),a=!1,A()}}}function O(e){let t,n,s,r=e[49].Title+"";function i(e,t){return e[49].getIcon?L:K}let o=i(e),a=o(e);return{c(){t=(0,l.ND4)("div"),a.c(),n=(0,l.xem)(),s=(0,l.Qq7)(r),(0,l.CFu)(t,"class","grid-preview svelte-1nidsbj")},m(e,r){(0,l.Yry)(e,t,r),a.m(t,null),(0,l.BCw)(t,n),(0,l.BCw)(t,s)},p(e,A){o===(o=i(e))&&a?a.p(e,A):(a.d(1),a=o(e),a&&(a.c(),a.m(t,n))),2&A[0]&&r!==(r=e[49].Title+"")&&(0,l.iQh)(s,r)},d(e){e&&(0,l.YoD)(t),a.d()}}}function K(e){let t,n,s,r;return{c(){t=(0,l.QQy)("svg")},m(i,o){(0,l.Yry)(i,t,o),s||(r=(0,l.hGc)(n=b.call(null,t,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),s=!0)},p(t,s){e=t,n&&(0,l.Qk1)(n.update)&&2&s[0]&&n.update.call(null,{iconName:`contenttype/${e[49].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),s=!1,r()}}}function L(e){let t,n,s;return{c(){t=(0,l.ND4)("img"),(0,l.mq_)(t.src,n=`${e[49].getURL}/@@images/image/thumb`)||(0,l.CFu)(t,"src",n),(0,l.CFu)(t,"alt",s=e[49].Title),(0,l.CFu)(t,"class","svelte-1nidsbj")},m(e,n){(0,l.Yry)(e,t,n)},p(e,r){2&r[0]&&!(0,l.mq_)(t.src,n=`${e[49].getURL}/@@images/image/thumb`)&&(0,l.CFu)(t,"src",n),2&r[0]&&s!==(s=e[49].Title)&&(0,l.CFu)(t,"alt",s)},d(e){e&&(0,l.YoD)(t)}}}function G(e){let t,n,s,r,i;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","browseSub svelte-1nidsbj")},m(e,o){(0,l.Yry)(e,t,o),(0,l.BCw)(t,n),r||(i=(0,l.hGc)(s=b.call(null,n,{iconName:"arrow-right-circle"})),r=!0)},d(e){e&&(0,l.YoD)(t),r=!1,i()}}}function W(e){let t,n,s,r,i,o,a;function A(e,t){return e[46].gridView?O:z}let c=A(e),u=c(e),d=e[49].is_folderish&&"browse"==e[6].mode&&G();function p(...t){return e[34](e[49],...t)}function m(...t){return e[35](e[49],...t)}return{c(){t=(0,l.ND4)("div"),u.c(),n=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class",s="contentItem"+(e[51]%2==0?" odd":" even")+(e[25](e[49])?" inPath":"")+(-1!=e[0].indexOf(e[49].UID)?" selectedItem":"")+(e[23](e[49])?"":" text-muted")+" svelte-1nidsbj"),(0,l.CFu)(t,"role","button"),(0,l.CFu)(t,"tabindex",r=e[51]),(0,l.CFu)(t,"data-uuid",i=e[49].UID)},m(e,s){(0,l.Yry)(e,t,s),u.m(t,null),(0,l.BCw)(t,n),d&&d.m(t,null),o||(a=[(0,l.KTR)(t,"keydown",(0,l.xZN)(p)),(0,l.KTR)(t,"click",m)],o=!0)},p(r,o){c===(c=A(e=r))&&u?u.p(e,o):(u.d(1),u=c(e),u&&(u.c(),u.m(t,n))),e[49].is_folderish&&"browse"==e[6].mode?d||(d=G(),d.c(),d.m(t,null)):d&&(d.d(1),d=null),3&o[0]&&s!==(s="contentItem"+(e[51]%2==0?" odd":" even")+(e[25](e[49])?" inPath":"")+(-1!=e[0].indexOf(e[49].UID)?" selectedItem":"")+(e[23](e[49])?"":" text-muted")+" svelte-1nidsbj")&&(0,l.CFu)(t,"class",s),2&o[0]&&i!==(i=e[49].UID)&&(0,l.CFu)(t,"data-uuid",i)},d(e){e&&(0,l.YoD)(t),u.d(),d&&d.d(),o=!1,(0,l.oOW)(a)}}}function J(e){let t,n,s,r,i,o,a;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),(0,l.CFu)(n,"class","spinner-border"),(0,l.CFu)(n,"role","status"),(0,l.CFu)(t,"class","loadmore svelte-1nidsbj"),(0,l.CFu)(t,"data-level-path",s=e[46].path),(0,l.CFu)(t,"data-level-next-page",r=parseInt(e[46].page)+1)},m(s,r){(0,l.Yry)(s,t,r),(0,l.BCw)(t,n),o||(a=(0,l.hGc)(i=e[27].call(null,t)),o=!0)},p(e,n){2&n[0]&&s!==(s=e[46].path)&&(0,l.CFu)(t,"data-level-path",s),2&n[0]&&r!==(r=parseInt(e[46].page)+1)&&(0,l.CFu)(t,"data-level-next-page",r)},d(e){e&&(0,l.YoD)(t),o=!1,a()}}}function V(e){let t,n;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("p"),n.textContent=`${(0,A.Ay)("no results found")}`,(0,l.CFu)(n,"class","svelte-1nidsbj"),(0,l.CFu)(t,"class","contentItem svelte-1nidsbj")},m(e,s){(0,l.Yry)(e,t,s),(0,l.BCw)(t,n)},d(e){e&&(0,l.YoD)(t)}}}function M(e,t){let n,s,r,i,o,A,c,u,d,p,m,b=0==t[48]&&q(t),v=t[46].selectable&&E(t);function C(e,t){return e[46].gridView?P:R}let f=C(t),h=f(t),g=(0,l.rv_)(t[46].results||[]),w=[];for(let e=0;e<g.length;e+=1)w[e]=W(k(t,g,e));let y=t[46].more&&J(t),x=0==t[46].total&&V();return{key:e,first:null,c(){n=(0,l.ND4)("div"),s=(0,l.ND4)("div"),b&&b.c(),r=(0,l.xem)(),v&&v.c(),i=(0,l.xem)(),o=(0,l.ND4)("div"),h.c(),A=(0,l.xem)(),c=(0,l.ND4)("div");for(let e=0;e<w.length;e+=1)w[e].c();u=(0,l.xem)(),y&&y.c(),d=(0,l.xem)(),x&&x.c(),(0,l.CFu)(o,"class","levelActions svelte-1nidsbj"),(0,l.CFu)(s,"class","levelToolbar svelte-1nidsbj"),(0,l.CFu)(c,"class","levelItems svelte-1nidsbj"),(0,l.CFu)(n,"class",p="levelColumn"+(t[48]%2==0?" odd":" even")+" svelte-1nidsbj"),this.first=n},m(e,t){(0,l.Yry)(e,n,t),(0,l.BCw)(n,s),b&&b.m(s,null),(0,l.BCw)(s,r),v&&v.m(s,null),(0,l.BCw)(s,i),(0,l.BCw)(s,o),h.m(o,null),(0,l.BCw)(n,A),(0,l.BCw)(n,c);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(c,null);(0,l.BCw)(c,u),y&&y.m(c,null),(0,l.BCw)(c,d),x&&x.m(c,null)},p(e,a){if(0==(t=e)[48]?b?b.p(t,a):(b=q(t),b.c(),b.m(s,r)):b&&(b.d(1),b=null),t[46].selectable?v?v.p(t,a):(v=E(t),v.c(),v.m(s,i)):v&&(v.d(1),v=null),f===(f=C(t))&&h?h.p(t,a):(h.d(1),h=f(t),h&&(h.c(),h.m(o,null))),42598467&a[0]){let e;for(g=(0,l.rv_)(t[46].results||[]),e=0;e<g.length;e+=1){const n=k(t,g,e);w[e]?w[e].p(n,a):(w[e]=W(n),w[e].c(),w[e].m(c,u))}for(;e<w.length;e+=1)w[e].d(1);w.length=g.length}t[46].more?y?y.p(t,a):(y=J(t),y.c(),y.m(c,d)):y&&(y.d(1),y=null),0==t[46].total?x||(x=V(),x.c(),x.m(c,null)):x&&(x.d(1),x=null),2&a[0]&&p!==(p="levelColumn"+(t[48]%2==0?" odd":" even")+" svelte-1nidsbj")&&(0,l.CFu)(n,"class",p)},i(e){e&&(m||(0,l.Dti)((()=>{m=(0,l.b7f)(n,a._J,{duration:300}),m.start()})))},o:l.lQ1,d(e){e&&(0,l.YoD)(n),b&&b.d(),v&&v.d(),h.d(),(0,l.ppq)(w,e),y&&y.d(),x&&x.d()}}}function Z(e){let t,n,s,r,i,o,a,c,u,d,p,m,b,v,C,f=(0,A.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"",h=e[5].Title+"",g=e[5].Description+"";function w(e,t){return e[5].getIcon?X:H}let y=w(e),x=y(e);return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),s=(0,l.ND4)("button"),r=(0,l.Qq7)(f),o=(0,l.xem)(),a=(0,l.ND4)("div"),x.c(),c=(0,l.xem)(),u=(0,l.ND4)("h4"),d=(0,l.Qq7)(h),p=(0,l.xem)(),m=(0,l.ND4)("p"),b=(0,l.Qq7)(g),(0,l.CFu)(s,"class","btn btn-primary btn-xs svelte-1nidsbj"),s.disabled=i=!e[23](e[5]),(0,l.CFu)(n,"class","levelToolbar svelte-1nidsbj"),(0,l.CFu)(u,"class","svelte-1nidsbj"),(0,l.CFu)(a,"class","info svelte-1nidsbj"),(0,l.CFu)(t,"class","preview svelte-1nidsbj")},m(i,A){(0,l.Yry)(i,t,A),(0,l.BCw)(t,n),(0,l.BCw)(n,s),(0,l.BCw)(s,r),(0,l.BCw)(t,o),(0,l.BCw)(t,a),x.m(a,null),(0,l.BCw)(a,c),(0,l.BCw)(a,u),(0,l.BCw)(u,d),(0,l.BCw)(a,p),(0,l.BCw)(a,m),(0,l.BCw)(m,b),v||(C=(0,l.KTR)(s,"click",(0,l.xZN)(e[36])),v=!0)},p(e,t){32&t[0]&&f!==(f=(0,A.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"")&&(0,l.iQh)(r,f),32&t[0]&&i!==(i=!e[23](e[5]))&&(s.disabled=i),y===(y=w(e))&&x?x.p(e,t):(x.d(1),x=y(e),x&&(x.c(),x.m(a,c))),32&t[0]&&h!==(h=e[5].Title+"")&&(0,l.iQh)(d,h),32&t[0]&&g!==(g=e[5].Description+"")&&(0,l.iQh)(b,g)},d(e){e&&(0,l.YoD)(t),x.d(),v=!1,C()}}}function H(e){let t,n,s,r,i;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(n,"class","svelte-1nidsbj"),(0,l.CFu)(t,"class","previewIcon svelte-1nidsbj")},m(o,a){(0,l.Yry)(o,t,a),(0,l.BCw)(t,n),r||(i=(0,l.hGc)(s=b.call(null,n,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),r=!0)},p(e,t){s&&(0,l.Qk1)(s.update)&&32&t[0]&&s.update.call(null,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),r=!1,i()}}}function X(e){let t,n,s,r;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("img"),(0,l.mq_)(n.src,s=e[5].getURL+"/@@images/image/preview")||(0,l.CFu)(n,"src",s),(0,l.CFu)(n,"alt",r=e[5].Title),(0,l.CFu)(n,"class","svelte-1nidsbj"),(0,l.CFu)(t,"class","previewImage")},m(e,s){(0,l.Yry)(e,t,s),(0,l.BCw)(t,n)},p(e,t){32&t[0]&&!(0,l.mq_)(n.src,s=e[5].getURL+"/@@images/image/preview")&&(0,l.CFu)(n,"src",s),32&t[0]&&r!==(r=e[5].Title)&&(0,l.CFu)(n,"alt",r)},d(e){e&&(0,l.YoD)(t)}}}function ee(e){let t,n,s,r,i,o,a,c,u;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),s=(0,l.ND4)("button"),s.textContent=`${(0,A.Ay)("add selected items")}`,r=(0,l.xem)(),i=(0,l.ND4)("div"),o=(0,l.QQy)("svg"),(0,l.CFu)(s,"class","btn btn-primary btn-xs svelte-1nidsbj"),(0,l.CFu)(n,"class","levelToolbar svelte-1nidsbj"),(0,l.CFu)(o,"class","svelte-1nidsbj"),(0,l.CFu)(i,"class","info svelte-1nidsbj"),(0,l.CFu)(t,"class","preview svelte-1nidsbj")},m(A,d){(0,l.Yry)(A,t,d),(0,l.BCw)(t,n),(0,l.BCw)(n,s),(0,l.BCw)(t,r),(0,l.BCw)(t,i),(0,l.BCw)(i,o),c||(u=[(0,l.KTR)(s,"click",(0,l.xZN)(e[21])),(0,l.hGc)(a=b.call(null,o,{iconName:"files"}))],c=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),c=!1,(0,l.oOW)(u)}}}function te(e){let t;return{c(){t=(0,l.ND4)("div"),(0,l.CFu)(t,"class","upload-wrapper svelte-1nidsbj")},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function ne(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,A.Ay)("loading content items")}`},m(e,n){(0,l.Yry)(e,t,n)},p:l.lQ1,d(e){e&&(0,l.YoD)(t)}}}function le(e){let t,n=e[3]&&U(e);return{c(){n&&n.c(),t=(0,l.Iex)()},m(e,s){n&&n.m(e,s),(0,l.Yry)(e,t,s)},p(e,s){e[3]?n?(n.p(e,s),8&s[0]&&(0,l.c7F)(n,1)):(n=U(e),n.c(),(0,l.c7F)(n,1),n.m(t.parentNode,t)):n&&((0,l.V44)(),(0,l.Tn8)(n,1,1,(()=>{n=null})),(0,l.GYV)())},i(e){(0,l.c7F)(n)},o(e){(0,l.Tn8)(n)},d(e){e&&(0,l.YoD)(t),n&&n.d(e)}}}function se(e,t,n){let s,a,A,u,d,p,b;o.ih({scrollX:!0,container:".levelColumns",duration:500});const v=(0,r.SD)("currentPath");(0,l.j0C)(e,v,(e=>n(2,A=e)));const f=(0,r.SD)("config");(0,l.j0C)(e,f,(e=>n(6,b=e)));const h=(0,r.SD)("pathCache"),g=(0,r.SD)("showContentBrowser");(0,l.j0C)(e,g,(e=>n(3,u=e)));const w=(0,r.SD)("selectedItems");(0,l.j0C)(e,w,(e=>n(41,p=e)));const y=(0,r.SD)("selectedUids");(0,l.j0C)(e,y,(e=>n(40,d=e)));const x=(0,r.SD)("previewUids");(0,l.j0C)(e,x,(e=>n(0,s=e)));const j=C(b,h);(0,l.j0C)(e,j,(e=>n(1,a=e)));let D=!1,B={},F=!1,T=!1,N=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function I({data:e=null,uuid:t=null,action:r="show"}){if(e&&"show"==r)n(5,B=e),(0,l.vu6)(x,s=[e.UID],s);else if(t&&"add"==r&&-1===s.indexOf(t)){if(b.maximumSelectionSize>0&&s.length>=b.maximumSelectionSize)return;(0,l.vu6)(x,s=[...s,t],s)}else t&&"remove"==r&&-1!==s.indexOf(t)?x.update((e=>(e.splice(e.indexOf(t),1),e))):"clear"==r&&(n(5,B={}),(0,l.vu6)(x,s=[],s))}function S(e,t){n(4,D=!1),I({action:"clear"}),"/"!==e?function(e){if("search"==b.mode)I({data:e});else if(e.is_folderish)v.set(e.path);else{const t=e.path.split("/"),n=t.slice(0,t.length-1).join("/");v.set(n||"/"),I({data:e})}E()}(e):v.set(e)}function Y(e,t){F||(F=!0);const n=t.currentTarget.closest(".levelItems"),l=n.querySelectorAll(".selectedItem");if(l.length)if(T||t?.shiftKey){let t=!1;for(const l of n.children){if(-1!==[e.UID,B.UID].indexOf(l.dataset.uuid)){if(t){I({uuid:l.dataset.uuid,action:"add"}),t=!1;continue}t=!0}I({uuid:l.dataset.uuid,action:t?"add":"remove"})}}else t?.metaKey||t?.ctrlKey?I({uuid:e.UID,action:-1==s.indexOf(e.UID)?"add":"remove"}):([...l].map((e=>e.classList.remove("selectedItem"))),S(e));else S(e);t.currentTarget.focus(),t.currentTarget.classList.add("selectedItem")}function k(){if(F)return;const e=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem"),document.querySelector(".levelColumn .contentItem")];e.length&&(F=!0,e[0].focus())}function U(e,t){const n=t.currentTarget;if(T=t.shiftKey,"Escape"==t.key&&$(),"ArrowDown"==t.key&&n?.nextElementSibling?.classList.contains("contentItem")&&n.nextElementSibling.click(),"ArrowUp"==t.key&&n?.previousElementSibling?.classList.contains("contentItem")&&n.previousElementSibling.click(),"ArrowRight"==t.key){const e=t.target.closest(".levelColumn"),n=e?.nextElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".contentItem")?.click()}if("ArrowLeft"==t.key){const e=t.target.closest(".levelColumn"),n=e?.previousElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".inPath").click()}"Space"==t.key&&Y(e,t),"Enter"==t.key&&q(e)&&Q()}async function _(e){w.update((t=>[...t,e])),y.update((()=>p.map((e=>e.UID)))),I({action:"clear"}),(0,l.vu6)(g,u=!1,u),F=!1}async function Q(){const e=await m(s,b);w.update((t=>{for(const n of e)-1==d.indexOf(n.UID)&&t.push(n);return t})),y.update((()=>p.map((e=>e.UID)))),I({action:"clear"}),(0,l.vu6)(g,u=!1,u),F=!1}function $(){(0,l.vu6)(g,u=!1,u),F=!1,I({action:"clear"})}function q(e){return-1===d.indexOf(e.UID)}function E(){const e=document.querySelector(".levelColumns");e&&o.VG({x:e.scrollWidth+100})}return e.$$.update=()=>{12&e.$$.dirty[0]&&u&&j.get({path:A}),2&e.$$.dirty[0]&&E(),e.$$.dirty[0]},[s,a,A,u,D,B,b,v,f,g,w,y,x,j,N,async function(){I({action:"clear"}),n(4,D=!0),await i.A.timeout(1);const e=document.querySelector(".upload-wrapper");e.classList.add("pat-upload"),new c.default(e,{baseUrl:b.base_url,currentPath:A,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(e,t)=>{j.get({path:A,updateCache:!0})}})},S,Y,k,U,_,Q,$,q,E,function(e){return-1!=A.indexOf(e.path)},function(){let e;e&&clearTimeout(e),e=setTimeout((()=>{j.get({path:A,searchTerm:this.value})}),300)},function(e){const t=new IntersectionObserver((t=>{for(const n of t)if(n.isIntersecting){const t=e.dataset.levelPath,n=parseInt(e.dataset.levelNextPage);j.get({loadMorePath:t,page:n})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{t.observe(e)}),500)},()=>$(),()=>S("/"),()=>S("/"),e=>_(e),(e,t,n)=>(0,l.vu6)(j,t[n].gridView=!0,a),(e,t,n)=>(0,l.vu6)(j,t[n].gridView=!1,a),(e,t)=>U(e,t),(e,t)=>Y(e,t),()=>_(B),()=>{E(),k()}]}class re extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,se,le,l.jXN,{},null,[-1,-1])}}var ie=re,oe=n(81557),ae=n(44423),Ae=n.n(ae),ce=n(4156),ue={};ue.styleTagTransform=N(),ue.setAttributes=D(),ue.insert=x(),ue.domAPI=w(),ue.insertStyleElement=F();h()(ce.A,ue),ce.A&&ce.A.locals&&ce.A.locals;function de(e,t,n){const l=e.slice();return l[19]=t[n],l[21]=n,l}function pe(e){let t,n=[],s=new Map,r=(0,l.rv_)(e[0]);const i=e=>e[19].UID;for(let t=0;t<r.length;t+=1){let l=de(e,r,t),o=i(l);s.set(o,n[t]=be(o,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=(0,l.Iex)()},m(e,s){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,s);(0,l.Yry)(e,t,s)},p(e,o){if(129&o){r=(0,l.rv_)(e[0]);for(let e=0;e<n.length;e+=1)n[e].r();n=(0,l.l7s)(n,o,i,1,e,r,s,t.parentNode,l.F8r,be,t,de);for(let e=0;e<n.length;e+=1)n[e].a()}},d(e){e&&(0,l.YoD)(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function me(e){let t,n,s;return{c(){t=(0,l.ND4)("img"),(0,l.mq_)(t.src,n=e[19].getURL+"/@@images/image/mini")||(0,l.CFu)(t,"src",n),(0,l.CFu)(t,"alt",s=e[19].Title),(0,l.CFu)(t,"class","svelte-bljrxf")},m(e,n){(0,l.Yry)(e,t,n)},p(e,r){1&r&&!(0,l.mq_)(t.src,n=e[19].getURL+"/@@images/image/mini")&&(0,l.CFu)(t,"src",n),1&r&&s!==(s=e[19].Title)&&(0,l.CFu)(t,"alt",s)},d(e){e&&(0,l.YoD)(t)}}}function be(e,t){let n,s,r,i,o,a,A,c,u,d,p,m,v,C,f,h,g,w,y,x=t[19].Title+"",j=t[19].path+"",D=l.lQ1;function B(){return t[9](t[21])}let F=t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)&&me(t);return{key:e,first:null,c(){n=(0,l.ND4)("div"),s=(0,l.ND4)("div"),r=(0,l.ND4)("button"),i=(0,l.QQy)("svg"),a=(0,l.xem)(),A=(0,l.ND4)("div"),c=(0,l.ND4)("span"),u=(0,l.Qq7)(x),d=(0,l.ND4)("br"),p=(0,l.xem)(),m=(0,l.ND4)("span"),v=(0,l.Qq7)(j),C=(0,l.xem)(),F&&F.c(),f=(0,l.xem)(),(0,l.CFu)(r,"class","btn btn-link btn-sm link-secondary svelte-bljrxf"),(0,l.CFu)(c,"class","item-title"),(0,l.CFu)(m,"class","small"),(0,l.CFu)(s,"class","item-info svelte-bljrxf"),(0,l.CFu)(n,"class","selected-item svelte-bljrxf"),(0,l.CFu)(n,"data-uuid",h=t[19].UID),this.first=n},m(e,t){(0,l.Yry)(e,n,t),(0,l.BCw)(n,s),(0,l.BCw)(s,r),(0,l.BCw)(r,i),(0,l.BCw)(s,a),(0,l.BCw)(s,A),(0,l.BCw)(A,c),(0,l.BCw)(c,u),(0,l.BCw)(A,d),(0,l.BCw)(A,p),(0,l.BCw)(A,m),(0,l.BCw)(m,v),(0,l.BCw)(n,C),F&&F.m(n,null),(0,l.BCw)(n,f),w||(y=[(0,l.hGc)(o=b.call(null,i,{iconName:"x-circle"})),(0,l.KTR)(r,"click",B)],w=!0)},p(e,s){t=e,1&s&&x!==(x=t[19].Title+"")&&(0,l.iQh)(u,x),1&s&&j!==(j=t[19].path+"")&&(0,l.iQh)(v,j),t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)?F?F.p(t,s):(F=me(t),F.c(),F.m(n,f)):F&&(F.d(1),F=null),1&s&&h!==(h=t[19].UID)&&(0,l.CFu)(n,"data-uuid",h)},r(){g=n.getBoundingClientRect()},f(){(0,l.K$G)(n),D()},a(){D(),D=(0,l.qYc)(n,g,oe.U,{duration:500})},d(e){e&&(0,l.YoD)(n),F&&F.d(),w=!1,(0,l.oOW)(y)}}}function ve(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,A.Ay)("loading selected items")}`},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function Ce(e){let t,n,s,r,i,o,a,c,u,d=(0,A.Ay)("Select")+"",p=e[0]&&pe(e),m=!e[0]&&ve();return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),p&&p.c(),s=(0,l.xem)(),m&&m.c(),r=(0,l.xem)(),i=(0,l.ND4)("button"),o=(0,l.Qq7)(d),(0,l.CFu)(n,"class","content-browser-selected-items svelte-bljrxf"),(0,l.CFu)(i,"class","btn btn-primary"),(0,l.hgi)(i,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),i.disabled=a=e[2].maximumSelectionSize>0&&(e[0].length||0)>=e[2].maximumSelectionSize,(0,l.CFu)(t,"class","content-browser-selected-items-wrapper svelte-bljrxf")},m(a,A){(0,l.Yry)(a,t,A),(0,l.BCw)(t,n),p&&p.m(n,null),(0,l.BCw)(n,s),m&&m.m(n,null),(0,l.BCw)(t,r),(0,l.BCw)(t,i),(0,l.BCw)(i,o),e[11](t),c||(u=(0,l.KTR)(i,"click",(0,l.xZN)(e[10])),c=!0)},p(e,[t]){e[0]?p?p.p(e,t):(p=pe(e),p.c(),p.m(n,s)):p&&(p.d(1),p=null),e[0]?m&&(m.d(1),m=null):m||(m=ve(),m.c(),m.m(n,null)),5&t&&a!==(a=e[2].maximumSelectionSize>0&&(e[0].length||0)>=e[2].maximumSelectionSize)&&(i.disabled=a)},i:l.lQ1,o:l.lQ1,d(n){n&&(0,l.YoD)(t),p&&p.d(),m&&m.d(),e[11](null),c=!1,u()}}}function fe(e,t,n){let s,i,o,a,A=!0;const c=(0,r.SD)("config");(0,l.j0C)(e,c,(e=>n(2,i=e)));const u=i.fieldId,d=document.getElementById(u),p=(0,r.SD)("selectedItems");(0,l.j0C)(e,p,(e=>n(0,s=e)));const b=(0,r.SD)("selectedUids"),v=(0,r.SD)("showContentBrowser");function C(e){p.update((t=>(t.splice(e,1),t))),b.update((()=>s.map((e=>e.UID))))}function f(){1!==i.maximumSelectionSize&&s.length>1&&Ae().create(d.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:e=>{let t=[];for(const n of e.target.children)t.push(n.dataset.uuid);h(t)}})}function h(e){const t=e.join(i.separator);d.value=t}(0,l.j0C)(e,v,(e=>n(3,o=e))),(0,r.Rc)((async()=>{await async function(){const e=i.selection.length?i.selection:d?.value?d.value.split(i.separator):[];if(!e.length)return;const t=await m(e,i);(0,l.vu6)(p,s=t,s),b.update((()=>t.map((e=>e.UID))))}(),f(),n(8,A=!1)}));return e.$$.update=()=>{257&e.$$.dirty&&(!s.length&&A||(h(function(){let e=[];return s.forEach((t=>{e.push(t.UID)})),e}()),f(),function(e,t){const n=new CustomEvent(e,{detail:{content:t},bubbles:!0});document.dispatchEvent(n)}("updateSelection",b)))},[s,a,i,o,c,p,v,C,A,e=>C(e),()=>(0,l.vu6)(v,o=!0,o),function(e){l.Dnk[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class he extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,fe,Ce,l.jXN,{})}}var ge=he;(0,u.T5)(!1);function we(e){let t,n,s,r;return t=new ie({}),s=new ge({}),{c(){(0,l.N0i)(t.$$.fragment),n=(0,l.xem)(),(0,l.N0i)(s.$$.fragment)},m(e,i){(0,l.wSR)(t,e,i),(0,l.Yry)(e,n,i),(0,l.wSR)(s,e,i),r=!0},p:l.lQ1,i(e){r||((0,l.c7F)(t.$$.fragment,e),(0,l.c7F)(s.$$.fragment,e),r=!0)},o(e){(0,l.Tn8)(t.$$.fragment,e),(0,l.Tn8)(s.$$.fragment,e),r=!1},d(e){e&&(0,l.YoD)(n),(0,l.Hbl)(t,e),(0,l.Hbl)(s,e)}}}function ye(e,t,n){let i,o,{maxDepth:a}=t,{attributes:A}=t,{contextPath:c}=t,{vocabularyUrl:d}=t,{mode:p="browse"}=t,{basePath:m=""}=t,{selectableTypes:b=[]}=t,{maximumSelectionSize:v=-1}=t,{separator:C}=t,{selection:f=[]}=t,{query:h={}}=t,{fieldId:g}=t,{upload:w}=t,{favorites:y}=t,{recentlyUsed:x}=t,{recentlyUsedKey:j}=t,{bSize:D=20}=t;const B=s.A.getLogger("pat-contentbrowser");!function(){let e=(0,u.T5)("");(0,r.o)("currentPath",e)}(),function(){let e=(0,u.T5)({});(0,r.o)("config",e)}(),function(){let e=(0,u.T5)({});(0,r.o)("pathCache",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("selectedItems",e)}(),function(){let e=(0,u.T5)(!1);(0,r.o)("showContentBrowser",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("selectedUids",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("previewUids",e)}();const F=(0,r.SD)("currentPath");(0,l.j0C)(e,F,(e=>n(20,o=e))),o||(0,l.vu6)(F,o=m||"/",o);const T=document.body.getAttribute("data-portal-url");let N=(0,r.SD)("config");return(0,l.j0C)(e,N,(e=>n(19,i=e))),(0,l.vu6)(N,i={mode:p,attributes:A,contextPath:c,vocabularyUrl:d,maxDepth:a,basePath:m,selectableTypes:b,maximumSelectionSize:v,separator:C,selection:f,query:h,fieldId:g,uploadEnabled:w,favorites:y,recentlyUsed:x,recentlyUsedKey:j,base_url:T,pageSize:D},i),B.debug(`Initialized App<${g}> with config ${JSON.stringify(i)}`),e.$$set=e=>{"maxDepth"in e&&n(2,a=e.maxDepth),"attributes"in e&&n(3,A=e.attributes),"contextPath"in e&&n(4,c=e.contextPath),"vocabularyUrl"in e&&n(5,d=e.vocabularyUrl),"mode"in e&&n(6,p=e.mode),"basePath"in e&&n(7,m=e.basePath),"selectableTypes"in e&&n(8,b=e.selectableTypes),"maximumSelectionSize"in e&&n(9,v=e.maximumSelectionSize),"separator"in e&&n(10,C=e.separator),"selection"in e&&n(11,f=e.selection),"query"in e&&n(12,h=e.query),"fieldId"in e&&n(13,g=e.fieldId),"upload"in e&&n(14,w=e.upload),"favorites"in e&&n(15,y=e.favorites),"recentlyUsed"in e&&n(16,x=e.recentlyUsed),"recentlyUsedKey"in e&&n(17,j=e.recentlyUsedKey),"bSize"in e&&n(18,D=e.bSize)},[F,N,a,A,c,d,p,m,b,v,C,f,h,g,w,y,x,j,D]}class xe extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,ye,we,l.jXN,{maxDepth:2,attributes:3,contextPath:4,vocabularyUrl:5,mode:6,basePath:7,selectableTypes:8,maximumSelectionSize:9,separator:10,selection:11,query:12,fieldId:13,upload:14,favorites:15,recentlyUsed:16,recentlyUsedKey:17,bSize:18})}}var je=xe}}]);
//# sourceMappingURL=28469.ef653acaa1f4623b3547.min.js.map