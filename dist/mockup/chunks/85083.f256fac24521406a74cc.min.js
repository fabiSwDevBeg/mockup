"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[85083],{3831:function(e,t,l){l.d(t,{EO:function(){return o},Em:function(){return r},gf:function(){return i},qz:function(){return c},r1:function(){return a},x6:function(){return s}});var n=l(49264);async function r(e){let{method:t="GET",vocabularyUrl:l=null,attributes:n=[],path:r=null,uids:s=null,searchTerm:c=null,searchPath:o=null,levelInfoPath:i=null,selectableTypes:a=[],pageSize:u=100,page:A=1}=e,p={criteria:[]};if(r&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${r}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),i&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${i}::0`}]}),o&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:o}]},a&&p.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:a})),s&&(p={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:s}]}),c&&p.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${c}`}),!p.criteria.length)return{results:[],total:0};let d=`${l}&query=${JSON.stringify(p)}&attributes=${JSON.stringify(n)}&batch=${JSON.stringify({page:A,size:u})}`,m=new Headers;m.set("Accept","application/json");const b=await fetch(d,{method:t,headers:m}),v=await b.json();if(b.ok){if(!o&&!i&&a.length){const e={results:[],total:v.total};for(const t of v.results)(-1!=a.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return v}return{results:[],total:0,errors:v.errors}}async function s(e,t){if(!e)return[];const l=await r({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let n=await(l?.results)||[];return n.sort(((t,l)=>e.indexOf(t.UID)-e.indexOf(l.UID))),n}async function c(e,t){let{iconName:l}=t;const r=await async function(e){return await n.A.resolveIcon(e)}(l);return e.outerHTML=r,{destroy(){}}}function o(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function i(e,t){let l=n.A.storage.get(t.recentlyUsedKey)||[];l=l.slice(l.length-1e3,l.length),e&&t?.selectableTypes.length&&(l=l.filter((e=>-1!=t.selectableTypes.indexOf(e.portal_type))));const r=parseInt(t.recentlyUsedMaxItems,10);return r&&(l=l.slice(l.length-r,l.length)),l}function a(e,t){if(!t.recentlyUsed)return;const l=i(!1,t),r=l.filter((t=>t.UID===e.UID));r.length>0&&l.splice(l.indexOf(r[0]),1),l.push(e),n.A.storage.set(t.recentlyUsedKey,l)}},24433:function(e,t,l){var n=l(71354),r=l.n(n),s=l(76314),c=l.n(s)()(r());c.push([e.id,".content-browser-position-wrapper.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-1lcbp2k svg{vertical-align:-0.125em}.levelColumns.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-1lcbp2k>.levelActions.svelte-1lcbp2k.svelte-1lcbp2k{margin-left:auto}.levelItems.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{overflow-x:auto}.contentItem.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k:focus-visible{outline:none}.contentItem.even.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k,.contentItem.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-1lcbp2k>.svelte-1lcbp2k.svelte-1lcbp2k{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-1lcbp2k>.browseSub.svelte-1lcbp2k.svelte-1lcbp2k{flex-shrink:0}.contentItem.svelte-1lcbp2k .grid-preview.svelte-1lcbp2k>img.svelte-1lcbp2k{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-1lcbp2k .info.svelte-1lcbp2k.svelte-1lcbp2k{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-1lcbp2k .info .previewIcon.svelte-1lcbp2k.svelte-1lcbp2k{margin:0 auto 1rem auto}.preview.svelte-1lcbp2k .info .previewIcon svg.svelte-1lcbp2k.svelte-1lcbp2k{width:50px !important;height:50px !important}.preview.svelte-1lcbp2k h4.svelte-1lcbp2k.svelte-1lcbp2k{font-size:1.2 rem}.preview.svelte-1lcbp2k img.svelte-1lcbp2k.svelte-1lcbp2k{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-1lcbp2k.svelte-1lcbp2k.svelte-1lcbp2k{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,+EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,qDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,8DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,sDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,4BAAA,uBAAA,CAAA,2DAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,0DAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,2DAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,yEAAA,gBAAA,CAAA,yDAAA,eAAA,CAAA,0DAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,wEAAA,YAAA,CAAA,+DAAA,sDAAA,CAAA,iIAAA,kDAAA,CAAA,uEAAA,kCAAA,CAAA,uBAAA,CAAA,2DAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,qEAAA,aAAA,CAAA,4EAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,sDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,4DAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,yEAAA,uBAAA,CAAA,6EAAA,qBAAA,CAAA,sBAAA,CAAA,yDAAA,iBAAA,CAAA,0DAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,6DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,uDAAA,iBAAA,CAAA,gBAAA",sourceRoot:""}]),t.A=c},19394:function(e,t,l){var n=l(71354),r=l.n(n),s=l(76314),c=l.n(s)()(r());c.push([e.id,".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA",sourceRoot:""}]),t.A=c},85083:function(e,t,l){l.r(t),l.d(t,{default:function(){return qe}});var n=l(43467),r=(l(2531),l(23505)),s=l(41949),c=l(8633),o=l(78836),i=l(95669),a=l(61751),u=l(8936),A=l(54603),p=l(3831);function d(e,t){const l=(0,A.T5)([]),n=async t=>(t={...{vocabularyUrl:e.vocabularyUrl,attributes:e.attributes,pageSize:e.pageSize},...t},e.selectableTypes.length&&(t.selectableTypes=e.selectableTypes),await(0,p.Em)(t));return l.get=async r=>{let{path:s="",searchTerm:c="",updateCache:o=!1,loadMorePath:i="",page:a=1}=r;const u=new URL(e.base_url).pathname;if("search"===e.mode)await(async(t,r,s)=>{let c={searchPath:t,page:s};r&&(c.searchTerm="*"+r+"*");let o=await n(c);o.page=s,o.searchTerm=r,l.update((t=>{const l=s*e.pageSize<o.total;return 0==t.length||t[0].searchTerm!=r?(o.more=l,o.selectable=!1,o.gridView=!1,[o]):(t[0].more=l,t[0].page=o.page,t[0].results=[...t[0].results,...o.results],t)}))})(u,c,a);else if(i){const r=(0,A.Jt)(t);if(!(i in r))return;let s=r[i];a>s.page&&await(async(t,r,s)=>{let c={path:t,page:r};s&&(c.searchTerm="*"+s+"*");let o=await n(c);o.more=r*e.pageSize<o.total,o.page=r,l.update((e=>(e.forEach((e=>{if(e.path!=t)return e;e.page=o.page,e.more=o.more,e.results=[...e.results,...o.results]})),e)))})(i,a,s.searchTerm)}else s&&(s=s.replace(new RegExp(`^${u}`),""),await(async(r,s,c,o)=>{let i=[],a=s.split("/")||[];const u=a.length>=e.maxDepth?e.maxDepth:a.length;let p=a.slice(a.length-u,a.length);const d=r+a.slice(0,a.length-u).join("/"),m=(0,A.Jt)(t);for(;p.length>0;){let e=p.join("/").replace(/^\//,"");e=d+(""!=p.pop()?`/${e}`:""),-1===i.indexOf(e)&&i.push(e)}let b=[],v=0;for(var f of i){v++;const l=1==v;let s={};if(!(f in m)||l&&c||o){let o={path:f};if(l&&c&&(o.searchTerm="*"+c+"*"),s=await n(o),s.more=e.pageSize<s.total,s.searchTerm=c,s.page=1,s.path=f,s.absPath=f.replace(r,""),!c){const l=await n({levelInfoPath:f});l.total&&(s.UID=l.results[0].UID,s.Title=l.results[0].Title,s.portal_type=l.results[0].portal_type,s.getIcon=l.results[0].getIcon,s.selectable=!e.selectableTypes.length||-1!=e.selectableTypes.indexOf(l.results[0].portal_type)),s.gridView=!1,t.update((e=>(e[f]=s,e)))}}else s=m[f];b=[s,...b]}l.set(b)})(u,s,c,o))},l}function m(e,t,l){const n=e.slice();return n[5]=t[l],n}function b(e){let t,l,r,s,c,o,i,u,A,d,b=(0,a.Ay)("Favorites")+"",f=(0,n.rv_)(e[0].favorites),h=[];for(let t=0;t<f.length;t+=1)h[t]=v(m(e,f,t));return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("button"),r=(0,n.QQy)("svg"),c=(0,n.xem)(),o=(0,n.Qq7)(b),i=(0,n.xem)(),u=(0,n.ND4)("ul");for(let e=0;e<h.length;e+=1)h[e].c();(0,n.CFu)(l,"type","button"),(0,n.CFu)(l,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,n.CFu)(l,"data-bs-toggle","dropdown"),(0,n.CFu)(l,"aria-haspopup","true"),(0,n.CFu)(l,"aria-expanded","false"),(0,n.CFu)(u,"class","dropdown-menu"),(0,n.CFu)(t,"class","favorites dropdown dropdown-menu-end ms-2")},m(e,a){(0,n.Yry)(e,t,a),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(l,c),(0,n.BCw)(l,o),(0,n.BCw)(t,i),(0,n.BCw)(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);A||(d=(0,n.hGc)(s=p.qz.call(null,r,{iconName:"star-fill"})),A=!0)},p(e,t){if(5&t){let l;for(f=(0,n.rv_)(e[0].favorites),l=0;l<f.length;l+=1){const n=m(e,f,l);h[l]?h[l].p(n,t):(h[l]=v(n),h[l].c(),h[l].m(u,null))}for(;l<h.length;l+=1)h[l].d(1);h.length=f.length}},d(e){e&&(0,n.YoD)(t),(0,n.ppq)(h,e),A=!1,d()}}}function v(e){let t,l,r,s,c,o,i,a=e[5].title+"";function u(){return e[3](e[5])}return{c(){t=(0,n.ND4)("li"),l=(0,n.ND4)("a"),r=(0,n.Qq7)(a),c=(0,n.xem)(),(0,n.CFu)(l,"class","dropdown-item"),(0,n.CFu)(l,"href",s=e[5].path)},m(e,s){(0,n.Yry)(e,t,s),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(t,c),o||(i=(0,n.KTR)(l,"click",(0,n.xZN)(u)),o=!0)},p(t,c){e=t,1&c&&a!==(a=e[5].title+"")&&(0,n.iQh)(r,a),1&c&&s!==(s=e[5].path)&&(0,n.CFu)(l,"href",s)},d(e){e&&(0,n.YoD)(t),o=!1,i()}}}function f(e){let t,l=e[0]?.favorites&&b(e);return{c(){l&&l.c(),t=(0,n.Iex)()},m(e,r){l&&l.m(e,r),(0,n.Yry)(e,t,r)},p(e,[n]){e[0]?.favorites?l?l.p(e,n):(l=b(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:n.lQ1,o:n.lQ1,d(e){e&&(0,n.YoD)(t),l&&l.d(e)}}}function h(e,t,l){let r;const c=(0,s.SD)("config");(0,n.j0C)(e,c,(e=>l(0,r=e)));const o=(0,s.ur)();function i(e){o("selectItem",{item:e})}return[r,c,i,e=>i(e)]}class C extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,h,f,n.jXN,{})}}var g=C;function w(e,t,l){const n=e.slice();return n[6]=t[l],n}function y(e){let t,l,r,s,c,o,i,u,A,d,m=(0,a.Ay)("Recently Used")+"",b=(0,n.rv_)(e[2].reverse()),v=[];for(let t=0;t<b.length;t+=1)v[t]=k(w(e,b,t));return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("button"),r=(0,n.QQy)("svg"),c=(0,n.xem)(),o=(0,n.Qq7)(m),i=(0,n.xem)(),u=(0,n.ND4)("ul");for(let e=0;e<v.length;e+=1)v[e].c();(0,n.CFu)(l,"type","button"),(0,n.CFu)(l,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,n.CFu)(l,"data-bs-toggle","dropdown"),(0,n.CFu)(l,"aria-haspopup","true"),(0,n.CFu)(l,"aria-expanded","false"),(0,n.CFu)(u,"class","dropdown-menu"),(0,n.CFu)(t,"class","recentlyUsed dropdown ms-2")},m(e,a){(0,n.Yry)(e,t,a),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(l,c),(0,n.BCw)(l,o),(0,n.BCw)(t,i),(0,n.BCw)(t,u);for(let e=0;e<v.length;e+=1)v[e]&&v[e].m(u,null);A||(d=(0,n.hGc)(s=p.qz.call(null,r,{iconName:"grid-fill"})),A=!0)},p(e,t){if(12&t){let l;for(b=(0,n.rv_)(e[2].reverse()),l=0;l<b.length;l+=1){const n=w(e,b,l);v[l]?v[l].p(n,t):(v[l]=k(n),v[l].c(),v[l].m(u,null))}for(;l<v.length;l+=1)v[l].d(1);v.length=b.length}},d(e){e&&(0,n.YoD)(t),(0,n.ppq)(v,e),A=!1,d()}}}function k(e){let t,l,r,s,c,o,i,a,u,A,d=e[6].Title+"";function m(){return e[4](e[6])}return{c(){t=(0,n.ND4)("li"),l=(0,n.ND4)("a"),r=(0,n.QQy)("svg"),c=(0,n.xem)(),o=(0,n.Qq7)(d),a=(0,n.xem)(),(0,n.CFu)(l,"href",i=e[6].getURL||"#"),(0,n.CFu)(l,"class","dropdown-item")},m(i,d){(0,n.Yry)(i,t,d),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(l,c),(0,n.BCw)(l,o),(0,n.BCw)(t,a),u||(A=[(0,n.KTR)(r,"error",console.log(e[6])),(0,n.hGc)(s=p.qz.call(null,r,{iconName:`contenttype/${e[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,n.KTR)(l,"click",(0,n.xZN)(m))],u=!0)},p(t,l){e=t},d(e){e&&(0,n.YoD)(t),u=!1,(0,n.oOW)(A)}}}function x(e){let t,l=e[0].recentlyUsed&&e[2].length&&y(e);return{c(){l&&l.c(),t=(0,n.Iex)()},m(e,r){l&&l.m(e,r),(0,n.Yry)(e,t,r)},p(e,[n]){e[0].recentlyUsed&&e[2].length?l?l.p(e,n):(l=y(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:n.lQ1,o:n.lQ1,d(e){e&&(0,n.YoD)(t),l&&l.d(e)}}}function D(e,t,l){let r;const c=(0,s.SD)("config");(0,n.j0C)(e,c,(e=>l(0,r=e)));const o=(0,p.gf)(!0,r),i=(0,s.ur)();function a(e){i("selectItem",{item:e})}return[r,c,o,a,e=>a(e)]}class B extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,D,x,n.jXN,{})}}var N=B,F=l(85072),I=l.n(F),T=l(97825),Y=l.n(T),U=l(57722),$=l.n(U),S=l(55056),q=l.n(S),_=l(10540),Q=l.n(_),z=l(41113),E=l.n(z),P=l(24433),R={};R.styleTagTransform=E(),R.setAttributes=q(),R.insert=$(),R.domAPI=Y(),R.insertStyleElement=Q();I()(P.A,R),P.A&&P.A.locals&&P.A.locals;function O(e,t,l){const n=e.slice();return n[48]=t[l],n[49]=t,n[50]=l,n}function j(e,t,l){const n=e.slice();return n[51]=t[l],n[53]=l,n}function K(e){let t,l,r,s,c,o,a,u,A,d,m,b,v,f,h,C,w,y,k,x,D,B,F,I,T;m=new N({}),m.$on("selectItem",e[22]),v=new g({}),v.$on("selectItem",e[23]);let Y=e[6].uploadEnabled&&L(e),U={ctx:e,current:null,token:null,hasCatch:!0,pending:pe,then:W,catch:G,value:47,error:54};return(0,n.vBd)(x=e[1],U),{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("nav"),r=(0,n.ND4)("div"),s=(0,n.ND4)("div"),c=(0,n.ND4)("input"),o=(0,n.xem)(),a=(0,n.ND4)("label"),u=(0,n.QQy)("svg"),d=(0,n.xem)(),(0,n.N0i)(m.$$.fragment),b=(0,n.xem)(),(0,n.N0i)(v.$$.fragment),f=(0,n.xem)(),Y&&Y.c(),h=(0,n.xem)(),C=(0,n.ND4)("button"),w=(0,n.QQy)("svg"),k=(0,n.xem)(),U.block.c(),(0,n.CFu)(c,"type","text"),(0,n.CFu)(c,"name","filter"),(0,n.CFu)(a,"for","filter"),(0,n.CFu)(s,"class","filter me-3"),(0,n.CFu)(C,"class","btn btn-link text-white ms-auto"),(0,n.CFu)(C,"tabindex","0"),(0,n.CFu)(r,"class","toolBar navbar svelte-1lcbp2k"),(0,n.CFu)(l,"class","content-browser svelte-1lcbp2k"),(0,n.CFu)(t,"class","content-browser-position-wrapper svelte-1lcbp2k")},m(i,g){(0,n.Yry)(i,t,g),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(r,s),(0,n.BCw)(s,c),(0,n.BCw)(s,o),(0,n.BCw)(s,a),(0,n.BCw)(a,u),(0,n.BCw)(r,d),(0,n.wSR)(m,r,null),(0,n.BCw)(r,b),(0,n.wSR)(v,r,null),(0,n.BCw)(r,f),Y&&Y.m(r,null),(0,n.BCw)(r,h),(0,n.BCw)(r,C),(0,n.BCw)(C,w),(0,n.BCw)(l,k),U.block.m(l,U.anchor=null),U.mount=()=>l,U.anchor=null,F=!0,I||(T=[(0,n.KTR)(c,"input",e[28]),(0,n.hGc)(A=p.qz.call(null,u,{iconName:"search"})),(0,n.hGc)(y=p.qz.call(null,w,{iconName:"x-circle"})),(0,n.KTR)(C,"click",(0,n.xZN)(e[30])),(0,n.KTR)(l,"introend",e[39]),(0,n.hGc)(D=p.EO.call(null,l)),(0,n.KTR)(l,"click_outside",e[24])],I=!0)},p(t,l){(e=t)[6].uploadEnabled?Y?Y.p(e,l):(Y=L(e),Y.c(),Y.m(r,h)):Y&&(Y.d(1),Y=null),U.ctx=e,2&l[0]&&x!==(x=e[1])&&(0,n.vBd)(x,U)||(0,n._6B)(U,e,l)},i(t){F||((0,n.c7F)(m.$$.fragment,t),(0,n.c7F)(v.$$.fragment,t),t&&(0,n.Dti)((()=>{F&&(B||(B=(0,n.h86)(l,i._J,{x:e[14]/100*94,opacity:1},!0)),B.run(1))})),F=!0)},o(t){(0,n.Tn8)(m.$$.fragment,t),(0,n.Tn8)(v.$$.fragment,t),t&&(B||(B=(0,n.h86)(l,i._J,{x:e[14]/100*94,opacity:1},!1)),B.run(0)),F=!1},d(e){e&&(0,n.YoD)(t),(0,n.Hbl)(m),(0,n.Hbl)(v),Y&&Y.d(),U.block.d(),U.token=null,U=null,e&&B&&B.end(),I=!1,(0,n.oOW)(T)}}}function L(e){let t,l,r,s,c,o,i,u,A=(0,a.Ay)("upload to ${current_path}",{current_path:e[2]})+"";return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("button"),r=(0,n.QQy)("svg"),c=(0,n.xem)(),o=(0,n.Qq7)(A),(0,n.CFu)(l,"type","button"),(0,n.CFu)(l,"class","upload btn btn-outline-light btn-sm"),(0,n.CFu)(l,"tabindex","0"),(0,n.CFu)(t,"class","ms-2")},m(a,A){(0,n.Yry)(a,t,A),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(l,c),(0,n.BCw)(l,o),i||(u=[(0,n.hGc)(s=p.qz.call(null,r,{iconName:"upload"})),(0,n.KTR)(l,"keydown",e[15]),(0,n.KTR)(l,"click",e[15])],i=!0)},p(e,t){4&t[0]&&A!==(A=(0,a.Ay)("upload to ${current_path}",{current_path:e[2]})+"")&&(0,n.iQh)(o,A)},d(e){e&&(0,n.YoD)(t),i=!1,(0,n.oOW)(u)}}}function G(e){let t,l,r=e[54].message+"";return{c(){t=(0,n.ND4)("p"),l=(0,n.Qq7)(r),(0,n.hgi)(t,"color","red")},m(e,r){(0,n.Yry)(e,t,r),(0,n.BCw)(t,l)},p(e,t){2&t[0]&&r!==(r=e[54].message+"")&&(0,n.iQh)(l,r)},d(e){e&&(0,n.YoD)(t)}}}function W(e){let t,l,r,s,c=[],o=new Map,i=(0,n.rv_)(e[47]);const a=e=>e[48].path;for(let t=0;t<i.length;t+=1){let l=O(e,i,t),n=a(l);o.set(n,c[t]=ce(n,l))}let u=e[5]?.UID&&1==e[0].length&&oe(e),A=e[0].length>1&&ue(e),p=e[4]&&Ae(e);return{c(){t=(0,n.ND4)("div");for(let e=0;e<c.length;e+=1)c[e].c();l=(0,n.xem)(),u&&u.c(),r=(0,n.xem)(),A&&A.c(),s=(0,n.xem)(),p&&p.c(),(0,n.CFu)(t,"class","levelColumns svelte-1lcbp2k")},m(e,o){(0,n.Yry)(e,t,o);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(t,null);(0,n.BCw)(t,l),u&&u.m(t,null),(0,n.BCw)(t,r),A&&A.m(t,null),(0,n.BCw)(t,s),p&&p.m(t,null)},p(e,d){169541699&d[0]&&(i=(0,n.rv_)(e[47]),c=(0,n.l7s)(c,d,a,1,e,i,o,t,n.n_k,ce,l,O)),e[5]?.UID&&1==e[0].length?u?u.p(e,d):(u=oe(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[0].length>1?A?A.p(e,d):(A=ue(e),A.c(),A.m(t,s)):A&&(A.d(1),A=null),e[4]?p||(p=Ae(e),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},d(e){e&&(0,n.YoD)(t);for(let e=0;e<c.length;e+=1)c[e].d();u&&u.d(),A&&A.d(),p&&p.d()}}}function V(e){let t,l,r,s,c;return{c(){t=(0,n.ND4)("button"),l=(0,n.QQy)("svg"),(0,n.CFu)(t,"type","button"),(0,n.CFu)(t,"class","btn btn-link btn-xs ps-0 svelte-1lcbp2k"),(0,n.CFu)(t,"tabindex","0")},m(o,i){(0,n.Yry)(o,t,i),(0,n.BCw)(t,l),s||(c=[(0,n.hGc)(r=p.qz.call(null,l,{iconName:"house"})),(0,n.KTR)(t,"keydown",e[31]),(0,n.KTR)(t,"click",e[32])],s=!0)},p:n.lQ1,d(e){e&&(0,n.YoD)(t),s=!1,(0,n.oOW)(c)}}}function M(e){let t,l,r,s,c,o=(0,a.Ay)("select ${level_path}",{level_path:e[48].absPath||"/"})+"";function i(){return e[33](e[48])}return{c(){t=(0,n.ND4)("button"),l=(0,n.Qq7)(o),(0,n.CFu)(t,"class","btn btn-primary btn-xs svelte-1lcbp2k"),t.disabled=r=!e[25](e[48])},m(e,r){(0,n.Yry)(e,t,r),(0,n.BCw)(t,l),s||(c=(0,n.KTR)(t,"click",(0,n.xZN)(i)),s=!0)},p(s,c){e=s,2&c[0]&&o!==(o=(0,a.Ay)("select ${level_path}",{level_path:e[48].absPath||"/"})+"")&&(0,n.iQh)(l,o),2&c[0]&&r!==(r=!e[25](e[48]))&&(t.disabled=r)},d(e){e&&(0,n.YoD)(t),s=!1,c()}}}function J(e){let t,l,r,s,c;function o(){return e[35](e[48],e[49],e[50])}return{c(){t=(0,n.ND4)("button"),l=(0,n.QQy)("svg"),(0,n.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1lcbp2k")},m(e,i){(0,n.Yry)(e,t,i),(0,n.BCw)(t,l),s||(c=[(0,n.hGc)(r=p.qz.call(null,l,{iconName:"list"})),(0,n.KTR)(t,"click",o)],s=!0)},p(t,l){e=t},d(e){e&&(0,n.YoD)(t),s=!1,(0,n.oOW)(c)}}}function H(e){let t,l,r,s,c;function o(){return e[34](e[48],e[49],e[50])}return{c(){t=(0,n.ND4)("button"),l=(0,n.QQy)("svg"),(0,n.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1lcbp2k")},m(e,i){(0,n.Yry)(e,t,i),(0,n.BCw)(t,l),s||(c=[(0,n.hGc)(r=p.qz.call(null,l,{iconName:"grid"})),(0,n.KTR)(t,"click",o)],s=!0)},p(t,l){e=t},d(e){e&&(0,n.YoD)(t),s=!1,(0,n.oOW)(c)}}}function Z(e){let t,l,r,s,c,o,i,a,u=e[51].Title+"";return{c(){t=(0,n.ND4)("div"),l=(0,n.QQy)("svg"),s=(0,n.xem)(),c=(0,n.Qq7)(u),(0,n.CFu)(t,"class","item-title svelte-1lcbp2k"),(0,n.CFu)(t,"title",o=e[51].portal_type+": "+e[51].Title)},m(o,u){(0,n.Yry)(o,t,u),(0,n.BCw)(t,l),(0,n.BCw)(t,s),(0,n.BCw)(t,c),i||(a=(0,n.hGc)(r=p.qz.call(null,l,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),i=!0)},p(l,s){e=l,r&&(0,n.Qk1)(r.update)&&2&s[0]&&r.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&s[0]&&u!==(u=e[51].Title+"")&&(0,n.iQh)(c,u),2&s[0]&&o!==(o=e[51].portal_type+": "+e[51].Title)&&(0,n.CFu)(t,"title",o)},d(e){e&&(0,n.YoD)(t),i=!1,a()}}}function X(e){let t,l,r,s=e[51].Title+"";function c(e,t){return e[51].getIcon?te:ee}let o=c(e),i=o(e);return{c(){t=(0,n.ND4)("div"),i.c(),l=(0,n.xem)(),r=(0,n.Qq7)(s),(0,n.CFu)(t,"class","grid-preview svelte-1lcbp2k")},m(e,s){(0,n.Yry)(e,t,s),i.m(t,null),(0,n.BCw)(t,l),(0,n.BCw)(t,r)},p(e,a){o===(o=c(e))&&i?i.p(e,a):(i.d(1),i=o(e),i&&(i.c(),i.m(t,l))),2&a[0]&&s!==(s=e[51].Title+"")&&(0,n.iQh)(r,s)},d(e){e&&(0,n.YoD)(t),i.d()}}}function ee(e){let t,l,r,s;return{c(){t=(0,n.QQy)("svg")},m(c,o){(0,n.Yry)(c,t,o),r||(s=(0,n.hGc)(l=p.qz.call(null,t,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),r=!0)},p(t,r){e=t,l&&(0,n.Qk1)(l.update)&&2&r[0]&&l.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,n.YoD)(t),r=!1,s()}}}function te(e){let t,l,r;return{c(){t=(0,n.ND4)("img"),(0,n.mq_)(t.src,l=`${e[51].getURL}/@@images/image/thumb`)||(0,n.CFu)(t,"src",l),(0,n.CFu)(t,"alt",r=e[51].Title),(0,n.CFu)(t,"class","svelte-1lcbp2k")},m(e,l){(0,n.Yry)(e,t,l)},p(e,s){2&s[0]&&!(0,n.mq_)(t.src,l=`${e[51].getURL}/@@images/image/thumb`)&&(0,n.CFu)(t,"src",l),2&s[0]&&r!==(r=e[51].Title)&&(0,n.CFu)(t,"alt",r)},d(e){e&&(0,n.YoD)(t)}}}function le(e){let t,l,r,s,c;return{c(){t=(0,n.ND4)("div"),l=(0,n.QQy)("svg"),(0,n.CFu)(t,"class","browseSub svelte-1lcbp2k")},m(e,o){(0,n.Yry)(e,t,o),(0,n.BCw)(t,l),s||(c=(0,n.hGc)(r=p.qz.call(null,l,{iconName:"arrow-right-circle"})),s=!0)},d(e){e&&(0,n.YoD)(t),s=!1,c()}}}function ne(e){let t,l,r,s,c,o,i;function a(e,t){return e[48].gridView?X:Z}let u=a(e),A=u(e),p=e[51].is_folderish&&"browse"==e[6].mode&&le();function d(...t){return e[36](e[51],...t)}function m(...t){return e[37](e[51],...t)}return{c(){t=(0,n.ND4)("div"),A.c(),l=(0,n.xem)(),p&&p.c(),(0,n.CFu)(t,"class",r="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-1lcbp2k"),(0,n.CFu)(t,"role","button"),(0,n.CFu)(t,"tabindex",s=e[53]),(0,n.CFu)(t,"data-uuid",c=e[51].UID)},m(e,r){(0,n.Yry)(e,t,r),A.m(t,null),(0,n.BCw)(t,l),p&&p.m(t,null),o||(i=[(0,n.KTR)(t,"keydown",(0,n.xZN)(d)),(0,n.KTR)(t,"click",m)],o=!0)},p(s,o){u===(u=a(e=s))&&A?A.p(e,o):(A.d(1),A=u(e),A&&(A.c(),A.m(t,l))),e[51].is_folderish&&"browse"==e[6].mode?p||(p=le(),p.c(),p.m(t,null)):p&&(p.d(1),p=null),3&o[0]&&r!==(r="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-1lcbp2k")&&(0,n.CFu)(t,"class",r),2&o[0]&&c!==(c=e[51].UID)&&(0,n.CFu)(t,"data-uuid",c)},d(e){e&&(0,n.YoD)(t),A.d(),p&&p.d(),o=!1,(0,n.oOW)(i)}}}function re(e){let t,l,r,s,c,o,i;return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("div"),(0,n.CFu)(l,"class","spinner-border"),(0,n.CFu)(l,"role","status"),(0,n.CFu)(t,"class","loadmore svelte-1lcbp2k"),(0,n.CFu)(t,"data-level-path",r=e[48].path),(0,n.CFu)(t,"data-level-next-page",s=parseInt(e[48].page)+1)},m(r,s){(0,n.Yry)(r,t,s),(0,n.BCw)(t,l),o||(i=(0,n.hGc)(c=e[29].call(null,t)),o=!0)},p(e,l){2&l[0]&&r!==(r=e[48].path)&&(0,n.CFu)(t,"data-level-path",r),2&l[0]&&s!==(s=parseInt(e[48].page)+1)&&(0,n.CFu)(t,"data-level-next-page",s)},d(e){e&&(0,n.YoD)(t),o=!1,i()}}}function se(e){let t,l;return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("p"),l.textContent=`${(0,a.Ay)("no results found")}`,(0,n.CFu)(l,"class","svelte-1lcbp2k"),(0,n.CFu)(t,"class","contentItem svelte-1lcbp2k")},m(e,r){(0,n.Yry)(e,t,r),(0,n.BCw)(t,l)},d(e){e&&(0,n.YoD)(t)}}}function ce(e,t){let l,r,s,c,o,a,u,A,p,d,m,b=0==t[50]&&V(t),v=t[48].selectable&&M(t);function f(e,t){return e[48].gridView?J:H}let h=f(t),C=h(t),g=(0,n.rv_)(t[48].results||[]),w=[];for(let e=0;e<g.length;e+=1)w[e]=ne(j(t,g,e));let y=t[48].more&&re(t),k=0==t[48].total&&se();return{key:e,first:null,c(){l=(0,n.ND4)("div"),r=(0,n.ND4)("div"),b&&b.c(),s=(0,n.xem)(),v&&v.c(),c=(0,n.xem)(),o=(0,n.ND4)("div"),C.c(),a=(0,n.xem)(),u=(0,n.ND4)("div");for(let e=0;e<w.length;e+=1)w[e].c();A=(0,n.xem)(),y&&y.c(),p=(0,n.xem)(),k&&k.c(),(0,n.CFu)(o,"class","levelActions svelte-1lcbp2k"),(0,n.CFu)(r,"class","levelToolbar svelte-1lcbp2k"),(0,n.CFu)(u,"class","levelItems svelte-1lcbp2k"),(0,n.CFu)(l,"class",d="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-1lcbp2k"),this.first=l},m(e,t){(0,n.Yry)(e,l,t),(0,n.BCw)(l,r),b&&b.m(r,null),(0,n.BCw)(r,s),v&&v.m(r,null),(0,n.BCw)(r,c),(0,n.BCw)(r,o),C.m(o,null),(0,n.BCw)(l,a),(0,n.BCw)(l,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(u,null);(0,n.BCw)(u,A),y&&y.m(u,null),(0,n.BCw)(u,p),k&&k.m(u,null)},p(e,i){if(0==(t=e)[50]?b?b.p(t,i):(b=V(t),b.c(),b.m(r,s)):b&&(b.d(1),b=null),t[48].selectable?v?v.p(t,i):(v=M(t),v.c(),v.m(r,c)):v&&(v.d(1),v=null),h===(h=f(t))&&C?C.p(t,i):(C.d(1),C=h(t),C&&(C.c(),C.m(o,null))),168427587&i[0]){let e;for(g=(0,n.rv_)(t[48].results||[]),e=0;e<g.length;e+=1){const l=j(t,g,e);w[e]?w[e].p(l,i):(w[e]=ne(l),w[e].c(),w[e].m(u,A))}for(;e<w.length;e+=1)w[e].d(1);w.length=g.length}t[48].more?y?y.p(t,i):(y=re(t),y.c(),y.m(u,p)):y&&(y.d(1),y=null),0==t[48].total?k||(k=se(),k.c(),k.m(u,null)):k&&(k.d(1),k=null),2&i[0]&&d!==(d="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-1lcbp2k")&&(0,n.CFu)(l,"class",d)},i(e){e&&(m||(0,n.Dti)((()=>{m=(0,n.b7f)(l,i._J,{duration:300}),m.start()})))},o:n.lQ1,d(e){e&&(0,n.YoD)(l),b&&b.d(),v&&v.d(),C.d(),(0,n.ppq)(w,e),y&&y.d(),k&&k.d()}}}function oe(e){let t,l,r,s,c,o,i,u,A,p,d,m,b,v,f,h=(0,a.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"",C=e[5].Title+"",g=e[5].Description+"";function w(e,t){return e[5].getIcon?ae:ie}let y=w(e),k=y(e);return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("div"),r=(0,n.ND4)("button"),s=(0,n.Qq7)(h),o=(0,n.xem)(),i=(0,n.ND4)("div"),k.c(),u=(0,n.xem)(),A=(0,n.ND4)("h4"),p=(0,n.Qq7)(C),d=(0,n.xem)(),m=(0,n.ND4)("p"),b=(0,n.Qq7)(g),(0,n.CFu)(r,"class","btn btn-primary btn-xs svelte-1lcbp2k"),r.disabled=c=!e[25](e[5]),(0,n.CFu)(l,"class","levelToolbar svelte-1lcbp2k"),(0,n.CFu)(A,"class","svelte-1lcbp2k"),(0,n.CFu)(i,"class","info svelte-1lcbp2k"),(0,n.CFu)(t,"class","preview svelte-1lcbp2k")},m(c,a){(0,n.Yry)(c,t,a),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(r,s),(0,n.BCw)(t,o),(0,n.BCw)(t,i),k.m(i,null),(0,n.BCw)(i,u),(0,n.BCw)(i,A),(0,n.BCw)(A,p),(0,n.BCw)(i,d),(0,n.BCw)(i,m),(0,n.BCw)(m,b),v||(f=(0,n.KTR)(r,"click",(0,n.xZN)(e[38])),v=!0)},p(e,t){32&t[0]&&h!==(h=(0,a.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"")&&(0,n.iQh)(s,h),32&t[0]&&c!==(c=!e[25](e[5]))&&(r.disabled=c),y===(y=w(e))&&k?k.p(e,t):(k.d(1),k=y(e),k&&(k.c(),k.m(i,u))),32&t[0]&&C!==(C=e[5].Title+"")&&(0,n.iQh)(p,C),32&t[0]&&g!==(g=e[5].Description+"")&&(0,n.iQh)(b,g)},d(e){e&&(0,n.YoD)(t),k.d(),v=!1,f()}}}function ie(e){let t,l,r,s,c;return{c(){t=(0,n.ND4)("div"),l=(0,n.QQy)("svg"),(0,n.CFu)(l,"class","svelte-1lcbp2k"),(0,n.CFu)(t,"class","previewIcon svelte-1lcbp2k")},m(o,i){(0,n.Yry)(o,t,i),(0,n.BCw)(t,l),s||(c=(0,n.hGc)(r=p.qz.call(null,l,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),s=!0)},p(e,t){r&&(0,n.Qk1)(r.update)&&32&t[0]&&r.update.call(null,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,n.YoD)(t),s=!1,c()}}}function ae(e){let t,l,r,s;return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("img"),(0,n.mq_)(l.src,r=e[5].getURL+"/@@images/image/preview")||(0,n.CFu)(l,"src",r),(0,n.CFu)(l,"alt",s=e[5].Title),(0,n.CFu)(l,"class","svelte-1lcbp2k"),(0,n.CFu)(t,"class","previewImage")},m(e,r){(0,n.Yry)(e,t,r),(0,n.BCw)(t,l)},p(e,t){32&t[0]&&!(0,n.mq_)(l.src,r=e[5].getURL+"/@@images/image/preview")&&(0,n.CFu)(l,"src",r),32&t[0]&&s!==(s=e[5].Title)&&(0,n.CFu)(l,"alt",s)},d(e){e&&(0,n.YoD)(t)}}}function ue(e){let t,l,r,s,c,o,i,u,A;return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("div"),r=(0,n.ND4)("button"),r.textContent=`${(0,a.Ay)("add selected items")}`,s=(0,n.xem)(),c=(0,n.ND4)("div"),o=(0,n.QQy)("svg"),(0,n.CFu)(r,"class","btn btn-primary btn-xs svelte-1lcbp2k"),(0,n.CFu)(l,"class","levelToolbar svelte-1lcbp2k"),(0,n.CFu)(o,"class","svelte-1lcbp2k"),(0,n.CFu)(c,"class","info svelte-1lcbp2k"),(0,n.CFu)(t,"class","preview svelte-1lcbp2k")},m(a,d){(0,n.Yry)(a,t,d),(0,n.BCw)(t,l),(0,n.BCw)(l,r),(0,n.BCw)(t,s),(0,n.BCw)(t,c),(0,n.BCw)(c,o),u||(A=[(0,n.KTR)(r,"click",(0,n.xZN)(e[21])),(0,n.hGc)(i=p.qz.call(null,o,{iconName:"files"}))],u=!0)},p:n.lQ1,d(e){e&&(0,n.YoD)(t),u=!1,(0,n.oOW)(A)}}}function Ae(e){let t;return{c(){t=(0,n.ND4)("div"),(0,n.CFu)(t,"class","upload-wrapper svelte-1lcbp2k")},m(e,l){(0,n.Yry)(e,t,l)},d(e){e&&(0,n.YoD)(t)}}}function pe(e){let t;return{c(){t=(0,n.ND4)("p"),t.textContent=`${(0,a.Ay)("loading content items")}`},m(e,l){(0,n.Yry)(e,t,l)},p:n.lQ1,d(e){e&&(0,n.YoD)(t)}}}function de(e){let t,l,r=e[3]&&K(e);return{c(){r&&r.c(),t=(0,n.Iex)()},m(e,s){r&&r.m(e,s),(0,n.Yry)(e,t,s),l=!0},p(e,l){e[3]?r?(r.p(e,l),8&l[0]&&(0,n.c7F)(r,1)):(r=K(e),r.c(),(0,n.c7F)(r,1),r.m(t.parentNode,t)):r&&((0,n.V44)(),(0,n.Tn8)(r,1,1,(()=>{r=null})),(0,n.GYV)())},i(e){l||((0,n.c7F)(r),l=!0)},o(e){(0,n.Tn8)(r),l=!1},d(e){e&&(0,n.YoD)(t),r&&r.d(e)}}}function me(e,t,l){let r,i,a,A,m,b,v;o.ih({scrollX:!0,container:".levelColumns",duration:500});const f=(0,s.SD)("currentPath");(0,n.j0C)(e,f,(e=>l(2,a=e)));const h=(0,s.SD)("config");(0,n.j0C)(e,h,(e=>l(6,b=e)));const C=(0,s.SD)("pathCache"),g=(0,s.SD)("showContentBrowser");(0,n.j0C)(e,g,(e=>l(3,A=e)));const w=(0,s.SD)("selectedItems");(0,n.j0C)(e,w,(e=>l(43,v=e)));const y=(0,s.SD)("selectedUids");(0,n.j0C)(e,y,(e=>l(42,m=e)));const k=(0,s.SD)("previewUids");(0,n.j0C)(e,k,(e=>l(0,r=e)));const x=d(b,C);(0,n.j0C)(e,x,(e=>l(1,i=e)));let D=!1,B={},N=!1,F=!1,I=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function T({data:e=null,uuid:t=null,action:s="show"}){if(e&&"show"==s)l(5,B=e),(0,n.vu6)(k,r=[e.UID],r);else if(t&&"add"==s&&-1===r.indexOf(t)){if(b.maximumSelectionSize>0&&r.length>=b.maximumSelectionSize)return;(0,n.vu6)(k,r=[...r,t],r)}else t&&"remove"==s&&-1!==r.indexOf(t)?k.update((e=>(e.splice(e.indexOf(t),1),e))):"clear"==s&&(l(5,B={}),(0,n.vu6)(k,r=[],r))}function Y(e,t){l(4,D=!1),T({action:"clear"}),"/"!==e?function(e){if("search"==b.mode)T({data:e});else if(e.is_folderish)f.set(e.path);else{const t=e.path.split("/"),l=t.slice(0,t.length-1).join("/");f.set(l||"/"),T({data:e})}E()}(e):f.set(e)}function U(e,t){N||(N=!0);const l=t.currentTarget.closest(".levelItems"),n=l.querySelectorAll(".selectedItem");if(n.length&&1!=b.maximumSelectionSize)if(F||t?.shiftKey){let t=!1;for(const n of l.children){if(-1!==[e.UID,B.UID].indexOf(n.dataset.uuid)){if(t){T({uuid:n.dataset.uuid,action:"add"}),t=!1;continue}t=!0}T({uuid:n.dataset.uuid,action:t?"add":"remove"})}}else t?.metaKey||t?.ctrlKey?T({uuid:e.UID,action:-1==r.indexOf(e.UID)?"add":"remove"}):([...n].map((e=>e.classList.remove("selectedItem"))),Y(e));else Y(e);t.currentTarget.focus(),t.currentTarget.classList.add("selectedItem")}function $(){if(N)return;const e=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem"),document.querySelector(".levelColumn .contentItem")];e.length&&(N=!0,e[0].focus())}function S(e,t){const l=t.currentTarget;if(F=t.shiftKey,"Escape"==t.key&&Q(),"ArrowDown"==t.key&&l?.nextElementSibling?.classList.contains("contentItem")&&l.nextElementSibling.click(),"ArrowUp"==t.key&&l?.previousElementSibling?.classList.contains("contentItem")&&l.previousElementSibling.click(),"ArrowRight"==t.key){const e=t.target.closest(".levelColumn"),l=e?.nextElementSibling;if(!l||!l.classList.contains("levelColumn"))return;l.querySelector(".contentItem")?.click()}if("ArrowLeft"==t.key){const e=t.target.closest(".levelColumn"),l=e?.previousElementSibling;if(!l||!l.classList.contains("levelColumn"))return;l.querySelector(".inPath").click()}"Space"==t.key&&U(e,t),"Enter"==t.key&&z(e)&&(1==b.maximumSelectionSize?q(e):_())}async function q(e){1==b.maximumSelectionSize?(w.set([e]),y.set([e.UID])):(w.update((t=>[...t,e])),y.update((()=>v.map((e=>e.UID))))),(0,p.r1)(e,b),T({action:"clear"}),(0,n.vu6)(g,A=!1,A),N=!1}async function _(){const e=await(0,p.x6)(r,b);w.update((t=>{for(const l of e)-1==m.indexOf(l.UID)&&t.push(l);return t})),y.update((()=>v.map((e=>e.UID)))),T({action:"clear"}),(0,n.vu6)(g,A=!1,A),N=!1}function Q(){(0,n.vu6)(g,A=!1,A),N=!1,T({action:"clear"})}function z(e){return-1===m.indexOf(e.UID)}function E(){const e=document.querySelector(".levelColumns");e&&o.VG({x:e.scrollWidth+100})}return e.$$.update=()=>{12&e.$$.dirty[0]&&A&&x.get({path:a}),2&e.$$.dirty[0]&&E(),e.$$.dirty[0]},[r,i,a,A,D,B,b,f,h,g,w,y,k,x,I,async function(){T({action:"clear"}),l(4,D=!0),await c.A.timeout(1);const e=document.querySelector(".upload-wrapper");e.classList.add("pat-upload"),new u.default(e,{baseUrl:b.base_url,currentPath:a,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(e,t)=>{x.get({path:a,updateCache:!0})}})},Y,U,$,S,q,_,function(e){q(e.detail.item)},async function(e){const t=e.detail.item.path,l=await(0,p.Em)({vocabularyUrl:b.vocabularyUrl,attributes:b.attributes,levelInfoPath:t});if(!l.total)return void alert(`${t} not found!`);const n=l.results[0];n.path||(n.path="/"),Y(n)},Q,z,E,function(e){return-1!=a.indexOf(e.path)},function(){let e;e&&clearTimeout(e),e=setTimeout((()=>{x.get({path:a,searchTerm:this.value})}),300)},function(e){const t=new IntersectionObserver((t=>{for(const l of t)if(l.isIntersecting){const t=e.dataset.levelPath,l=parseInt(e.dataset.levelNextPage);x.get({loadMorePath:t,page:l})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{t.observe(e)}),500)},()=>Q(),()=>Y("/"),()=>Y("/"),e=>q(e),(e,t,l)=>(0,n.vu6)(x,t[l].gridView=!0,i),(e,t,l)=>(0,n.vu6)(x,t[l].gridView=!1,i),(e,t)=>S(e,t),(e,t)=>U(e,t),()=>q(B),()=>{E(),$()}]}class be extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,me,de,n.jXN,{},null,[-1,-1])}}var ve=be,fe=l(44423),he=l.n(fe),Ce=l(44563),ge=l(54732),we=l.n(ge),ye=l(19394),ke={};ke.styleTagTransform=E(),ke.setAttributes=q(),ke.insert=$(),ke.domAPI=Y(),ke.insertStyleElement=Q();I()(ye.A,ke),ye.A&&ye.A.locals&&ye.A.locals;function xe(e,t,l){const n=e.slice();return n[19]=t[l],n[21]=l,n}function De(e){let t,l,r=[],s=new Map,c=(0,n.rv_)(e[0]);const o=e=>e[19].UID;for(let t=0;t<c.length;t+=1){let l=xe(e,c,t),n=o(l);s.set(n,r[t]=Be(n,l))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=(0,n.Iex)()},m(e,s){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,s);(0,n.Yry)(e,t,s),l=!0},p(e,l){17&l&&(c=(0,n.rv_)(e[0]),(0,n.V44)(),r=(0,n.l7s)(r,l,o,1,e,c,s,t.parentNode,n.XP4,Be,t,xe),(0,n.GYV)())},i(e){if(!l){for(let e=0;e<c.length;e+=1)(0,n.c7F)(r[e]);l=!0}},o(e){for(let e=0;e<r.length;e+=1)(0,n.Tn8)(r[e]);l=!1},d(e){e&&(0,n.YoD)(t);for(let t=0;t<r.length;t+=1)r[t].d(e)}}}function Be(e,t){let l,r,s,c;var o=t[4].component;function i(e,t){return{props:{idx:e[21],item:e[19]}}}return o&&(r=(0,n.obh)(o,i(t))),{key:e,first:null,c(){l=(0,n.Iex)(),r&&(0,n.N0i)(r.$$.fragment),s=(0,n.Iex)(),this.first=l},m(e,t){(0,n.Yry)(e,l,t),r&&(0,n.wSR)(r,e,t),(0,n.Yry)(e,s,t),c=!0},p(e,l){if(o!==(o=(t=e)[4].component)){if(r){(0,n.V44)();const e=r;(0,n.Tn8)(e.$$.fragment,1,0,(()=>{(0,n.Hbl)(e,1)})),(0,n.GYV)()}o?(r=(0,n.obh)(o,i(t)),(0,n.N0i)(r.$$.fragment),(0,n.c7F)(r.$$.fragment,1),(0,n.wSR)(r,s.parentNode,s)):r=null}else if(o){const e={};1&l&&(e.idx=t[21]),1&l&&(e.item=t[19]),r.$set(e)}},i(e){c||(r&&(0,n.c7F)(r.$$.fragment,e),c=!0)},o(e){r&&(0,n.Tn8)(r.$$.fragment,e),c=!1},d(e){e&&((0,n.YoD)(l),(0,n.YoD)(s)),r&&(0,n.Hbl)(r,e)}}}function Ne(e){let t;return{c(){t=(0,n.ND4)("p"),t.textContent=`${(0,a.Ay)("loading selected items")}`},m(e,l){(0,n.Yry)(e,t,l)},d(e){e&&(0,n.YoD)(t)}}}function Fe(e){let t,l,r,s,c,o,i,u,A=e[0]&&De(e),p=!e[0]&&Ne();return{c(){t=(0,n.ND4)("div"),l=(0,n.ND4)("div"),A&&A.c(),r=(0,n.xem)(),p&&p.c(),s=(0,n.xem)(),c=(0,n.ND4)("button"),c.textContent=`${(0,a.Ay)("Select")}`,(0,n.CFu)(l,"class","content-browser-selected-items svelte-awokap"),(0,n.CFu)(c,"class","btn btn-primary"),(0,n.hgi)(c,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,n.CFu)(t,"class","content-browser-selected-items-wrapper svelte-awokap"),(0,n.hgi)(t,"width",e[2].width||"auto")},m(a,d){(0,n.Yry)(a,t,d),(0,n.BCw)(t,l),A&&A.m(l,null),(0,n.BCw)(l,r),p&&p.m(l,null),(0,n.BCw)(t,s),(0,n.BCw)(t,c),e[10](t),o=!0,i||(u=(0,n.KTR)(c,"click",(0,n.xZN)(e[9])),i=!0)},p(e,[s]){e[0]?A?(A.p(e,s),1&s&&(0,n.c7F)(A,1)):(A=De(e),A.c(),(0,n.c7F)(A,1),A.m(l,r)):A&&((0,n.V44)(),(0,n.Tn8)(A,1,1,(()=>{A=null})),(0,n.GYV)()),e[0]?p&&(p.d(1),p=null):p||(p=Ne(),p.c(),p.m(l,null)),(!o||4&s)&&(0,n.hgi)(t,"width",e[2].width||"auto")},i(e){o||((0,n.c7F)(A),o=!0)},o(e){(0,n.Tn8)(A),o=!1},d(l){l&&(0,n.YoD)(t),A&&A.d(),p&&p.d(),e[10](null),i=!1,u()}}}function Ie(e,t,l){let r,c,o,i,a=!0;const u=we().getComponent("SelectedItem");console.log(u);const A=(0,s.SD)("config");(0,n.j0C)(e,A,(e=>l(2,c=e)));const d=c.fieldId,m=document.getElementById(d),b=(0,s.SD)("selectedItems");(0,n.j0C)(e,b,(e=>l(0,r=e)));const v=(0,s.SD)("selectedUids"),f=(0,s.SD)("showContentBrowser");function h(){1!==c.maximumSelectionSize&&r.length>1&&he().create(m.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:e=>{let t=[];for(const l of e.target.children)t.push(l.dataset.uuid);C(t)}})}function C(e){const t=e.join(c.separator);m.value=t,m.dispatchEvent(Ce.A.change_event())}(0,n.j0C)(e,f,(e=>l(3,o=e))),(0,s.Rc)((async()=>{await async function(){const e=c.selection.length?c.selection:m?.value?m.value.split(c.separator):[];if(!e.length)return;const t=await(0,p.x6)(e,c);(0,n.vu6)(b,r=t,r),v.update((()=>t.map((e=>e.UID))))}(),h(),l(8,a=!1)})),(0,s.o)("unselectItem",(function(e){b.update((t=>(t.splice(e,1),t))),v.update((()=>r.map((e=>e.UID))))}));return e.$$.update=()=>{257&e.$$.dirty&&(!r.length&&a||(C(function(){let e=[];return r.forEach((t=>{e.push(t.UID)})),e}()),h()))},[r,i,c,o,u,A,b,f,a,()=>(0,n.vu6)(f,o=!0,o),function(e){n.Dnk[e?"unshift":"push"]((()=>{i=e,l(1,i)}))}]}class Te extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,Ie,Fe,n.jXN,{})}}var Ye=Te;(0,A.T5)(!1);function Ue(e){let t,l,r,s;return t=new ve({}),r=new Ye({}),{c(){(0,n.N0i)(t.$$.fragment),l=(0,n.xem)(),(0,n.N0i)(r.$$.fragment)},m(e,c){(0,n.wSR)(t,e,c),(0,n.Yry)(e,l,c),(0,n.wSR)(r,e,c),s=!0},p:n.lQ1,i(e){s||((0,n.c7F)(t.$$.fragment,e),(0,n.c7F)(r.$$.fragment,e),s=!0)},o(e){(0,n.Tn8)(t.$$.fragment,e),(0,n.Tn8)(r.$$.fragment,e),s=!1},d(e){e&&(0,n.YoD)(l),(0,n.Hbl)(t,e),(0,n.Hbl)(r,e)}}}function $e(e,t,l){let c,o,{maxDepth:i}=t,{width:a}=t,{attributes:u}=t,{contextPath:p}=t,{vocabularyUrl:d}=t,{mode:m="browse"}=t,{basePath:b=""}=t,{selectableTypes:v=[]}=t,{maximumSelectionSize:f=-1}=t,{separator:h}=t,{selection:C=[]}=t,{query:g={}}=t,{fieldId:w}=t,{upload:y}=t,{favorites:k}=t,{recentlyUsed:x}=t,{recentlyUsedKey:D}=t,{recentlyUsedMaxItems:B}=t,{bSize:N=20}=t;const F=r.A.getLogger("pat-contentbrowser");!function(){let e=(0,A.T5)("");(0,s.o)("currentPath",e)}(),function(){let e=(0,A.T5)({});(0,s.o)("config",e)}(),function(){let e=(0,A.T5)({});(0,s.o)("pathCache",e)}(),function(){let e=(0,A.T5)([]);(0,s.o)("selectedItems",e)}(),function(){let e=(0,A.T5)(!1);(0,s.o)("showContentBrowser",e)}(),function(){let e=(0,A.T5)([]);(0,s.o)("selectedUids",e)}(),function(){let e=(0,A.T5)([]);(0,s.o)("previewUids",e)}();const I=(0,s.SD)("currentPath");(0,n.j0C)(e,I,(e=>l(22,o=e))),o||(0,n.vu6)(I,o=b||"/",o);const T=document.body.getAttribute("data-portal-url");let Y=(0,s.SD)("config");return(0,n.j0C)(e,Y,(e=>l(21,c=e))),(0,n.vu6)(Y,c={mode:m,attributes:u,contextPath:p,vocabularyUrl:d,width:a,maxDepth:i,basePath:b,selectableTypes:v,maximumSelectionSize:f,separator:h,selection:C,query:g,fieldId:w,uploadEnabled:y,favorites:k,recentlyUsed:x,recentlyUsedKey:D,recentlyUsedMaxItems:B,base_url:T,pageSize:N},c),F.debug(`Initialized App<${w}> with config ${JSON.stringify(c)}`),e.$$set=e=>{"maxDepth"in e&&l(2,i=e.maxDepth),"width"in e&&l(3,a=e.width),"attributes"in e&&l(4,u=e.attributes),"contextPath"in e&&l(5,p=e.contextPath),"vocabularyUrl"in e&&l(6,d=e.vocabularyUrl),"mode"in e&&l(7,m=e.mode),"basePath"in e&&l(8,b=e.basePath),"selectableTypes"in e&&l(9,v=e.selectableTypes),"maximumSelectionSize"in e&&l(10,f=e.maximumSelectionSize),"separator"in e&&l(11,h=e.separator),"selection"in e&&l(12,C=e.selection),"query"in e&&l(13,g=e.query),"fieldId"in e&&l(14,w=e.fieldId),"upload"in e&&l(15,y=e.upload),"favorites"in e&&l(16,k=e.favorites),"recentlyUsed"in e&&l(17,x=e.recentlyUsed),"recentlyUsedKey"in e&&l(18,D=e.recentlyUsedKey),"recentlyUsedMaxItems"in e&&l(19,B=e.recentlyUsedMaxItems),"bSize"in e&&l(20,N=e.bSize)},[I,Y,i,a,u,p,d,m,b,v,f,h,C,g,w,y,k,x,D,B,N]}class Se extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,$e,Ue,n.jXN,{maxDepth:2,width:3,attributes:4,contextPath:5,vocabularyUrl:6,mode:7,basePath:8,selectableTypes:9,maximumSelectionSize:10,separator:11,selection:12,query:13,fieldId:14,upload:15,favorites:16,recentlyUsed:17,recentlyUsedKey:18,recentlyUsedMaxItems:19,bSize:20})}}var qe=Se}}]);
//# sourceMappingURL=85083.f256fac24521406a74cc.min.js.map