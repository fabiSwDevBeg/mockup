"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[18085],{44278:function(e,t,l){var o=l(71354),n=l.n(o),r=l(76314),s=l.n(r)()(n());s.push([e.id,".content-browser-position-wrapper.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-1vowdbo>.upload.svelte-1vowdbo.svelte-1vowdbo{margin:0 1rem 0 auto}.toolBar.svelte-1vowdbo svg{vertical-align:-0.125em}.levelColumns.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-1vowdbo>.levelActions.svelte-1vowdbo.svelte-1vowdbo{margin-left:auto}.levelItems.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{overflow-x:auto}.contentItem.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo:focus-visible{outline:none}.contentItem.even.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{background-color:var(--bs-secondary-bg)}.contentItem.inPath.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo,.contentItem.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-1vowdbo>.svelte-1vowdbo.svelte-1vowdbo{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-1vowdbo>.browseSub.svelte-1vowdbo.svelte-1vowdbo{flex-shrink:0}.contentItem.svelte-1vowdbo .grid-preview.svelte-1vowdbo>img.svelte-1vowdbo{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-1vowdbo .info.svelte-1vowdbo.svelte-1vowdbo{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-1vowdbo .info .previewIcon.svelte-1vowdbo.svelte-1vowdbo{margin:0 auto 1rem auto}.preview.svelte-1vowdbo .info .previewIcon svg.svelte-1vowdbo.svelte-1vowdbo{width:50px !important;height:50px !important}.preview.svelte-1vowdbo h4.svelte-1vowdbo.svelte-1vowdbo{font-size:1.2 rem}.preview.svelte-1vowdbo img.svelte-1vowdbo.svelte-1vowdbo{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-1vowdbo.svelte-1vowdbo.svelte-1vowdbo{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,+EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,qDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,8DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,sDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,8DAAA,oBAAA,CAAA,4BAAA,uBAAA,CAAA,2DAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,0DAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,2DAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,yEAAA,gBAAA,CAAA,yDAAA,eAAA,CAAA,0DAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,wEAAA,YAAA,CAAA,+DAAA,uCAAA,CAAA,iIAAA,kDAAA,CAAA,uEAAA,kCAAA,CAAA,uBAAA,CAAA,2DAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,qEAAA,aAAA,CAAA,4EAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,sDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,4DAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,yEAAA,uBAAA,CAAA,6EAAA,qBAAA,CAAA,sBAAA,CAAA,yDAAA,iBAAA,CAAA,0DAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,6DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,uDAAA,iBAAA,CAAA,gBAAA",sourceRoot:""}]),t.A=s},94441:function(e,t,l){var o=l(71354),n=l.n(o),r=l(76314),s=l.n(r)()(n());s.push([e.id,".content-browser-selected-items-wrapper.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf.svelte-bljrxf.svelte-bljrxf{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf.svelte-bljrxf{border-radius:var(--bs-border-radius);background-color:var(--bs-tertiary-bg);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);padding:.5rem;margin-bottom:.5rem;display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>.svelte-bljrxf{margin-right:.5rem;display:block}.content-browser-selected-items.svelte-bljrxf .selected-item button.svelte-bljrxf.svelte-bljrxf{cursor:pointer;padding:0 .375rem .374rem 0}.content-browser-selected-items.svelte-bljrxf .selected-item .item-info.svelte-bljrxf.svelte-bljrxf{display:flex;align-items:start}.content-browser-selected-items.svelte-bljrxf .selected-item.svelte-bljrxf>img.svelte-bljrxf{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,kFAAA,YAAA,CAAA,iBAAA,CAAA,0EAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA,CAAA,yFAAA,qCAAA,CAAA,sCAAA,CAAA,2EAAA,CAAA,aAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,0FAAA,kBAAA,CAAA,aAAA,CAAA,gGAAA,cAAA,CAAA,2BAAA,CAAA,oGAAA,YAAA,CAAA,iBAAA,CAAA,6FAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourceRoot:""}]),t.A=s},18085:function(e,t,l){l.r(t),l.d(t,{default:function(){return Re}});var o=l(43467),n=(l(2531),l(23505)),r=l(41949),s=l(8633),i=l(78836),a=l(95669),c=l(61751),A=l(8936),u=l(54603),d=l(49264);async function v(e){let{method:t="GET",vocabularyUrl:l=null,attributes:o=[],path:n=null,uids:r=null,searchTerm:s=null,searchPath:i=null,levelInfoPath:a=null,selectableTypes:c=[],pageSize:A=100,page:u=1}=e,d={criteria:[]};if(n&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${n}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),a&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${a}::0`}]}),i&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:i}]},c&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:c})),r&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:r}]}),s&&d.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${s}`}),!d.criteria.length)return{results:[],total:0};let v=`${l}&query=${JSON.stringify(d)}&attributes=${JSON.stringify(o)}&batch=${JSON.stringify({page:u,size:A})}`,p=new Headers;p.set("Accept","application/json");const m=await fetch(v,{method:t,headers:p}),b=await m.json();if(m.ok){if(!i&&!a&&c.length){const e={results:[],total:b.total};for(const t of b.results)(-1!=c.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return b}return{results:[],total:0,errors:b.errors}}async function p(e,t){if(!e)return[];const l=await v({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let o=await(l?.results)||[];return o.sort(((t,l)=>e.indexOf(t.UID)-e.indexOf(l.UID))),o}async function m(e,t){let{iconName:l}=t;const o=await async function(e){return await d.A.resolveIcon(e)}(l);return e.outerHTML=o,{destroy(){}}}function b(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function w(e,t){let l=d.A.storage.get(t.recentlyUsedKey)||[];l=l.slice(l.length-1e3,l.length),e&&t?.selectableTypes.length&&(l=l.filter((e=>-1!=t.selectableTypes.indexOf(e.portal_type))));const o=parseInt(t.recentlyUsedMaxItems,10);return o&&(l=l.slice(l.length-o,l.length)),l}function C(e,t){const l=(0,u.T5)([]),o=async t=>(t={...{vocabularyUrl:e.vocabularyUrl,attributes:e.attributes,pageSize:e.pageSize},...t},e.selectableTypes.length&&(t.selectableTypes=e.selectableTypes),await v(t));return l.get=async n=>{let{path:r="",searchTerm:s="",updateCache:i=!1,loadMorePath:a="",page:c=1}=n;const A=new URL(e.base_url).pathname;if("search"===e.mode)await(async(t,n,r)=>{let s={searchPath:t,page:r};n&&(s.searchTerm="*"+n+"*");let i=await o(s);i.page=r,i.searchTerm=n,l.update((t=>{const l=r*e.pageSize<i.total;return 0==t.length||t[0].searchTerm!=n?(i.more=l,i.selectable=!1,i.gridView=!1,[i]):(t[0].more=l,t[0].page=i.page,t[0].results=[...t[0].results,...i.results],t)}))})(A,s,c);else if(a){const n=(0,u.Jt)(t);if(!(a in n))return;let r=n[a];c>r.page&&await(async(t,n,r)=>{let s={path:t,page:n};r&&(s.searchTerm="*"+r+"*");let i=await o(s);i.more=n*e.pageSize<i.total,i.page=n,l.update((e=>(e.forEach((e=>{if(e.path!=t)return e;e.page=i.page,e.more=i.more,e.results=[...e.results,...i.results]})),e)))})(a,c,r.searchTerm)}else r&&(r=r.replace(new RegExp(`^${A}`),""),await(async(n,r,s,i)=>{let a=[],c=r.split("/")||[];const A=c.length>=e.maxDepth?e.maxDepth:c.length;let d=c.slice(c.length-A,c.length);const v=n+c.slice(0,c.length-A).join("/"),p=(0,u.Jt)(t);for(;d.length>0;){let e=d.join("/").replace(/^\//,"");e=v+(""!=d.pop()?`/${e}`:""),-1===a.indexOf(e)&&a.push(e)}let m=[],b=0;for(var w of a){b++;const l=1==b;let r={};if(!(w in p)||l&&s||i){let i={path:w};if(l&&s&&(i.searchTerm="*"+s+"*"),r=await o(i),r.more=e.pageSize<r.total,r.searchTerm=s,r.page=1,r.path=w,r.absPath=w.replace(n,""),!s){const l=await o({levelInfoPath:w});l.total&&(r.UID=l.results[0].UID,r.Title=l.results[0].Title,r.portal_type=l.results[0].portal_type,r.getIcon=l.results[0].getIcon,r.selectable=!e.selectableTypes.length||-1!=e.selectableTypes.indexOf(l.results[0].portal_type)),r.gridView=!1,t.update((e=>(e[w]=r,e)))}}else r=p[w];m=[r,...m]}l.set(m)})(A,r,s,i))},l}function f(e,t,l){const o=e.slice();return o[5]=t[l],o}function h(e){let t,l,n,r,s,i,a,c=e[5].title+"";function A(){return e[3](e[5])}return{c(){t=(0,o.ND4)("li"),l=(0,o.ND4)("a"),n=(0,o.Qq7)(c),s=(0,o.xem)(),(0,o.CFu)(l,"class","dropdown-item"),(0,o.CFu)(l,"href",r=e[5].path)},m(e,r){(0,o.Yry)(e,t,r),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(t,s),i||(a=(0,o.KTR)(l,"click",(0,o.xZN)(A)),i=!0)},p(t,s){e=t,1&s&&c!==(c=e[5].title+"")&&(0,o.iQh)(n,c),1&s&&r!==(r=e[5].path)&&(0,o.CFu)(l,"href",r)},d(e){e&&(0,o.YoD)(t),i=!1,a()}}}function g(e){let t,l,n,r,s,i,a,A,u,d,v,p,b=(0,c.Ay)("Favorites")+"",w=(0,o.rv_)(e[0].favorites),C=[];for(let t=0;t<w.length;t+=1)C[t]=h(f(e,w,t));return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("button"),n=(0,o.QQy)("svg"),s=(0,o.xem)(),i=(0,o.Qq7)(b),a=(0,o.xem)(),A=(0,o.ND4)("span"),u=(0,o.xem)(),d=(0,o.ND4)("ul");for(let e=0;e<C.length;e+=1)C[e].c();(0,o.CFu)(A,"class","caret"),(0,o.CFu)(l,"type","button"),(0,o.CFu)(l,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,o.CFu)(l,"data-bs-toggle","dropdown"),(0,o.CFu)(l,"aria-haspopup","true"),(0,o.CFu)(l,"aria-expanded","false"),(0,o.CFu)(d,"class","dropdown-menu"),(0,o.CFu)(t,"class","favorites dropdown dropdown-menu-end ms-2")},m(e,c){(0,o.Yry)(e,t,c),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(l,s),(0,o.BCw)(l,i),(0,o.BCw)(l,a),(0,o.BCw)(l,A),(0,o.BCw)(t,u),(0,o.BCw)(t,d);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(d,null);v||(p=(0,o.hGc)(r=m.call(null,n,{iconName:"star-fill"})),v=!0)},p(e,[t]){if(5&t){let l;for(w=(0,o.rv_)(e[0].favorites),l=0;l<w.length;l+=1){const o=f(e,w,l);C[l]?C[l].p(o,t):(C[l]=h(o),C[l].c(),C[l].m(d,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=w.length}},i:o.lQ1,o:o.lQ1,d(e){e&&(0,o.YoD)(t),(0,o.ppq)(C,e),v=!1,p()}}}function y(e,t,l){let n;const s=(0,r.SD)("config");(0,o.j0C)(e,s,(e=>l(0,n=e)));const i=(0,r.ur)();function a(e){i("selectItem",{item:e})}return[n,s,a,e=>a(e)]}class x extends o.r7T{constructor(e){super(),(0,o.TsN)(this,e,y,g,o.jXN,{})}}var D=x;function B(e,t,l){const o=e.slice();return o[6]=t[l],o}function F(e){let t,l,n,r,s,i,a,A,u,d,v,p,b=(0,c.Ay)("Recently Used")+"",w=(0,o.rv_)(e[2].reverse()),C=[];for(let t=0;t<w.length;t+=1)C[t]=N(B(e,w,t));return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("button"),n=(0,o.QQy)("svg"),s=(0,o.xem)(),i=(0,o.Qq7)(b),a=(0,o.xem)(),A=(0,o.ND4)("span"),u=(0,o.xem)(),d=(0,o.ND4)("ul");for(let e=0;e<C.length;e+=1)C[e].c();(0,o.CFu)(A,"class","caret"),(0,o.CFu)(l,"type","button"),(0,o.CFu)(l,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,o.CFu)(l,"data-bs-toggle","dropdown"),(0,o.CFu)(l,"aria-haspopup","true"),(0,o.CFu)(l,"aria-expanded","false"),(0,o.CFu)(d,"class","dropdown-menu"),(0,o.CFu)(t,"class","recentlyUsed dropdown ms-2")},m(e,c){(0,o.Yry)(e,t,c),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(l,s),(0,o.BCw)(l,i),(0,o.BCw)(l,a),(0,o.BCw)(l,A),(0,o.BCw)(t,u),(0,o.BCw)(t,d);for(let e=0;e<C.length;e+=1)C[e]&&C[e].m(d,null);v||(p=(0,o.hGc)(r=m.call(null,n,{iconName:"grid-fill"})),v=!0)},p(e,t){if(12&t){let l;for(w=(0,o.rv_)(e[2].reverse()),l=0;l<w.length;l+=1){const o=B(e,w,l);C[l]?C[l].p(o,t):(C[l]=N(o),C[l].c(),C[l].m(d,null))}for(;l<C.length;l+=1)C[l].d(1);C.length=w.length}},d(e){e&&(0,o.YoD)(t),(0,o.ppq)(C,e),v=!1,p()}}}function N(e){let t,l,n,r,s,i,a,c,A,u,d=e[6].Title+"";function v(){return e[4](e[6])}return{c(){t=(0,o.ND4)("li"),l=(0,o.ND4)("a"),n=(0,o.QQy)("svg"),s=(0,o.xem)(),i=(0,o.Qq7)(d),c=(0,o.xem)(),(0,o.CFu)(l,"href",a=e[6].getURL),(0,o.CFu)(l,"class","dropdown-item")},m(a,d){(0,o.Yry)(a,t,d),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(l,s),(0,o.BCw)(l,i),(0,o.BCw)(t,c),A||(u=[(0,o.KTR)(n,"error",console.log(e[6])),(0,o.hGc)(r=m.call(null,n,{iconName:`contenttype/${e[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,o.KTR)(l,"click",(0,o.xZN)(v))],A=!0)},p(t,l){e=t},d(e){e&&(0,o.YoD)(t),A=!1,(0,o.oOW)(u)}}}function I(e){let t,l=e[0].recentlyUsed&&e[2].length&&F(e);return{c(){l&&l.c(),t=(0,o.Iex)()},m(e,n){l&&l.m(e,n),(0,o.Yry)(e,t,n)},p(e,[o]){e[0].recentlyUsed&&e[2].length?l?l.p(e,o):(l=F(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:o.lQ1,o:o.lQ1,d(e){e&&(0,o.YoD)(t),l&&l.d(e)}}}function T(e,t,l){let n;const s=(0,r.SD)("config");(0,o.j0C)(e,s,(e=>l(0,n=e)));const i=w(!0,n),a=(0,r.ur)();function c(e){a("selectItem",{item:e})}return[n,s,i,c,e=>c(e)]}class U extends o.r7T{constructor(e){super(),(0,o.TsN)(this,e,T,I,o.jXN,{})}}var Y=U,S=l(85072),k=l.n(S),$=l(97825),Q=l.n($),_=l(57722),j=l.n(_),q=l(55056),R=l.n(q),P=l(10540),E=l.n(P),K=l(41113),O=l.n(K),z=l(44278),L={};L.styleTagTransform=O(),L.setAttributes=R(),L.insert=j(),L.domAPI=Q(),L.insertStyleElement=E();k()(z.A,L),z.A&&z.A.locals&&z.A.locals;function G(e,t,l){const o=e.slice();return o[48]=t[l],o[49]=t,o[50]=l,o}function W(e,t,l){const o=e.slice();return o[51]=t[l],o[53]=l,o}function M(e){let t,l,n,r,s,i,c,A,u,d,v,p,w,C,f,h,g,y,x,B,F,N,I,T,U,S=e[6].uploadEnabled&&J(e);p=new Y({}),p.$on("selectItem",e[22]),C=new D({}),C.$on("selectItem",e[23]);let k={ctx:e,current:null,token:null,hasCatch:!0,pending:be,then:Z,catch:V,value:47,error:54};return(0,o.vBd)(B=e[1],k),{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("nav"),n=(0,o.ND4)("div"),r=(0,o.ND4)("div"),s=(0,o.ND4)("input"),i=(0,o.xem)(),c=(0,o.ND4)("label"),A=(0,o.QQy)("svg"),d=(0,o.xem)(),S&&S.c(),v=(0,o.xem)(),(0,o.N0i)(p.$$.fragment),w=(0,o.xem)(),(0,o.N0i)(C.$$.fragment),f=(0,o.xem)(),h=(0,o.ND4)("button"),g=(0,o.QQy)("svg"),x=(0,o.xem)(),k.block.c(),(0,o.CFu)(s,"type","text"),(0,o.CFu)(s,"name","filter"),(0,o.CFu)(c,"for","filter"),(0,o.CFu)(r,"class","filter"),(0,o.CFu)(h,"class","btn btn-link text-white ms-auto"),(0,o.CFu)(h,"tabindex","0"),(0,o.CFu)(n,"class","toolBar navbar svelte-1vowdbo"),(0,o.CFu)(l,"class","content-browser svelte-1vowdbo"),(0,o.CFu)(t,"class","content-browser-position-wrapper svelte-1vowdbo")},m(a,D){(0,o.Yry)(a,t,D),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(n,r),(0,o.BCw)(r,s),(0,o.BCw)(r,i),(0,o.BCw)(r,c),(0,o.BCw)(c,A),(0,o.BCw)(n,d),S&&S.m(n,null),(0,o.BCw)(n,v),(0,o.wSR)(p,n,null),(0,o.BCw)(n,w),(0,o.wSR)(C,n,null),(0,o.BCw)(n,f),(0,o.BCw)(n,h),(0,o.BCw)(h,g),(0,o.BCw)(l,x),k.block.m(l,k.anchor=null),k.mount=()=>l,k.anchor=null,I=!0,T||(U=[(0,o.KTR)(s,"input",e[28]),(0,o.hGc)(u=m.call(null,A,{iconName:"search"})),(0,o.hGc)(y=m.call(null,g,{iconName:"x-circle"})),(0,o.KTR)(h,"click",(0,o.xZN)(e[30])),(0,o.KTR)(l,"introend",e[39]),(0,o.hGc)(F=b.call(null,l)),(0,o.KTR)(l,"click_outside",e[24])],T=!0)},p(t,l){(e=t)[6].uploadEnabled?S?S.p(e,l):(S=J(e),S.c(),S.m(n,v)):S&&(S.d(1),S=null),k.ctx=e,2&l[0]&&B!==(B=e[1])&&(0,o.vBd)(B,k)||(0,o._6B)(k,e,l)},i(t){I||((0,o.c7F)(p.$$.fragment,t),(0,o.c7F)(C.$$.fragment,t),t&&(0,o.Dti)((()=>{I&&(N||(N=(0,o.h86)(l,a._J,{x:e[14]/100*94,opacity:1},!0)),N.run(1))})),I=!0)},o(t){(0,o.Tn8)(p.$$.fragment,t),(0,o.Tn8)(C.$$.fragment,t),t&&(N||(N=(0,o.h86)(l,a._J,{x:e[14]/100*94,opacity:1},!1)),N.run(0)),I=!1},d(e){e&&(0,o.YoD)(t),S&&S.d(),(0,o.Hbl)(p),(0,o.Hbl)(C),k.block.d(),k.token=null,k=null,e&&N&&N.end(),T=!1,(0,o.oOW)(U)}}}function J(e){let t,l,n,r,s,i,a,A=(0,c.Ay)("upload to ${current_path}",{current_path:e[2]})+"";return{c(){t=(0,o.ND4)("button"),l=(0,o.QQy)("svg"),r=(0,o.xem)(),s=(0,o.Qq7)(A),(0,o.CFu)(t,"type","button"),(0,o.CFu)(t,"class","upload btn btn-secondary btn-sm svelte-1vowdbo"),(0,o.CFu)(t,"tabindex","0")},m(c,A){(0,o.Yry)(c,t,A),(0,o.BCw)(t,l),(0,o.BCw)(t,r),(0,o.BCw)(t,s),i||(a=[(0,o.hGc)(n=m.call(null,l,{iconName:"upload"})),(0,o.KTR)(t,"keydown",e[15]),(0,o.KTR)(t,"click",e[15])],i=!0)},p(e,t){4&t[0]&&A!==(A=(0,c.Ay)("upload to ${current_path}",{current_path:e[2]})+"")&&(0,o.iQh)(s,A)},d(e){e&&(0,o.YoD)(t),i=!1,(0,o.oOW)(a)}}}function V(e){let t,l,n=e[54].message+"";return{c(){t=(0,o.ND4)("p"),l=(0,o.Qq7)(n),(0,o.hgi)(t,"color","red")},m(e,n){(0,o.Yry)(e,t,n),(0,o.BCw)(t,l)},p(e,t){2&t[0]&&n!==(n=e[54].message+"")&&(0,o.iQh)(l,n)},d(e){e&&(0,o.YoD)(t)}}}function Z(e){let t,l,n,r,s=[],i=new Map,a=(0,o.rv_)(e[47]);const c=e=>e[48].path;for(let t=0;t<a.length;t+=1){let l=G(e,a,t),o=c(l);i.set(o,s[t]=Ae(o,l))}let A=e[5]?.UID&&1==e[0].length&&ue(e),u=e[0].length>1&&pe(e),d=e[4]&&me(e);return{c(){t=(0,o.ND4)("div");for(let e=0;e<s.length;e+=1)s[e].c();l=(0,o.xem)(),A&&A.c(),n=(0,o.xem)(),u&&u.c(),r=(0,o.xem)(),d&&d.c(),(0,o.CFu)(t,"class","levelColumns svelte-1vowdbo")},m(e,i){(0,o.Yry)(e,t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);(0,o.BCw)(t,l),A&&A.m(t,null),(0,o.BCw)(t,n),u&&u.m(t,null),(0,o.BCw)(t,r),d&&d.m(t,null)},p(e,v){169541699&v[0]&&(a=(0,o.rv_)(e[47]),s=(0,o.l7s)(s,v,c,1,e,a,i,t,o.n_k,Ae,l,G)),e[5]?.UID&&1==e[0].length?A?A.p(e,v):(A=ue(e),A.c(),A.m(t,n)):A&&(A.d(1),A=null),e[0].length>1?u?u.p(e,v):(u=pe(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[4]?d||(d=me(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&(0,o.YoD)(t);for(let e=0;e<s.length;e+=1)s[e].d();A&&A.d(),u&&u.d(),d&&d.d()}}}function H(e){let t,l,n,r,s;return{c(){t=(0,o.ND4)("button"),l=(0,o.QQy)("svg"),(0,o.CFu)(t,"type","button"),(0,o.CFu)(t,"class","btn btn-link btn-xs ps-0 svelte-1vowdbo"),(0,o.CFu)(t,"tabindex","0")},m(i,a){(0,o.Yry)(i,t,a),(0,o.BCw)(t,l),r||(s=[(0,o.hGc)(n=m.call(null,l,{iconName:"house"})),(0,o.KTR)(t,"keydown",e[31]),(0,o.KTR)(t,"click",e[32])],r=!0)},p:o.lQ1,d(e){e&&(0,o.YoD)(t),r=!1,(0,o.oOW)(s)}}}function X(e){let t,l,n,r,s,i=(0,c.Ay)("select ${level_path}",{level_path:e[48].absPath||"/"})+"";function a(){return e[33](e[48])}return{c(){t=(0,o.ND4)("button"),l=(0,o.Qq7)(i),(0,o.CFu)(t,"class","btn btn-primary btn-xs svelte-1vowdbo"),t.disabled=n=!e[25](e[48])},m(e,n){(0,o.Yry)(e,t,n),(0,o.BCw)(t,l),r||(s=(0,o.KTR)(t,"click",(0,o.xZN)(a)),r=!0)},p(r,s){e=r,2&s[0]&&i!==(i=(0,c.Ay)("select ${level_path}",{level_path:e[48].absPath||"/"})+"")&&(0,o.iQh)(l,i),2&s[0]&&n!==(n=!e[25](e[48]))&&(t.disabled=n)},d(e){e&&(0,o.YoD)(t),r=!1,s()}}}function ee(e){let t,l,n,r,s;function i(){return e[35](e[48],e[49],e[50])}return{c(){t=(0,o.ND4)("button"),l=(0,o.QQy)("svg"),(0,o.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1vowdbo")},m(e,a){(0,o.Yry)(e,t,a),(0,o.BCw)(t,l),r||(s=[(0,o.hGc)(n=m.call(null,l,{iconName:"list"})),(0,o.KTR)(t,"click",i)],r=!0)},p(t,l){e=t},d(e){e&&(0,o.YoD)(t),r=!1,(0,o.oOW)(s)}}}function te(e){let t,l,n,r,s;function i(){return e[34](e[48],e[49],e[50])}return{c(){t=(0,o.ND4)("button"),l=(0,o.QQy)("svg"),(0,o.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-1vowdbo")},m(e,a){(0,o.Yry)(e,t,a),(0,o.BCw)(t,l),r||(s=[(0,o.hGc)(n=m.call(null,l,{iconName:"grid"})),(0,o.KTR)(t,"click",i)],r=!0)},p(t,l){e=t},d(e){e&&(0,o.YoD)(t),r=!1,(0,o.oOW)(s)}}}function le(e){let t,l,n,r,s,i,a,c,A=e[51].Title+"";return{c(){t=(0,o.ND4)("div"),l=(0,o.QQy)("svg"),r=(0,o.xem)(),s=(0,o.Qq7)(A),(0,o.CFu)(t,"class","item-title svelte-1vowdbo"),(0,o.CFu)(t,"title",i=e[51].portal_type+": "+e[51].Title)},m(i,A){(0,o.Yry)(i,t,A),(0,o.BCw)(t,l),(0,o.BCw)(t,r),(0,o.BCw)(t,s),a||(c=(0,o.hGc)(n=m.call(null,l,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),a=!0)},p(l,r){e=l,n&&(0,o.Qk1)(n.update)&&2&r[0]&&n.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&r[0]&&A!==(A=e[51].Title+"")&&(0,o.iQh)(s,A),2&r[0]&&i!==(i=e[51].portal_type+": "+e[51].Title)&&(0,o.CFu)(t,"title",i)},d(e){e&&(0,o.YoD)(t),a=!1,c()}}}function oe(e){let t,l,n,r=e[51].Title+"";function s(e,t){return e[51].getIcon?re:ne}let i=s(e),a=i(e);return{c(){t=(0,o.ND4)("div"),a.c(),l=(0,o.xem)(),n=(0,o.Qq7)(r),(0,o.CFu)(t,"class","grid-preview svelte-1vowdbo")},m(e,r){(0,o.Yry)(e,t,r),a.m(t,null),(0,o.BCw)(t,l),(0,o.BCw)(t,n)},p(e,c){i===(i=s(e))&&a?a.p(e,c):(a.d(1),a=i(e),a&&(a.c(),a.m(t,l))),2&c[0]&&r!==(r=e[51].Title+"")&&(0,o.iQh)(n,r)},d(e){e&&(0,o.YoD)(t),a.d()}}}function ne(e){let t,l,n,r;return{c(){t=(0,o.QQy)("svg")},m(s,i){(0,o.Yry)(s,t,i),n||(r=(0,o.hGc)(l=m.call(null,t,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),n=!0)},p(t,n){e=t,l&&(0,o.Qk1)(l.update)&&2&n[0]&&l.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,o.YoD)(t),n=!1,r()}}}function re(e){let t,l,n;return{c(){t=(0,o.ND4)("img"),(0,o.mq_)(t.src,l=`${e[51].getURL}/@@images/image/thumb`)||(0,o.CFu)(t,"src",l),(0,o.CFu)(t,"alt",n=e[51].Title),(0,o.CFu)(t,"class","svelte-1vowdbo")},m(e,l){(0,o.Yry)(e,t,l)},p(e,r){2&r[0]&&!(0,o.mq_)(t.src,l=`${e[51].getURL}/@@images/image/thumb`)&&(0,o.CFu)(t,"src",l),2&r[0]&&n!==(n=e[51].Title)&&(0,o.CFu)(t,"alt",n)},d(e){e&&(0,o.YoD)(t)}}}function se(e){let t,l,n,r,s;return{c(){t=(0,o.ND4)("div"),l=(0,o.QQy)("svg"),(0,o.CFu)(t,"class","browseSub svelte-1vowdbo")},m(e,i){(0,o.Yry)(e,t,i),(0,o.BCw)(t,l),r||(s=(0,o.hGc)(n=m.call(null,l,{iconName:"arrow-right-circle"})),r=!0)},d(e){e&&(0,o.YoD)(t),r=!1,s()}}}function ie(e){let t,l,n,r,s,i,a;function c(e,t){return e[48].gridView?oe:le}let A=c(e),u=A(e),d=e[51].is_folderish&&"browse"==e[6].mode&&se();function v(...t){return e[36](e[51],...t)}function p(...t){return e[37](e[51],...t)}return{c(){t=(0,o.ND4)("div"),u.c(),l=(0,o.xem)(),d&&d.c(),(0,o.CFu)(t,"class",n="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-1vowdbo"),(0,o.CFu)(t,"role","button"),(0,o.CFu)(t,"tabindex",r=e[53]),(0,o.CFu)(t,"data-uuid",s=e[51].UID)},m(e,n){(0,o.Yry)(e,t,n),u.m(t,null),(0,o.BCw)(t,l),d&&d.m(t,null),i||(a=[(0,o.KTR)(t,"keydown",(0,o.xZN)(v)),(0,o.KTR)(t,"click",p)],i=!0)},p(r,i){A===(A=c(e=r))&&u?u.p(e,i):(u.d(1),u=A(e),u&&(u.c(),u.m(t,l))),e[51].is_folderish&&"browse"==e[6].mode?d||(d=se(),d.c(),d.m(t,null)):d&&(d.d(1),d=null),3&i[0]&&n!==(n="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-1vowdbo")&&(0,o.CFu)(t,"class",n),2&i[0]&&s!==(s=e[51].UID)&&(0,o.CFu)(t,"data-uuid",s)},d(e){e&&(0,o.YoD)(t),u.d(),d&&d.d(),i=!1,(0,o.oOW)(a)}}}function ae(e){let t,l,n,r,s,i,a;return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("div"),(0,o.CFu)(l,"class","spinner-border"),(0,o.CFu)(l,"role","status"),(0,o.CFu)(t,"class","loadmore svelte-1vowdbo"),(0,o.CFu)(t,"data-level-path",n=e[48].path),(0,o.CFu)(t,"data-level-next-page",r=parseInt(e[48].page)+1)},m(n,r){(0,o.Yry)(n,t,r),(0,o.BCw)(t,l),i||(a=(0,o.hGc)(s=e[29].call(null,t)),i=!0)},p(e,l){2&l[0]&&n!==(n=e[48].path)&&(0,o.CFu)(t,"data-level-path",n),2&l[0]&&r!==(r=parseInt(e[48].page)+1)&&(0,o.CFu)(t,"data-level-next-page",r)},d(e){e&&(0,o.YoD)(t),i=!1,a()}}}function ce(e){let t,l;return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("p"),l.textContent=`${(0,c.Ay)("no results found")}`,(0,o.CFu)(l,"class","svelte-1vowdbo"),(0,o.CFu)(t,"class","contentItem svelte-1vowdbo")},m(e,n){(0,o.Yry)(e,t,n),(0,o.BCw)(t,l)},d(e){e&&(0,o.YoD)(t)}}}function Ae(e,t){let l,n,r,s,i,c,A,u,d,v,p,m=0==t[50]&&H(t),b=t[48].selectable&&X(t);function w(e,t){return e[48].gridView?ee:te}let C=w(t),f=C(t),h=(0,o.rv_)(t[48].results||[]),g=[];for(let e=0;e<h.length;e+=1)g[e]=ie(W(t,h,e));let y=t[48].more&&ae(t),x=0==t[48].total&&ce();return{key:e,first:null,c(){l=(0,o.ND4)("div"),n=(0,o.ND4)("div"),m&&m.c(),r=(0,o.xem)(),b&&b.c(),s=(0,o.xem)(),i=(0,o.ND4)("div"),f.c(),c=(0,o.xem)(),A=(0,o.ND4)("div");for(let e=0;e<g.length;e+=1)g[e].c();u=(0,o.xem)(),y&&y.c(),d=(0,o.xem)(),x&&x.c(),(0,o.CFu)(i,"class","levelActions svelte-1vowdbo"),(0,o.CFu)(n,"class","levelToolbar svelte-1vowdbo"),(0,o.CFu)(A,"class","levelItems svelte-1vowdbo"),(0,o.CFu)(l,"class",v="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-1vowdbo"),this.first=l},m(e,t){(0,o.Yry)(e,l,t),(0,o.BCw)(l,n),m&&m.m(n,null),(0,o.BCw)(n,r),b&&b.m(n,null),(0,o.BCw)(n,s),(0,o.BCw)(n,i),f.m(i,null),(0,o.BCw)(l,c),(0,o.BCw)(l,A);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(A,null);(0,o.BCw)(A,u),y&&y.m(A,null),(0,o.BCw)(A,d),x&&x.m(A,null)},p(e,a){if(0==(t=e)[50]?m?m.p(t,a):(m=H(t),m.c(),m.m(n,r)):m&&(m.d(1),m=null),t[48].selectable?b?b.p(t,a):(b=X(t),b.c(),b.m(n,s)):b&&(b.d(1),b=null),C===(C=w(t))&&f?f.p(t,a):(f.d(1),f=C(t),f&&(f.c(),f.m(i,null))),168427587&a[0]){let e;for(h=(0,o.rv_)(t[48].results||[]),e=0;e<h.length;e+=1){const l=W(t,h,e);g[e]?g[e].p(l,a):(g[e]=ie(l),g[e].c(),g[e].m(A,u))}for(;e<g.length;e+=1)g[e].d(1);g.length=h.length}t[48].more?y?y.p(t,a):(y=ae(t),y.c(),y.m(A,d)):y&&(y.d(1),y=null),0==t[48].total?x||(x=ce(),x.c(),x.m(A,null)):x&&(x.d(1),x=null),2&a[0]&&v!==(v="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-1vowdbo")&&(0,o.CFu)(l,"class",v)},i(e){e&&(p||(0,o.Dti)((()=>{p=(0,o.b7f)(l,a._J,{duration:300}),p.start()})))},o:o.lQ1,d(e){e&&(0,o.YoD)(l),m&&m.d(),b&&b.d(),f.d(),(0,o.ppq)(g,e),y&&y.d(),x&&x.d()}}}function ue(e){let t,l,n,r,s,i,a,A,u,d,v,p,m,b,w,C=(0,c.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"",f=e[5].Title+"",h=e[5].Description+"";function g(e,t){return e[5].getIcon?ve:de}let y=g(e),x=y(e);return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("div"),n=(0,o.ND4)("button"),r=(0,o.Qq7)(C),i=(0,o.xem)(),a=(0,o.ND4)("div"),x.c(),A=(0,o.xem)(),u=(0,o.ND4)("h4"),d=(0,o.Qq7)(f),v=(0,o.xem)(),p=(0,o.ND4)("p"),m=(0,o.Qq7)(h),(0,o.CFu)(n,"class","btn btn-primary btn-xs svelte-1vowdbo"),n.disabled=s=!e[25](e[5]),(0,o.CFu)(l,"class","levelToolbar svelte-1vowdbo"),(0,o.CFu)(u,"class","svelte-1vowdbo"),(0,o.CFu)(a,"class","info svelte-1vowdbo"),(0,o.CFu)(t,"class","preview svelte-1vowdbo")},m(s,c){(0,o.Yry)(s,t,c),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(n,r),(0,o.BCw)(t,i),(0,o.BCw)(t,a),x.m(a,null),(0,o.BCw)(a,A),(0,o.BCw)(a,u),(0,o.BCw)(u,d),(0,o.BCw)(a,v),(0,o.BCw)(a,p),(0,o.BCw)(p,m),b||(w=(0,o.KTR)(n,"click",(0,o.xZN)(e[38])),b=!0)},p(e,t){32&t[0]&&C!==(C=(0,c.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"")&&(0,o.iQh)(r,C),32&t[0]&&s!==(s=!e[25](e[5]))&&(n.disabled=s),y===(y=g(e))&&x?x.p(e,t):(x.d(1),x=y(e),x&&(x.c(),x.m(a,A))),32&t[0]&&f!==(f=e[5].Title+"")&&(0,o.iQh)(d,f),32&t[0]&&h!==(h=e[5].Description+"")&&(0,o.iQh)(m,h)},d(e){e&&(0,o.YoD)(t),x.d(),b=!1,w()}}}function de(e){let t,l,n,r,s;return{c(){t=(0,o.ND4)("div"),l=(0,o.QQy)("svg"),(0,o.CFu)(l,"class","svelte-1vowdbo"),(0,o.CFu)(t,"class","previewIcon svelte-1vowdbo")},m(i,a){(0,o.Yry)(i,t,a),(0,o.BCw)(t,l),r||(s=(0,o.hGc)(n=m.call(null,l,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),r=!0)},p(e,t){n&&(0,o.Qk1)(n.update)&&32&t[0]&&n.update.call(null,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,o.YoD)(t),r=!1,s()}}}function ve(e){let t,l,n,r;return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("img"),(0,o.mq_)(l.src,n=e[5].getURL+"/@@images/image/preview")||(0,o.CFu)(l,"src",n),(0,o.CFu)(l,"alt",r=e[5].Title),(0,o.CFu)(l,"class","svelte-1vowdbo"),(0,o.CFu)(t,"class","previewImage")},m(e,n){(0,o.Yry)(e,t,n),(0,o.BCw)(t,l)},p(e,t){32&t[0]&&!(0,o.mq_)(l.src,n=e[5].getURL+"/@@images/image/preview")&&(0,o.CFu)(l,"src",n),32&t[0]&&r!==(r=e[5].Title)&&(0,o.CFu)(l,"alt",r)},d(e){e&&(0,o.YoD)(t)}}}function pe(e){let t,l,n,r,s,i,a,A,u;return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("div"),n=(0,o.ND4)("button"),n.textContent=`${(0,c.Ay)("add selected items")}`,r=(0,o.xem)(),s=(0,o.ND4)("div"),i=(0,o.QQy)("svg"),(0,o.CFu)(n,"class","btn btn-primary btn-xs svelte-1vowdbo"),(0,o.CFu)(l,"class","levelToolbar svelte-1vowdbo"),(0,o.CFu)(i,"class","svelte-1vowdbo"),(0,o.CFu)(s,"class","info svelte-1vowdbo"),(0,o.CFu)(t,"class","preview svelte-1vowdbo")},m(c,d){(0,o.Yry)(c,t,d),(0,o.BCw)(t,l),(0,o.BCw)(l,n),(0,o.BCw)(t,r),(0,o.BCw)(t,s),(0,o.BCw)(s,i),A||(u=[(0,o.KTR)(n,"click",(0,o.xZN)(e[21])),(0,o.hGc)(a=m.call(null,i,{iconName:"files"}))],A=!0)},p:o.lQ1,d(e){e&&(0,o.YoD)(t),A=!1,(0,o.oOW)(u)}}}function me(e){let t;return{c(){t=(0,o.ND4)("div"),(0,o.CFu)(t,"class","upload-wrapper svelte-1vowdbo")},m(e,l){(0,o.Yry)(e,t,l)},d(e){e&&(0,o.YoD)(t)}}}function be(e){let t;return{c(){t=(0,o.ND4)("p"),t.textContent=`${(0,c.Ay)("loading content items")}`},m(e,l){(0,o.Yry)(e,t,l)},p:o.lQ1,d(e){e&&(0,o.YoD)(t)}}}function we(e){let t,l,n=e[3]&&M(e);return{c(){n&&n.c(),t=(0,o.Iex)()},m(e,r){n&&n.m(e,r),(0,o.Yry)(e,t,r),l=!0},p(e,l){e[3]?n?(n.p(e,l),8&l[0]&&(0,o.c7F)(n,1)):(n=M(e),n.c(),(0,o.c7F)(n,1),n.m(t.parentNode,t)):n&&((0,o.V44)(),(0,o.Tn8)(n,1,1,(()=>{n=null})),(0,o.GYV)())},i(e){l||((0,o.c7F)(n),l=!0)},o(e){(0,o.Tn8)(n),l=!1},d(e){e&&(0,o.YoD)(t),n&&n.d(e)}}}function Ce(e,t,l){let n,a,c,u,m,b,f;i.ih({scrollX:!0,container:".levelColumns",duration:500});const h=(0,r.SD)("currentPath");(0,o.j0C)(e,h,(e=>l(2,c=e)));const g=(0,r.SD)("config");(0,o.j0C)(e,g,(e=>l(6,b=e)));const y=(0,r.SD)("pathCache"),x=(0,r.SD)("showContentBrowser");(0,o.j0C)(e,x,(e=>l(3,u=e)));const D=(0,r.SD)("selectedItems");(0,o.j0C)(e,D,(e=>l(43,f=e)));const B=(0,r.SD)("selectedUids");(0,o.j0C)(e,B,(e=>l(42,m=e)));const F=(0,r.SD)("previewUids");(0,o.j0C)(e,F,(e=>l(0,n=e)));const N=C(b,y);(0,o.j0C)(e,N,(e=>l(1,a=e)));let I=!1,T={},U=!1,Y=!1,S=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function k({data:e=null,uuid:t=null,action:r="show"}){if(e&&"show"==r)l(5,T=e),(0,o.vu6)(F,n=[e.UID],n);else if(t&&"add"==r&&-1===n.indexOf(t)){if(b.maximumSelectionSize>0&&n.length>=b.maximumSelectionSize)return;(0,o.vu6)(F,n=[...n,t],n)}else t&&"remove"==r&&-1!==n.indexOf(t)?F.update((e=>(e.splice(e.indexOf(t),1),e))):"clear"==r&&(l(5,T={}),(0,o.vu6)(F,n=[],n))}function $(e,t){l(4,I=!1),k({action:"clear"}),"/"!==e?function(e){if("search"==b.mode)k({data:e});else if(e.is_folderish)h.set(e.path);else{const t=e.path.split("/"),l=t.slice(0,t.length-1).join("/");h.set(l||"/"),k({data:e})}K()}(e):h.set(e)}function Q(e,t){U||(U=!0);const l=t.currentTarget.closest(".levelItems"),o=l.querySelectorAll(".selectedItem");if(o.length&&1!=b.maximumSelectionSize)if(Y||t?.shiftKey){let t=!1;for(const o of l.children){if(-1!==[e.UID,T.UID].indexOf(o.dataset.uuid)){if(t){k({uuid:o.dataset.uuid,action:"add"}),t=!1;continue}t=!0}k({uuid:o.dataset.uuid,action:t?"add":"remove"})}}else t?.metaKey||t?.ctrlKey?k({uuid:e.UID,action:-1==n.indexOf(e.UID)?"add":"remove"}):([...o].map((e=>e.classList.remove("selectedItem"))),$(e));else $(e);t.currentTarget.focus(),t.currentTarget.classList.add("selectedItem")}function _(){if(U)return;const e=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem"),document.querySelector(".levelColumn .contentItem")];e.length&&(U=!0,e[0].focus())}function j(e,t){const l=t.currentTarget;if(Y=t.shiftKey,"Escape"==t.key&&P(),"ArrowDown"==t.key&&l?.nextElementSibling?.classList.contains("contentItem")&&l.nextElementSibling.click(),"ArrowUp"==t.key&&l?.previousElementSibling?.classList.contains("contentItem")&&l.previousElementSibling.click(),"ArrowRight"==t.key){const e=t.target.closest(".levelColumn"),l=e?.nextElementSibling;if(!l||!l.classList.contains("levelColumn"))return;l.querySelector(".contentItem")?.click()}if("ArrowLeft"==t.key){const e=t.target.closest(".levelColumn"),l=e?.previousElementSibling;if(!l||!l.classList.contains("levelColumn"))return;l.querySelector(".inPath").click()}"Space"==t.key&&Q(e,t),"Enter"==t.key&&E(e)&&(1==b.maximumSelectionSize?q(e):R())}async function q(e){1==b.maximumSelectionSize?(D.set([e]),B.set([e.UID])):(D.update((t=>[...t,e])),B.update((()=>f.map((e=>e.UID))))),function(e,t){if(!t.recentlyUsed)return;const l=w(!1,t),o=l.filter((t=>t.UID===e.UID));o.length>0&&l.splice(l.indexOf(o[0]),1),l.push(e),d.A.storage.set(t.recentlyUsedKey,l)}(e,b),k({action:"clear"}),(0,o.vu6)(x,u=!1,u),U=!1}async function R(){const e=await p(n,b);D.update((t=>{for(const l of e)-1==m.indexOf(l.UID)&&t.push(l);return t})),B.update((()=>f.map((e=>e.UID)))),k({action:"clear"}),(0,o.vu6)(x,u=!1,u),U=!1}function P(){(0,o.vu6)(x,u=!1,u),U=!1,k({action:"clear"})}function E(e){return-1===m.indexOf(e.UID)}function K(){const e=document.querySelector(".levelColumns");e&&i.VG({x:e.scrollWidth+100})}return e.$$.update=()=>{12&e.$$.dirty[0]&&u&&N.get({path:c}),2&e.$$.dirty[0]&&K(),e.$$.dirty[0]},[n,a,c,u,I,T,b,h,g,x,D,B,F,N,S,async function(){k({action:"clear"}),l(4,I=!0),await s.A.timeout(1);const e=document.querySelector(".upload-wrapper");e.classList.add("pat-upload"),new A.default(e,{baseUrl:b.base_url,currentPath:c,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(e,t)=>{N.get({path:c,updateCache:!0})}})},$,Q,_,j,q,R,function(e){q(e.detail.item)},async function(e){const t=e.detail.item.path,l=await v({vocabularyUrl:b.vocabularyUrl,attributes:b.attributes,levelInfoPath:t});if(!l.total)return void alert(`${t} not found!`);const o=l.results[0];o.path||(o.path="/"),$(o)},P,E,K,function(e){return-1!=c.indexOf(e.path)},function(){let e;e&&clearTimeout(e),e=setTimeout((()=>{N.get({path:c,searchTerm:this.value})}),300)},function(e){const t=new IntersectionObserver((t=>{for(const l of t)if(l.isIntersecting){const t=e.dataset.levelPath,l=parseInt(e.dataset.levelNextPage);N.get({loadMorePath:t,page:l})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{t.observe(e)}),500)},()=>P(),()=>$("/"),()=>$("/"),e=>q(e),(e,t,l)=>(0,o.vu6)(N,t[l].gridView=!0,a),(e,t,l)=>(0,o.vu6)(N,t[l].gridView=!1,a),(e,t)=>j(e,t),(e,t)=>Q(e,t),()=>q(T),()=>{K(),_()}]}class fe extends o.r7T{constructor(e){super(),(0,o.TsN)(this,e,Ce,we,o.jXN,{},null,[-1,-1])}}var he=fe,ge=l(81557),ye=l(44423),xe=l.n(ye),De=l(44563),Be=l(94441),Fe={};Fe.styleTagTransform=O(),Fe.setAttributes=R(),Fe.insert=j(),Fe.domAPI=Q(),Fe.insertStyleElement=E();k()(Be.A,Fe),Be.A&&Be.A.locals&&Be.A.locals;function Ne(e,t,l){const o=e.slice();return o[19]=t[l],o[21]=l,o}function Ie(e){let t,l=[],n=new Map,r=(0,o.rv_)(e[0]);const s=e=>e[19].UID;for(let t=0;t<r.length;t+=1){let o=Ne(e,r,t),i=s(o);n.set(i,l[t]=Ue(i,o))}return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=(0,o.Iex)()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);(0,o.Yry)(e,t,n)},p(e,i){if(129&i){r=(0,o.rv_)(e[0]);for(let e=0;e<l.length;e+=1)l[e].r();l=(0,o.l7s)(l,i,s,1,e,r,n,t.parentNode,o.F8r,Ue,t,Ne);for(let e=0;e<l.length;e+=1)l[e].a()}},d(e){e&&(0,o.YoD)(t);for(let t=0;t<l.length;t+=1)l[t].d(e)}}}function Te(e){let t,l,n;return{c(){t=(0,o.ND4)("img"),(0,o.mq_)(t.src,l=e[19].getURL+"/@@images/image/mini")||(0,o.CFu)(t,"src",l),(0,o.CFu)(t,"alt",n=e[19].Title),(0,o.CFu)(t,"class","svelte-bljrxf")},m(e,l){(0,o.Yry)(e,t,l)},p(e,r){1&r&&!(0,o.mq_)(t.src,l=e[19].getURL+"/@@images/image/mini")&&(0,o.CFu)(t,"src",l),1&r&&n!==(n=e[19].Title)&&(0,o.CFu)(t,"alt",n)},d(e){e&&(0,o.YoD)(t)}}}function Ue(e,t){let l,n,r,s,i,a,c,A,u,d,v,p,b,w,C,f,h,g,y,x=t[19].Title+"",D=t[19].path+"",B=o.lQ1;function F(){return t[9](t[21])}let N=t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)&&Te(t);return{key:e,first:null,c(){l=(0,o.ND4)("div"),n=(0,o.ND4)("div"),r=(0,o.ND4)("button"),s=(0,o.QQy)("svg"),a=(0,o.xem)(),c=(0,o.ND4)("div"),A=(0,o.ND4)("span"),u=(0,o.Qq7)(x),d=(0,o.ND4)("br"),v=(0,o.xem)(),p=(0,o.ND4)("span"),b=(0,o.Qq7)(D),w=(0,o.xem)(),N&&N.c(),C=(0,o.xem)(),(0,o.CFu)(r,"class","btn btn-link btn-sm link-secondary svelte-bljrxf"),(0,o.CFu)(A,"class","item-title"),(0,o.CFu)(p,"class","small"),(0,o.CFu)(n,"class","item-info svelte-bljrxf"),(0,o.CFu)(l,"class","selected-item svelte-bljrxf"),(0,o.CFu)(l,"data-uuid",f=t[19].UID),this.first=l},m(e,t){(0,o.Yry)(e,l,t),(0,o.BCw)(l,n),(0,o.BCw)(n,r),(0,o.BCw)(r,s),(0,o.BCw)(n,a),(0,o.BCw)(n,c),(0,o.BCw)(c,A),(0,o.BCw)(A,u),(0,o.BCw)(c,d),(0,o.BCw)(c,v),(0,o.BCw)(c,p),(0,o.BCw)(p,b),(0,o.BCw)(l,w),N&&N.m(l,null),(0,o.BCw)(l,C),g||(y=[(0,o.hGc)(i=m.call(null,s,{iconName:"x-circle"})),(0,o.KTR)(r,"click",F)],g=!0)},p(e,n){t=e,1&n&&x!==(x=t[19].Title+"")&&(0,o.iQh)(u,x),1&n&&D!==(D=t[19].path+"")&&(0,o.iQh)(b,D),t[19].getURL&&(t[19].getIcon||"Image"===t[19].portal_type)?N?N.p(t,n):(N=Te(t),N.c(),N.m(l,C)):N&&(N.d(1),N=null),1&n&&f!==(f=t[19].UID)&&(0,o.CFu)(l,"data-uuid",f)},r(){h=l.getBoundingClientRect()},f(){(0,o.K$G)(l),B()},a(){B(),B=(0,o.qYc)(l,h,ge.U,{duration:500})},d(e){e&&(0,o.YoD)(l),N&&N.d(),g=!1,(0,o.oOW)(y)}}}function Ye(e){let t;return{c(){t=(0,o.ND4)("p"),t.textContent=`${(0,c.Ay)("loading selected items")}`},m(e,l){(0,o.Yry)(e,t,l)},d(e){e&&(0,o.YoD)(t)}}}function Se(e){let t,l,n,r,s,i,a,A=e[0]&&Ie(e),u=!e[0]&&Ye();return{c(){t=(0,o.ND4)("div"),l=(0,o.ND4)("div"),A&&A.c(),n=(0,o.xem)(),u&&u.c(),r=(0,o.xem)(),s=(0,o.ND4)("button"),s.textContent=`${(0,c.Ay)("Select")}`,(0,o.CFu)(l,"class","content-browser-selected-items svelte-bljrxf"),(0,o.CFu)(s,"class","btn btn-primary"),(0,o.hgi)(s,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,o.CFu)(t,"class","content-browser-selected-items-wrapper svelte-bljrxf"),(0,o.hgi)(t,"width",e[2].width||"auto")},m(c,d){(0,o.Yry)(c,t,d),(0,o.BCw)(t,l),A&&A.m(l,null),(0,o.BCw)(l,n),u&&u.m(l,null),(0,o.BCw)(t,r),(0,o.BCw)(t,s),e[11](t),i||(a=(0,o.KTR)(s,"click",(0,o.xZN)(e[10])),i=!0)},p(e,[r]){e[0]?A?A.p(e,r):(A=Ie(e),A.c(),A.m(l,n)):A&&(A.d(1),A=null),e[0]?u&&(u.d(1),u=null):u||(u=Ye(),u.c(),u.m(l,null)),4&r&&(0,o.hgi)(t,"width",e[2].width||"auto")},i:o.lQ1,o:o.lQ1,d(l){l&&(0,o.YoD)(t),A&&A.d(),u&&u.d(),e[11](null),i=!1,a()}}}function ke(e,t,l){let n,s,i,a,c=!0;const A=(0,r.SD)("config");(0,o.j0C)(e,A,(e=>l(2,s=e)));const u=s.fieldId,d=document.getElementById(u),v=(0,r.SD)("selectedItems");(0,o.j0C)(e,v,(e=>l(0,n=e)));const m=(0,r.SD)("selectedUids"),b=(0,r.SD)("showContentBrowser");function w(e){v.update((t=>(t.splice(e,1),t))),m.update((()=>n.map((e=>e.UID))))}function C(){1!==s.maximumSelectionSize&&n.length>1&&xe().create(d.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:e=>{let t=[];for(const l of e.target.children)t.push(l.dataset.uuid);f(t)}})}function f(e){const t=e.join(s.separator);d.value=t,d.dispatchEvent(De.A.change_event())}(0,o.j0C)(e,b,(e=>l(3,i=e))),(0,r.Rc)((async()=>{await async function(){const e=s.selection.length?s.selection:d?.value?d.value.split(s.separator):[];if(!e.length)return;const t=await p(e,s);(0,o.vu6)(v,n=t,n),m.update((()=>t.map((e=>e.UID))))}(),C(),l(8,c=!1)}));return e.$$.update=()=>{257&e.$$.dirty&&(!n.length&&c||(f(function(){let e=[];return n.forEach((t=>{e.push(t.UID)})),e}()),C()))},[n,a,s,i,A,v,b,w,c,e=>w(e),()=>(0,o.vu6)(b,i=!0,i),function(e){o.Dnk[e?"unshift":"push"]((()=>{a=e,l(1,a)}))}]}class $e extends o.r7T{constructor(e){super(),(0,o.TsN)(this,e,ke,Se,o.jXN,{})}}var Qe=$e;(0,u.T5)(!1);function _e(e){let t,l,n,r;return t=new he({}),n=new Qe({}),{c(){(0,o.N0i)(t.$$.fragment),l=(0,o.xem)(),(0,o.N0i)(n.$$.fragment)},m(e,s){(0,o.wSR)(t,e,s),(0,o.Yry)(e,l,s),(0,o.wSR)(n,e,s),r=!0},p:o.lQ1,i(e){r||((0,o.c7F)(t.$$.fragment,e),(0,o.c7F)(n.$$.fragment,e),r=!0)},o(e){(0,o.Tn8)(t.$$.fragment,e),(0,o.Tn8)(n.$$.fragment,e),r=!1},d(e){e&&(0,o.YoD)(l),(0,o.Hbl)(t,e),(0,o.Hbl)(n,e)}}}function je(e,t,l){let s,i,{maxDepth:a}=t,{width:c}=t,{attributes:A}=t,{contextPath:d}=t,{vocabularyUrl:v}=t,{mode:p="browse"}=t,{basePath:m=""}=t,{selectableTypes:b=[]}=t,{maximumSelectionSize:w=-1}=t,{separator:C}=t,{selection:f=[]}=t,{query:h={}}=t,{fieldId:g}=t,{upload:y}=t,{favorites:x}=t,{recentlyUsed:D}=t,{recentlyUsedKey:B}=t,{recentlyUsedMaxItems:F}=t,{bSize:N=20}=t;const I=n.A.getLogger("pat-contentbrowser");!function(){let e=(0,u.T5)("");(0,r.o)("currentPath",e)}(),function(){let e=(0,u.T5)({});(0,r.o)("config",e)}(),function(){let e=(0,u.T5)({});(0,r.o)("pathCache",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("selectedItems",e)}(),function(){let e=(0,u.T5)(!1);(0,r.o)("showContentBrowser",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("selectedUids",e)}(),function(){let e=(0,u.T5)([]);(0,r.o)("previewUids",e)}();const T=(0,r.SD)("currentPath");(0,o.j0C)(e,T,(e=>l(22,i=e))),i||(0,o.vu6)(T,i=m||"/",i);const U=document.body.getAttribute("data-portal-url");let Y=(0,r.SD)("config");return(0,o.j0C)(e,Y,(e=>l(21,s=e))),(0,o.vu6)(Y,s={mode:p,attributes:A,contextPath:d,vocabularyUrl:v,width:c,maxDepth:a,basePath:m,selectableTypes:b,maximumSelectionSize:w,separator:C,selection:f,query:h,fieldId:g,uploadEnabled:y,favorites:x,recentlyUsed:D,recentlyUsedKey:B,recentlyUsedMaxItems:F,base_url:U,pageSize:N},s),I.debug(`Initialized App<${g}> with config ${JSON.stringify(s)}`),e.$$set=e=>{"maxDepth"in e&&l(2,a=e.maxDepth),"width"in e&&l(3,c=e.width),"attributes"in e&&l(4,A=e.attributes),"contextPath"in e&&l(5,d=e.contextPath),"vocabularyUrl"in e&&l(6,v=e.vocabularyUrl),"mode"in e&&l(7,p=e.mode),"basePath"in e&&l(8,m=e.basePath),"selectableTypes"in e&&l(9,b=e.selectableTypes),"maximumSelectionSize"in e&&l(10,w=e.maximumSelectionSize),"separator"in e&&l(11,C=e.separator),"selection"in e&&l(12,f=e.selection),"query"in e&&l(13,h=e.query),"fieldId"in e&&l(14,g=e.fieldId),"upload"in e&&l(15,y=e.upload),"favorites"in e&&l(16,x=e.favorites),"recentlyUsed"in e&&l(17,D=e.recentlyUsed),"recentlyUsedKey"in e&&l(18,B=e.recentlyUsedKey),"recentlyUsedMaxItems"in e&&l(19,F=e.recentlyUsedMaxItems),"bSize"in e&&l(20,N=e.bSize)},[T,Y,a,c,A,d,v,p,m,b,w,C,f,h,g,y,x,D,B,F,N]}class qe extends o.r7T{constructor(e){super(),(0,o.TsN)(this,e,je,_e,o.jXN,{maxDepth:2,width:3,attributes:4,contextPath:5,vocabularyUrl:6,mode:7,basePath:8,selectableTypes:9,maximumSelectionSize:10,separator:11,selection:12,query:13,fieldId:14,upload:15,favorites:16,recentlyUsed:17,recentlyUsedKey:18,recentlyUsedMaxItems:19,bSize:20})}}var Re=qe}}]);
//# sourceMappingURL=18085.0742d30aaf46499802df.min.js.map