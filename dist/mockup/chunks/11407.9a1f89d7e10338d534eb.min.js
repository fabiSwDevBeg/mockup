(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[11407,68196],{11407:function(e,o,t){t(68196)},68196:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");let o=0;const t=e=>o=>typeof o===e,n=(e=>o=>(e=>{const o=typeof e;return null===e?"null":"object"===o&&Array.isArray(e)?"array":"object"===o&&(t=r=e,n=(s=String).prototype,n.isPrototypeOf(t)||(null===(i=r.constructor)||void 0===i?void 0:i.name)===s.name)?"string":o;var t,n;var r,s,i})(o)===e)("string"),r=t("boolean"),s=e=>null==e,i=e=>!s(e),a=t("function"),d=t("number"),l=e=>()=>e,c=(e,o)=>e===o,m=l(!1);class u{constructor(e,o){this.tag=e,this.value=o}static some(e){return new u(!0,e)}static none(){return u.singletonNone}fold(e,o){return this.tag?o(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?u.some(e(this.value)):u.none()}bind(e){return this.tag?e(this.value):u.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:u.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return i(e)?u.some(e):u.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}u.singletonNone=new u(!1);const p=Array.prototype.indexOf,g=(e,o)=>{return t=e,n=o,p.call(t,n)>-1;var t,n},h=(e,o)=>{const t=e.length,n=new Array(t);for(let r=0;r<t;r++){const t=e[r];n[r]=o(t,r)}return n},f=(e,o)=>{for(let t=0,n=e.length;t<n;t++){o(e[t],t)}},y=Object.keys;"undefined"!=typeof window?window:Function("return this;")();const v=e=>e.dom.nodeName.toLowerCase(),w=e=>e.dom.nodeType,b=e=>o=>w(o)===e,N=e=>8===w(e)||"#comment"===v(e),T=b(1),A=b(3),C=b(9),S=b(11),x=(e,o,t)=>{if(!(n(t)||r(t)||d(t)))throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(o,t+"")},D=(e,o,t)=>{x(e.dom,o,t)},E=(e,o)=>{const t=e.dom;((e,o)=>{const t=y(e);for(let n=0,r=t.length;n<r;n++){const r=t[n];o(e[r],r)}})(o,((e,o)=>{x(t,o,e)}))},k=(e,o)=>{const t=e.dom.getAttribute(o);return null===t?void 0:t},M=(e,o)=>u.from(k(e,o)),P=(e,o)=>{e.dom.removeAttribute(o)},B=e=>{return o=e.dom.attributes,t=(e,o)=>(e[o.name]=o.value,e),n={},f(o,((e,o)=>{n=t(n,e,o)})),n;var o,t,n},O=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(e,o)=>{const t=(o||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||t.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return O(t.childNodes[0])},fromTag:(e,o)=>{const t=(o||document).createElement(e);return O(t)},fromText:(e,o)=>{const t=(o||document).createTextNode(e);return O(t)},fromDom:O,fromPoint:(e,o,t)=>u.from(e.dom.elementFromPoint(o,t)).map(O)},L=(e,o)=>{const t=e.dom;if(1!==t.nodeType)return!1;{const e=t;if(void 0!==e.matches)return e.matches(o);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(o);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(o);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")}},R=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,I=(e,o)=>e.dom===o.dom,V=L,j=(q=/^\s+|\s+$/g,e=>e.replace(q,""));var q;const _=e=>void 0!==e.style&&a(e.style.getPropertyValue),F=e=>{return C(e)?e:(o=e,$.fromDom(o.dom.ownerDocument));var o},H=e=>u.from(e.dom.parentNode).map($.fromDom),z=(e,o)=>{const t=a(o)?o:m;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,o=$.fromDom(e);if(r.push(o),!0===t(o))break;n=e}return r},K=e=>u.from(e.dom.previousSibling).map($.fromDom),U=e=>u.from(e.dom.nextSibling).map($.fromDom),Y=e=>h(e.dom.childNodes,$.fromDom),G=e=>((e,o)=>{const t=e.dom.childNodes;return u.from(t[o]).map($.fromDom)})(e,0),J=a(Element.prototype.attachShadow)&&a(Node.prototype.getRootNode)?e=>$.fromDom(e.dom.getRootNode()):F,Q=e=>{const o=J(e);return S(t=o)&&i(t.dom.host)?u.some(o):u.none();var t},W=e=>$.fromDom(e.dom.host),X=e=>{const o=A(e)?e.dom.parentNode:e.dom;if(null==o||null===o.ownerDocument)return!1;const t=o.ownerDocument;return Q($.fromDom(o)).fold((()=>t.body.contains(o)),(n=X,r=W,e=>n(r(e))));var n,r},Z=(e,o,t)=>{((e,o,t)=>{if(!n(t))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t);_(e)&&e.style.setProperty(o,t)})(e.dom,o,t)},ee=(e,o)=>{const t=e.dom,n=window.getComputedStyle(t).getPropertyValue(o);return""!==n||X(e)?n:oe(t,o)},oe=(e,o)=>_(e)?e.style.getPropertyValue(o):"",te=(e,o)=>{const t=e.dom,n=oe(t,o);return u.from(n).filter((e=>e.length>0))},ne=(e,o)=>{((e,o)=>{_(e)&&e.style.removeProperty(o)})(e.dom,o),((e,o,t=c)=>e.exists((e=>t(e,o))))(M(e,"style").map(j),"")&&P(e,"style")},re=(e,o)=>{H(e).each((t=>{t.dom.insertBefore(o.dom,e.dom)}))},se=(e,o)=>{U(e).fold((()=>{H(e).each((e=>{ae(e,o)}))}),(e=>{re(e,o)}))},ie=(e,o)=>{G(e).fold((()=>{ae(e,o)}),(t=>{e.dom.insertBefore(o.dom,t.dom)}))},ae=(e,o)=>{e.dom.appendChild(o.dom)},de=(e,o)=>{re(e,o),ae(o,e)},le=(e,o)=>{f(o,((t,n)=>{const r=0===n?e:o[n-1];se(r,t)}))},ce=(e,o)=>{f(o,(o=>{ae(e,o)}))},me=(e,o)=>{let t=[];return f(Y(e),(e=>{o(e)&&(t=t.concat([e])),t=t.concat(me(e,o))})),t};const ue=(e,o,t)=>{let n=e.dom;const r=a(t)?t:m;for(;n.parentNode;){n=n.parentNode;const e=$.fromDom(n);if(o(e))return u.some(e);if(r(e))break}return u.none()},pe=e=>{const o=e.dom;null!==o.parentNode&&o.parentNode.removeChild(o)},ge=e=>{const o=Y(e);o.length>0&&le(e,o),pe(e)},he=(e,o)=>((e,o)=>{const t=void 0===o?document:o.dom;return R(t)?[]:h(t.querySelectorAll(e),$.fromDom)})(o,e),fe=(e,o,t)=>ue(e,(e=>L(e,o)),t),ye=(e,o)=>((e,o)=>{const t=void 0===o?document:o.dom;return R(t)?u.none():u.from(t.querySelector(e)).map($.fromDom)})(o,e),ve=(e,o,t)=>((e,o,t,n,r)=>e(t,n)?u.some(t):a(r)&&r(t)?u.none():o(t,n,r))(((e,o)=>L(e,o)),fe,e,o,t),we=((e,o)=>{const t=o=>e(o)?u.from(o.dom.nodeValue):u.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+o+" value of a "+o+" node");return t(n).getOr("")},getOption:t,set:(t,n)=>{if(!e(t))throw new Error("Can only set raw "+o+" value of a "+o+" node");t.dom.nodeValue=n}}})(A,"text"),be=e=>we.get(e),Ne=(e,o)=>we.set(e,o);var Te=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Ae=(e,o)=>({element:e,offset:o}),Ce=(e,o,t)=>e.property().isText(o)&&0===e.property().getText(o).trim().length||e.property().isComment(o)?t(o).bind((o=>Ce(e,o,t).orThunk((()=>u.some(o))))):u.none(),Se=(e,o)=>{if(e.property().isText(o))return e.property().getText(o).length;return e.property().children(o).length},xe=(e,o)=>{const t=Ce(e,o,e.query().prevSibling).getOr(o);if(e.property().isText(t))return Ae(t,Se(e,t));const n=e.property().children(t);return n.length>0?xe(e,n[n.length-1]):Ae(t,Se(e,t))},De=xe,Ee={up:l({selector:fe,closest:ve,predicate:ue,all:z}),down:l({selector:he,predicate:me}),styles:l({get:ee,getRaw:te,set:Z,remove:ne}),attrs:l({get:k,set:D,remove:P,copyTo:(e,o)=>{const t=B(e);E(o,t)}}),insert:l({before:re,after:se,afterAll:le,append:ae,appendAll:ce,prepend:ie,wrap:de}),remove:l({unwrap:ge,remove:pe}),create:l({nu:$.fromTag,clone:e=>$.fromDom(e.dom.cloneNode(!1)),text:$.fromText}),query:l({comparePosition:(e,o)=>e.dom.compareDocumentPosition(o.dom),prevSibling:K,nextSibling:U}),property:l({children:Y,name:v,parent:H,document:e=>F(e).dom,isText:A,isComment:N,isElement:T,isSpecial:e=>{const o=v(e);return g(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],o)},getLanguage:e=>T(e)?M(e,"lang"):u.none(),getText:be,setText:Ne,isBoundary:e=>!!T(e)&&("body"===v(e)||g(Te,v(e))),isEmptyTag:e=>!!T(e)&&g(["br","img","hr","input"],v(e)),isNonEditable:e=>T(e)&&"false"===k(e,"contenteditable")}),eq:I,is:V},ke="details",Me="mce-accordion",Pe="mce-accordion-summary",Be="mce-accordion-body",Oe="div";var $e=tinymce.util.Tools.resolve("tinymce.util.Tools");const Le=e=>"SUMMARY"===(null==e?void 0:e.nodeName),Re=e=>"DETAILS"===(null==e?void 0:e.nodeName),Ie=e=>e.hasAttribute("open"),Ve=e=>{const o=e.selection.getNode();return Le(o)||Boolean(e.dom.getParent(o,Le))},je=e=>!Ve(e)&&e.dom.isEditable(e.selection.getNode()),qe=e=>u.from(e.dom.getParent(e.selection.getNode(),Re)),_e=e=>(e.innerHTML='<br data-mce-bogus="1" />',e),Fe=e=>_e(e.dom.create("p")),He=(e,o)=>{if(!Le(null==o?void 0:o.firstChild)){const t=(e=>_e(e.dom.create("summary")))(e);o.prepend(t),e.selection.setCursorLocation(t,0)}},ze=e=>o=>{((e,o)=>{if(Le(null==o?void 0:o.lastChild)){const t=Fe(e);o.appendChild(t),e.selection.setCursorLocation(t,0)}})(e,o),He(e,o)},Ke=e=>{if(!je(e))return;const t=$.fromDom(e.getBody()),n=(e=>{const t=(new Date).getTime(),n=Math.floor(1e9*Math.random());return o++,e+"_"+n+o+String(t)})("acc"),r=e.dom.encode(e.selection.getRng().toString()||e.translate("Accordion summary...")),s=e.dom.encode(e.translate("Accordion body...")),i=`<summary class="${Pe}">${r}</summary>`,a=`<${Oe} class="${Be}"><p>${s}</p></${Oe}>`;e.undoManager.transact((()=>{e.insertContent([`<details data-mce-id="${n}" class="${Me}" open="open">`,i,a,"</details>"].join("")),ye(t,`[data-mce-id="${n}"]`).each((o=>{P(o,"data-mce-id"),ye(o,"summary").each((o=>{const t=e.dom.createRng(),n=De(Ee,o);t.setStart(n.element.dom,n.offset),t.setEnd(n.element.dom,n.offset),e.selection.setRng(t)}))}))}))},Ue=(e,o)=>{const t=null!=o?o:!Ie(e);return t?e.setAttribute("open","open"):e.removeAttribute("open"),t},Ye=e=>{qe(e).each((o=>{const{nextSibling:t}=o;t?(e.selection.select(t,!0),e.selection.collapse(!0)):((e,o)=>{const t=Fe(e);o.insertAdjacentElement("afterend",t),e.selection.setCursorLocation(t,0)})(e,o),o.remove()}))},Ge=e=>{e.addCommand("InsertAccordion",(()=>Ke(e))),e.addCommand("ToggleAccordion",((o,t)=>((e,o)=>{qe(e).each((t=>{((e,o,t)=>{e.dispatch("ToggledAccordion",{element:o,state:t})})(e,t,Ue(t,o))}))})(e,t))),e.addCommand("ToggleAllAccordions",((o,t)=>((e,o)=>{const t=Array.from(e.getBody().querySelectorAll("details"));0!==t.length&&(f(t,(e=>Ue(e,null!=o?o:!Ie(e)))),((e,o,t)=>{e.dispatch("ToggledAllAccordions",{elements:o,state:t})})(e,t,o))})(e,t))),e.addCommand("RemoveAccordion",(()=>Ye(e)))};var Je=tinymce.util.Tools.resolve("tinymce.html.Node");const Qe=e=>{var o,t;return null!==(t=null===(o=e.attr("class"))||void 0===o?void 0:o.split(" "))&&void 0!==t?t:[]},We=(e,o)=>{const t=new Set([...Qe(e),...o]),n=Array.from(t);n.length>0&&e.attr("class",n.join(" "))},Xe=(e,o)=>{const t=((e,o)=>{const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];o(r,n)&&t.push(r)}return t})(Qe(e),(e=>!o.has(e)));e.attr("class",t.length>0?t.join(" "):null)},Ze=e=>e.name===ke&&g(Qe(e),Me),eo=e=>{const o=e.children();let t,n;const r=[];for(let e=0;e<o.length;e++){const a=o[e];"summary"===a.name&&s(t)?t=a:(i=a).name===Oe&&g(Qe(i),Be)&&s(n)?n=a:r.push(a)}var i;return{summaryNode:t,wrapperNode:n,otherNodes:r}},oo=e=>{const o=new Je("br",1);o.attr("data-mce-bogus","1"),e.empty(),e.append(o)};var to=tinymce.util.Tools.resolve("tinymce.util.VK");const no=e=>{(e=>{e.on("keydown",(o=>{!o.shiftKey&&o.keyCode===to.ENTER&&Ve(e)&&(o.preventDefault(),e.execCommand("ToggleAccordion"))}))})(e),e.on("ExecCommand",(o=>{const t=o.command.toLowerCase();"delete"!==t&&"forwarddelete"!==t||!(e=>qe(e).isSome())(e)||(e=>{$e.each($e.grep(e.dom.select("details",e.getBody())),ze(e))})(e)}))},ro=e=>o=>{const t=()=>o.setEnabled(je(e));return e.on("NodeChange",t),()=>e.off("NodeChange",t)};e.add("accordion",(e=>{(e=>{const o=()=>e.execCommand("InsertAccordion");e.ui.registry.addButton("accordion",{icon:"accordion",tooltip:"Insert accordion",onSetup:ro(e),onAction:o}),e.ui.registry.addMenuItem("accordion",{icon:"accordion",text:"Accordion",onSetup:ro(e),onAction:o}),e.ui.registry.addToggleButton("accordiontoggle",{icon:"accordion-toggle",tooltip:"Toggle accordion",onAction:()=>e.execCommand("ToggleAccordion")}),e.ui.registry.addToggleButton("accordionremove",{icon:"remove",tooltip:"Delete accordion",onAction:()=>e.execCommand("RemoveAccordion")}),e.ui.registry.addContextToolbar("accordion",{predicate:o=>e.dom.is(o,"details")&&e.getBody().contains(o)&&e.dom.isEditable(o.parentNode),items:"accordiontoggle accordionremove",scope:"node",position:"node"})})(e),Ge(e),no(e),(e=>{e.on("PreInit",(()=>{const{serializer:o,parser:t}=e;t.addNodeFilter(ke,(e=>{for(let o=0;o<e.length;o++){const t=e[o];if(Ze(t)){const e=t,{summaryNode:o,wrapperNode:n,otherNodes:r}=eo(e),a=i(o),d=a?o:new Je("summary",1);s(d.firstChild)&&oo(d),We(d,[Pe]),a||(i(e.firstChild)?e.insert(d,e.firstChild,!0):e.append(d));const l=i(n),c=l?n:new Je(Oe,1);if(We(c,[Be]),r.length>0)for(let e=0;e<r.length;e++){const o=r[e];c.append(o)}if(s(c.firstChild)){const e=new Je("p",1);oo(e),c.append(e)}l||e.append(c)}}})),o.addNodeFilter(ke,(e=>{const o=new Set([Pe]);for(let t=0;t<e.length;t++){const n=e[t];if(Ze(n)){const e=n,{summaryNode:t,wrapperNode:r}=eo(e);i(t)&&Xe(t,o),i(r)&&r.unwrap()}}}))}))})(e)}))}()}}]);
//# sourceMappingURL=11407.9a1f89d7e10338d534eb.min.js.map